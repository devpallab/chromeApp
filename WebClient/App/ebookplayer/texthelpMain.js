/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> !*/
var g_strAmp = "&";
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+g_strAmp+"MMplayerType="+ad+g_strAmp+"MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+=g_strAmp+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+=g_strAmp+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();

if(typeof(SpeechStream) =="undefined"){ var SpeechStream = new function(){};}var baa ="r\x77DontA\x6cter";var caa ="r\x77T\x48c\x6fmp";var daa ="r\x77THgen";var eaa ="r\x77THpgen";var faa = ["ScanSoft Emily_Full_22kHz","ScanSoft Samantha_Full_22kHz","ScanSoft Paulina_Full_22kHz","ScanSoft Isabel_Full_22kHz","ScanSoft Virginie_Full_22kHz","ScanSoft Julie_Full_22kHz","ScanSoft Steffi_Full_22kHz","ScanSoft Silvia_Full_22kHz","ScanSoft Claire_Full_22kHz","ScanSoft Ingrid_Full_22kHz","ScanSoft Karen_Full_22kHz","ScanSoft Raquel_Full_22kHz","ScanSoft Joana_Full_22kHz","Vocalizer Expressive Milena Premium High 22kHz","Vocalizer Expressive Ewa Premium High 22kHz","Vocalizer Expressive Tarik Premium High 22kHz","Vocalizer Expressive Tian-tian Premium High 22kHz","Vocalizer Expressive Sora Premium High 22kHz","Vocalizer Expressive Sin-ji Premium High 22kHz"]; var gaa = [ ["\x43lick\x20\x54\x6f\x20Spe\x61k\x20M\x6fde","\x53elect\x20this\x20then\x20cli\x63k\x20anywher\x65\x20in\x20the\x20bo\x6fk\x20t\x6f\x20st\x61rt\x20rea\x64ing\x20text","\x48az\x20cli\x63\x20para\x20el\x20mo\x64\x6f\x20\x68abla\x64o"], ["\x53peak\x20The\x20Current\x20Select\x69on","\x53p\x65ak\x20t\x68e\x20c\x75rrent\x20s\x65lection","\x4ceer\x20en\x20voz\x20alta\x20e\x6c\x20texto\x20s\x65\x6c\x65\x63cionad\x6f"], ["\x50aus\x65\x20Sp\x65ech","\x50ause\x20\x53peech","\x44isc\x75rso\x20\x64e\x20paus\x61"], ["\x53top\x20S\x70ee\x63h","\x53tops\x20speec\x68\x20playba\x63k","\x50\x61rar\x20v\x6fz"], ["\x54ranslat\x65\x20W\x6frd","\x44oub\x6ce-c\x6ci\x63k\x20a\x20word\x20in\x20t\x68e\x20book\x20and\x20\x63lick\x20this\x20\x69con\n"+"t\x6f\x20translat\x65\x20t\x68e\x20\x77ord\x20into\x20\x53panish","\x54raducir\x20pa\x6cabr\x61"], ["\x46act\x20Fin\x64er","\x53elect\x20som\x65\x20text\x20\x69n\x20the\x20book\x20and\x20click\x20t\x68\x69s\x20i\x63on\x20to\n"+"\x70\x65rform\x20a\x20Goo\x67le\x20search","\x42usc\x61dor\x20d\x65\x20datos"], ["\x44iction\x61ry","\x44ou\x62\x6ce-cl\x69ck\x20a\x20\x77\x6fr\x64\x20in\x20t\x68e\x20book\x20and\x20click\x20th\x69s\x20icon\x20to\n"+"s\x65e\x20d\x69ctionar\x79\x20\x64efinit\x69ons","\x44i\x63c\x69onario"], ["\x48ig\x68\x6cig\x68t\x20C\x79an","\x4da\x6be\x20a\x20sele\x63tion\x20in\x20the\x20book\x20and\x20click\x20this\x20ic\x6fn\x20to\n"+"\x63reate\x20a\x20b\x6cue\x20\x68ig\x68l\x69ght","\x52ealc\x65\x20azul\x20v\x65r\x64\x6fso"], ["\x48i\x67hli\x67ht\x20\x4dagent\x61","\x4da\x6be\x20a\x20sel\x65ction\x20in\x20the\x20\x62oo\x6b\x20and\x20click\x20this\x20icon\x20to\n"+"\x63reate\x20\x61\x20pink\x20\x68\x69gh\x6cight","\x52e\x61l\x63e\x20morado"], ["\x48ig\x68light\x20Yello\x77","\x4dak\x65\x20a\x20se\x6cection\x20in\x20th\x65\x20boo\x6b\x20and\x20clic\x6b\x20this\x20ic\x6fn\x20t\x6f\n"+"\x63reat\x65\x20a\x20yel\x6co\x77\x20highli\x67\x68t","\x52ealce\x20\x61m\x61rillo"], ["\x48ighlig\x68t\x20Gr\x65en","\x4dake\x20a\x20select\x69on\x20in\x20th\x65\x20book\x20\x61n\x64\x20click\x20this\x20\x69con\x20to\n"+"\x63reate\x20\x61\x20gr\x65en\x20\x68ighlig\x68t","\x52\x65alce\x20v\x65rde"], ["\x52\x65move\x20H\x69g\x68lights","\x52\x65move\x20\x61ll\x20your\x20\x68\x69\x67\x68l\x69g\x68ts\x20\x66ro\x6d\x20th\x69s\x20page","\x42orrar\x20re\x61lc\x65"], ["\x43o\x6cle\x63t\x20High\x6cights","\x43ollect\x20\x61\x6cl\x20\x79our\x20hig\x68l\x69ghts\x20\x61nd\x20d\x69splay\x20them\n"+"\x69n\x20a\x20\x77indow,\x20\x67roup\x65d\x20\x62y\x20\x63\x6flor","\x52ecopil\x61r\x20re\x61l\x63es"], ["\x43lick\x20\x68ere\x20to\x20s\x65l\x65ct\x20th\x65\x20text","\x43\x6c\x69ck\x20here\x20to\x20select\x20th\x65\x20t\x65xt","clic aqu"+ String.fromCharCode(237) +"\x20para\x20destac\x61r"], ["\x4dP3\x20Maker","\x4dP3\x20Mak\x65r","\x4d\x503\x20Maker"], ["\x43\x61lculator","\x43\x61lculat\x6fr","\x43alcu\x6cator"], ["\x47en\x65rate\x20Ca\x63h\x65","\x47\x65nerat\x65\x20Cac\x68e","\x47ener\x61te\x20Cach\x65"], ["\x43\x68\x65\x63k\x20C\x61che","\x43hec\x6b\x20Cach\x65","\x43h\x65ck\x20Cache"], ["\x50i\x63ture\x20Dicti\x6fn\x61ry","\x50\x69cture\x20Dict\x69onary","\x44iccion\x61rio\x20visual"], ["\x53\x70el\x6c\x20Check\x65r","\x53p\x65l\x6c\x20Chec\x6ber","\x53pell\x20\x43\x68\x65cker"], ["\x48\x6fmoph\x6fne\x20Checker","\x48omop\x68\x6fne\x20Checker","\x48omo\x70hone\x20Che\x63\x6ber"], ["\x50re\x64iction\x20C\x68eck\x65r","\x50redict\x69on\x20C\x68ec\x6b\x65r","\x50redi\x63tion\x20Checker"], ["\x53ubmit","\x53ub\x6dit","\x53ub\x6dit"], ["\x53tic\x6by\x20note","\x53tic\x6b\x79\x20note","\x53tick\x79\x20not\x65"], ["\x43reate\x20pr\x6fnunciat\x69\x6fn","\x43r\x65\x61te\x20pr\x6fnunciat\x69on","\x43re\x61t\x65\x20\x70ron\x75n\x63iation"], ["\x45\x64it\x20pronun\x63iat\x69on","\x45dit\x20pron\x75nci\x61ti\x6fn","\x45d\x69t\x20pronunc\x69ation"], ["\x56oc\x61bulary\x20lookup","\x56\x6fcab\x75l\x61r\x79\x20lookup","\x56oc\x61bulary\x20\x6coo\x6bup"], ["\x53trike\x20t\x68rough","\x4dake\x20a\x20s\x65lect\x69on\x20in\x20the\x20book\x20and\x20click\x20t\x68is\x20\x69con\x20to\n"+"s\x65t\x20strike-t\x68rough\x20styl\x65","\x53tri\x6b\x65\x20throug\x68"], ["\x53peec\x68\x20Recor\x64er","\x53p\x65ech\x20Record\x65r","\x53p\x65ec\x68\x20Re\x63\x6frder"], ["\x53cr\x65en\x20Mask","\x53creen\x20Mask","\x53\x63reen\x20M\x61sk"]];var haa = 0;var iaa = haa++;var jaa = haa++;var kaa = haa++;var laa = haa++;var maa = haa++;var naa = haa++;var oaa = haa++;var paa = haa++;var qaa = haa++;var raa =haa++;var saa = haa++;var taa = haa++;var uaa = haa++;var vaa = haa++;var waa = haa++;var xaa = haa++;var yaa = haa++;var zaa = haa++;var Aba = haa++;var Bba = haa++;var Cba = haa++;var Dba = haa++;var Eba = haa++;var Fba = haa++;var Gba = haa++;var Hba = haa++;var Iba = haa++;var Jba = haa++;var Kba = haa++;var Lba = haa++;var Mba = haa++; var Nba = haa++; var Oba = 0;var Pba = 1;var Qba = 2;var Rba = 3;var Sba = 4;var Tba = 5;var Uba = 6;var Vba = 7;var Wba = 8;var Xba = 9;var Yba = 10;var Zba = 11;var aba = 12;var bba = 13;var cba = 14;var dba = 15;var eba = 16;var fba = [ 0, 33, 66, 99, 132, 165, 198, 264, 297, 330, 363, 396, 429, 0, 528, 462, 561, 594, 231, 0, 0, 0, 0, 495, 627, 660, 759, 792, 825, 858, 693, 726 ];var gba ="t\x65xth\x65l\x70StopC\x6fntinu\x6fus";var hba ="t\x65xth\x65lpSkip";var FAST_SPEED = 55;var MEDIUM_SPEED = 40;var DEFAULT_SPEED = MEDIUM_SPEED;var SLOW_SPEED = 25;var VERY_SLOW_SPEED = 15;var READING_AGE_4 = 25;var READING_AGE_5 = 25;var READING_AGE_6 = 26;var READING_AGE_7 = 27;var READING_AGE_8 = 28;var nba = 29;var READING_AGE_10 = 30;var READING_AGE_11 = 35;var READING_AGE_12 = 40;var READING_AGE_13 = 44;var READING_AGE_14 = 46;var READING_AGE_15 = 48;var READING_AGE_16 = 50;var oba ="eba_language ENG_UK  ENGLISH UK ENG_US ENGLISH_US SPANISH SPANISH_US ESPANOL SPANISH_ES "+"FRENCH FRENCH_CA FRENCH_CN GERMAN ITALIAN DUTCH SWEDISH AUSTRALIAN PORTUGUESE PORTUGUESE_BR "+"PORTUGUES PORTUGUES_PT"; var ENG_UK = 0;var UK = 0; var ENGLISH = 0; var ENGLISH_UK = 0; var ENG_US = 1;var ENGLISH_US = 1;var SPANISH = 2;var SPANISH_US = 2;var ESPANOL = 3; var SPANISH_ES = 3;var FRENCH = 4;var FRENCH_CA = 5; var FRENCH_CN = 5; var GERMAN = 6;var ITALIAN = 7;var DUTCH = 8;var SWEDISH = 9;var AUSTRALIAN = 10;var PORTUGUESE = 11;var PORTUGUESE_BR = 11;var PORTUGUES = 12; var Jca = 12;var Kca = 13;var Lca = 14;var Mca = 15;var CHINESE = 16;var Oca = 17;var CANTONESE = 18;var Qca ="eba_locale LOCALE_UK LOCALE_US ";var LOCALE_UK ="UK";var LOCALE_US ="US";var clicktospeak_icon = 1;var play_icon = 2;var search_icons = 28;var translation_icon = 4;var translate_icon = 4; var translator_icon = 4; var factfinder_icon = 8;var dictionary_icon = 16;var language_icons = 224;var spelling_icon = 32;var homophone_icon = 64;var prediction_icon = 128;var highlight_icons = 3840;var highlightcyan_icon = 256;var highlightmagenta_icon = 512;var highlightyellow_icon = 1024;var highlightgreen_icon = 2048;var collect_icon = 4096;var sticky_icon = 16384;var funplay_icon = 32768;var proncreate_icon = 65536;var createpron_icon = 65536; var pronCreate_icon = 65536; var pronedit_icon = 131072;var pronEdit_icon = 131072; var editpron_icon = 131072; var selectspeed_icon = 262144;var selectSpeed_icon = 262144; var pause_icon = 524288;var mp3_icon = 1048576;var calculator_icon = 2097152;var generatecache_icon = 4194304;var checkcache_icon = 8388608;var picturedictionary_icon = 16777216;var imagedictionary_icon = 16777216;var vocabulary_icon = 33554432;var strike_icon = 67108864;var record_icon = 134217728;var screenmask_icon = 268435456;var stop_icon = 536870912;var fullbrowsealoud_icons = 7967;var standardbrowsealoud_icons = 31;var minbrowsealoud_icons = 1;var submit_icon = 8192;var no_bar = 0;var main_icons = 7967;var standard_icons = 31;var min_icons = 1;var title_rw = 0;var title_ba = 1;var title_ebooks = 2;var title_th = 3;var title_portal = 4;SpeechStream.EnumPlacement ={ LEFT:1, RIGHT:2};if (!Array.prototype.indexOf){ Array.prototype.indexOf = function(elt) { var Lwa = this.length; var from = Number(arguments[1]) || 0; from = (from < 0) ? Math.ceil(from) : Math.floor(from); if (from < 0) { from += Lwa; } for (; from < Lwa; from++) { if (from in this && this[from] === elt) { return from; } } return -1; };}String.prototype.trimTH = function(){ return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"");};String.prototype.trimStartTH = function(){ return this.replace(/^[\s\xA0]+/,"");};String.prototype.trimEndTH = function(){ return this.replace(/[\s\xA0]+$/,"");};String.prototype.equalsTH = function(s){ if (this.length != s.length) { return false; } for (var i = 0; i < this.length; i += 1) { if (this.charAt(i) != s.charAt(i)) { return false; } } return true;};String.prototype.trimSpaceTH = function(){ return this.replace(/^[\t\r\n ]+/,"").replace(/[\t\r\n ]+$/,"");};String.prototype.trimSpaceStartTH = function(){ return this.replace(/^[\t\r\n ]+/,"");};String.prototype.trimSpaceEndTH = function(){ return this.replace(/[\t\r\n ]+$/,"");};/* Copyright 2005-2008 Texthelp Systems Ltd
*/var Vca = true;var Wca = true;var Xca ="dtdType ls_teacherFlag FAST_SPEED DEFAULT_SPEED MEDIUM_SPEED SLOW_SPEED VERY_SLOW_SPEED pause_icon mp3_icon calculator_icon generatecache_icon checkcache_icon picturedictionary_icon test sentence";var ega;var Zca = false;var aca = null;var bca = false; var cca = false;var dca = false;var eba_actual_version ="195";var eca ="0";var fca ="195"; var gca ="166"; var hca = -1;var ica ="speechus.texthelp.com";var jca = fullbrowsealoud_icons;var kca = -1;var lca = 0;var mca = ica;var nca = ica;var oca = null; var pca = null;var qca = null;var rca = null;var sca = null;var tca = null;var uca = null;var vca ="SpeechStream"; var wca ="/SpeechStream/"; var xca ="ScanSoft Samantha_Full_22kHz";var yca = null; var zca = null; var Ada = null; var Bda = -1;var Cda ="rwonline"; var Dda ="rwonline";var Eda = 0; var Fda = false; var Gda ="US"; var Hda = 40; var Ida = -1; var Jda = false;var Kda = false; var Lda = false;var Mda = false;var Nda = false;var Oda = false;var Pda = false;var Qda = false;var Rda = null;var Sda = 1;var Tda = false;var Uda = false;var Vda = 3; var Wda = 10; var Xda = false;var Yda = false; var Zda = false; var ada ="*"; var bda ="*"; var cda ="*"; var dda ="*"; var eda = false; var fda = false; var gda = true; var hda ="portal.texthelp.com"; var ida = null; var jda = null; var kda =""; var lda = true;var mda = null;var nda = null;var oda = false;var pda = false;var qda = null;var rda = 10 * 1024;var sda = false;var tda = false;var uda = false;var vda = -1;var wda = -1;var xda = -1;var yda = -1;var zda = -1;var Aea = false;var Bea = false;var Cea = false;var Dea = false;var Eea = true;var Fea = null;var Gea = false;var Hea = false;var Iea = false;var Jea = false;var Kea = false;var Lea = false;var Mea = true;var Nea = true;var Oea = true;var Pea = null;var Qea = null;var Rea = false;var Sea = null;var Tea = null; var Uea = 0; var Vea = 0; var Wea = 0; var Xea = new Array(); var Yea = -1; var Zea = 0; var aea = 0; var bea = false;var cea = false;var dea = false;var eea = null;var fea = false;var gea = 0;var hea ="";function $rw_getAutoCacheMissingCount(){ return gea;};function $rw_getAutoCacheError(){ return hea ||"";};var iea = false;var dtdType; var kea = false;var lea = false;var g_icons = new Array();var mea = new Array();var nea = 0;var oea = 0;var pea = 300;var qea = { x:0,y:0 };var rea = { x:0,y:0 };var sea = null;var tea = false;var uea = 5;var vea = false;var wea = 0;var xea ="";var yea = 1.0;var zea = 0.01;var Afa = true;var Bfa = 8;var Cfa = 60;var Dfa = [0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00, 1.00,1.00,1.00,1.00];var Efa = [0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00, 0.20,0.20,0.20,0.20];var Ffa = [300, 300, 300, 300, 600, 250, 220, 660, 240, 300, 300, 100, 380, 380, 300, 300, 300];var Gfa = [40, 40, 40, 40, 40, 250, 40, 60, 256, 30, 30, 312, 227, 420, 338, 420];var Hfa = [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false];var $g_bMouseSpeech = false;var Ifa ="";var Jfa = false;var Kfa = false;var Lfa = navigator.appName =="\x4d\x69cros\x6fft\x20\x49nternet\x20Exp\x6corer";var Mfa = navigator.appVersion.indexOf("MSIE 6.") > -1;var Nfa = navigator.appVersion.indexOf("MSIE 7.") > -1;var Ofa = navigator.appVersion.indexOf("MSIE 8.") > -1;var Pfa = navigator.appVersion.indexOf("MSIE 9.") > -1;var Qfa = navigator.appVersion.indexOf("MSIE 10.") > -1;var Rfa = false; var Sfa = false;var Tfa = -1; var Ufa;var Vfa;var Yga = navigator.userAgent.toLowerCase();var Xfa = Yga.indexOf("\x63hro\x6de") > -1;var Yfa = Yga.indexOf("\x61pp\x6ceweb\x6b\x69t") > -1; var Zfa = (Yfa && !Xfa)?(Yga.indexOf("s\x61f\x61ri")==-1):false;var afa = Yga.indexOf("\x66irefox") > -1;if(!Lfa && !Xfa && !Yfa && !afa){ Rfa = Yga.indexOf("trident") > -1; if(Rfa) { Lfa = true; } else { afa = true; }}if(Lfa){ if(Mfa) { if (document.compatMode) { if (document.compatMode !="CSS1Compat") { Sfa = true; } } } else if(Nfa) { Ofa = true; if (document.compatMode) { if (document.compatMode !="CSS1Compat") { Sfa = true; } else { Jfa = true; } } if(document.documentMode) { Tfa = document.documentMode; } } else { Jfa = true; Tfa = document.documentMode; } if(Tfa >= 9) { Vfa = true; Ufa = false; } else { Vfa = false; Ufa = true; }}var bfa = (Yga.indexOf("ipad") > -1 || Yga.indexOf("ipod") > -1 || Yga.indexOf("iphone") > -1 || Yga.indexOf("android") > -1);var cfa = Yga.indexOf("ipad") > -1 || Yga.indexOf("ipod") > -1 || Yga.indexOf("iphone") > -1 ;var hfa = 0;if(cfa){ hfa = parseInt(Yga.substring(Yga.indexOf("cpu os ") + 7, Yga.indexOf("_"))); if(isNaN(hfa)) { hfa = 6; }}var efa = !(top === self) && cfa;if(efa){ yea = 2000;}var ffa = Yga.indexOf("android") > -1;var gfa;var hfa = 0;if(cfa){ hfa = parseInt(Yga.substring(Yga.indexOf("cpu os ") + 7, Yga.indexOf("_"))); if(isNaN(hfa)) { hfa = 6; }}function iOS6Workaround(){ if($rw_getTouchSelection) { $rw_getTouchSelection(); }}if(hfa >= 6 && efa){ setInterval("iOS6Workaround();", 100);}var jfa ="\x6c\x6fca\x6chost";var g_speakableTextAreaTarget = null;var g_nSpeakableTextAreaTimerId = 0;var mfa = 1;var nfa = false;var ofa = false;var pfa = false;var qfa = false;var rfa = new Array();var sfa = new Object();var tfa ="-:minus;+:plus;/:divided by;*:multiplied by;<:less than;>:greater than;=:equals;^:raised to the power of;<=:less than or equal to;>=:greater than or equal to;";var ufa = false;var vfa = false;var wfa = false;var xfa = false;var yfa ="mp3";var zfa = false;var Aga = null;var Bga = 20;var Cga = true;var Dga = false;var Ega ="texthelpswa"; var Fga = null;var Gga = null;var Hga = null;var Iga = null;var Jga = false;var Kga = false;var Lga = false;var Mga = null;var Nga = null;var Oga = null;var Pga = null;var Qga= false;var Rga = null;var Sga = true;var Tga = null;var eba_server_version;var eba_serverVersion; var eba_client_version;var eba_clientVersion; var eba_login_name; var eba_login_password; var eba_loginName; var eba_loginPassword; var eba_server; var eba_speech_server; var eba_speechServer; var eba_speech_server_backup;var eba_speechServerBackup; var eba_folder;var eba_client_folder;var eba_clientFolder; var eba_speech_stream_server_version = -1;var eba_voice; var eba_hover_flag; var eba_bubble_mode; var eba_bubble_freeze_on_shift_flag; var eba_voice_from_lang_flag; var eba_voice_language_map; var eba_speed_value; var eba_speedValue; var eba_speed_offset; var eba_volume_value; var eba_initial_speech_on; var eba_continuous_reading; var eba_play_start_point; var eba_speech_redirect_callback; var eba_speech_started_callback; var eba_rendering_speech_callback; var eba_speech_complete_callback; var eba_page_complete_callback; var eba_speak_selection_by_sentence; var eba_page_complete_after_selection; var eba_dont_extend_selection; var eba_translate_complete_callback; var eba_use_container; var eba_override_x; var eba_override_y; var eba_icons;var eba_no_display_icons; var eba_no_title; var eba_noTitleFlag;var eba_hidden_bar; var eba_speech_range_style; var eba_speech_word_style; var eba_allow_alerts_flag; var eba_alerts;var eba_language; var eba_locale; var eba_ignore_buttons;var eba_max_word_count;var eba_logo_url = null; var eba_inline_img; var eba_cache_buster; var eba_dictionary_server; var eba_custom_dictionary_url; var eba_alt_dictionary_url; var eba_picturedictionary_server; var eba_imagedictionary_server;var eba_translate_server; var eba_translation_server; var eba_translate_source; var eba_translate_target; var eba_translate_type; var eba_language_server;var eba_spelling_server;var eba_homophone_server;var eba_prediction_server;var eba_mp3_id; var eba_mp3_limit; var eba_mp3_callback; var eba_cust_id; var eba_custId; var eba_book_id; var eba_bookId; var eba_page_id; var eba_pageId; var eba_use_annotations;var eba_annotate_confirm_delete_note; var eba_annotate_persist_notes; var eba_annotate_persist_highlights; var eba_annotate_note_editor_id; var eba_annotate_highlight_editor_id; var eba_annotate_storage_url; var eba_annotate_note_storage_url; var eba_annotate_highlight_storage_url; var eba_annotate_note_reader_id; var eba_annotate_highlight_reader_id; var eba_annotate_highlight_store_text; var eba_speechCacheGenerateFlag;var eba_cache_building_mode;var eba_speechCacheFlag;var eba_speech_cache_flag;var eba_cache_mode; var eba_cache_live_generation;var eba_autoCachePage;var eba_cacheResult =""; var eba_cache_retry; var eba_cache_retry_timeout; var eba_cache_selection; var eba_cache_user_text; var eba_split_cache_path; var eba_autocache_generate;var eba_autocache_check;var eba_autocache_allspeeds;var eba_autocache_callback;var eba_autocache_no_alert;var eba_clientside_pronunciation; var eba_check_pronunciation_before_cache; var eba_skip_on_error; var eba_alter_browser_for_consistency;var eba_ssl_flag; var eba_ssl_speech; var eba_ssl_toolbar; var eba_search_speech_server; var eba_replace_speech_server; var eba_no_flash; var eba_handle_radio_checkbox_click; var eba_bypass_dom_check = false; var eba_limit_cookies; var eba_ignore_frames; var eba_math; var eba_maths; var eba_symbol_text; var eba_abbr_array = null; var eba_date_filter_mode;var eba_build_cache_for_external_use;var eba_use_html5;var eba_speech_file_type;var eba_use_vocab; var eba_use_vocabulary;var eba_vocabulary_server;var eba_vocabulary_limit;var eba_break_list;var eba_use_commands;var eba_tinymce;var eba_tinymce_id;var eba_swa;var eba_prediction_placement;var eba_prediction_placement_id;var eba_homophone_placement;var eba_homophone_placement_id;var eba_spelling_placement;var eba_spelling_placement_id;var eba_grammar_placement;var eba_grammar_placement_id;var eba_disable_speech; var eba_no_scroll;var eba_ignore_hidden;var eba_screen_mask_letterbox_depth = 40;var eba_screen_mask_opacity = 50;var $jq;var eba_apip; var eba_apip_data;var eba_apip_order;var eba_chrome_extension;var eba_local_file_path;var ls_teacherFlag = false; var eba_reading_age;if(typeof(SpeechStream) =="undefined"){ SpeechStream = {};}SpeechStream.DataTypes = {};SpeechStream.DataTypes.PageData = function(){ var self = this; var Vga ="~p~br~head~body~hr~div~h1~h2~h3~h4~h5~h6~blockquote~table~tbody~tr~td~th~"; var Wga ="~em~strong~b~i~u~tt~font~kbd~dfn~cite~sup~sub~a~embed~span~small~nobr~wbr~acronym~"+"abbr~code~s~chunk~th:pron~img~/th:pron~w~/w~lic/lic~break~silence~"; this.fja = Vga; this.gja = Wga; this.strHighlightTag ="span"; this.placeholder = document.body; this.isInBreakList = function(Mwb) { return self.fja.indexOf("~"+Mwb+"~") > -1; }; this.isInStyleList = function(Mwb) { return self.gja.indexOf("~"+Mwb+"~") > -1; };};SpeechStream.DataTypes.ControlData = function(){ this.bIgnoreSkipSection = false; this.bOnloadFinished = false; };SpeechStream.DataTypes.HighlightData = function(){ this.strSpeechRangeColours ="color:#000000; background:#FFFF00"; this.strSpeechWordColours ="color:#FFFFFF; background:#0000FF; border-radius: 1px;"; };SpeechStream.DataTypes.BrowserData = function(){ var OAc = navigator.appVersion; this.bIE = navigator.appName =="\x4dicroso\x66t\x20Int\x65rnet\x20Explorer"; this.bIE6 = OAc.indexOf("MSIE 6.") > -1; this.bIE7 = OAc.indexOf("MSIE 7.") > -1; this.bIE8 = OAc.indexOf("MSIE 8.") > -1; this.bIE9 = OAc.indexOf("MSIE 9.") > -1; this.bIE10 = OAc.indexOf("MSIE 10.") > -1; this.bIE11 = false; this.bIEBackCompat = false; this.nIEDocumentMode = -1; this.bIEOld = false; this.bIENew = false; this.dtdType =""; this.bXDTDType = false; this.bLooseType = false; if(this.bIE) { if(this.bIE6) { if(document.compatMode) { if(document.compatMode !="CSS1Compat") { this.bIEBackCompat = true; } } } else if(this.bIE7) { this.bIE8 = true; if (document.compatMode) { if(document.compatMode !="CSS1Compat") { this.bIEBackCompat = true; } else { this.bXDTDType = true; } } if(document.documentMode) { this.nIEDocumentMode = document.documentMode; } } else { this.bXDTDType = true; this.nIEDocumentMode = document.documentMode; } } if(this.bIE) { if(this.nIEDocumentMode >= 9) { this.bIENew = true; this.bIEOld = false; } else { this.bIENew = false; this.bIEOld = true; } } var Yga = navigator.userAgent.toLowerCase(); this.bChrome = Yga.indexOf("\x63hrome") > -1; this.bSafari = Yga.indexOf("\x61pplewe\x62kit") > -1; this.bWebkit = (this.bSafari && !this.bChrome)?(Yga.indexOf("s\x61fari")==-1):false; this.bFireFox = Yga.indexOf("\x66\x69ref\x6fx") > -1; if(!this.bIE && !this.bChrome && !this.bSafari && !this.bFireFox) { this.bIE11 = Yga.indexOf("trident"> -1); if(this.bIE11) { this.bIE = true; } else { this.bFireFox = true; } }};SpeechStream.DataTypes.BubbleData = function(){ this.bBubbleMode = false; this.bBubbleFreezeOnShiftFlag = true; this.bBubbleModeStartDisabled = false;};SpeechStream.DataTypes.Paths = function(){ var Zga ="strFileLoc strSwfLoc"; this.strFileLoc =""; this.strSwfLoc ="";};SpeechStream.Data = function(){ this.browser = new SpeechStream.DataTypes.BrowserData(); this.paths = new SpeechStream.DataTypes.Paths(); this.pageData = new SpeechStream.DataTypes.PageData(); this.controlData = new SpeechStream.DataTypes.ControlData(); this.highlightData = new SpeechStream.DataTypes.HighlightData(); this.bubbleData = new SpeechStream.DataTypes.BubbleData();};SpeechStream.data = new SpeechStream.Data();var aga = SpeechStream.data;function $rw_getVersion(){ return eba_actual_version;}function $rw_getRevision(){ return eca;}function $rw_setIconsToLoad(p_nIcons){ var bga = false; if((p_nIcons & clicktospeak_icon) == clicktospeak_icon) { if(!aga.bubbleData.bBubbleMode) { vda = nya('hover', gaa[iaa][Eda],fba[iaa],true); } bga = true; } if((p_nIcons & play_icon) == play_icon) { if(! (Nda && !Mda && !Oda) ) { if(!aga.bubbleData.bBubbleMode) { nya('play', gaa[jaa][Eda], fba[jaa],false); } bga = true; } } if((p_nIcons & pause_icon) == pause_icon) { nya('pause', gaa[kaa][Eda], fba[kaa],false); } var cga = false; if((p_nIcons & funplay_icon) == funplay_icon) { nya('funplay', gaa[jaa][Eda], fba[Mba],false); cga = true; bga = false; } if((p_nIcons & stop_icon) == stop_icon) { bga = true; } if(bga) { nya('stop', gaa[laa][Eda], fba[laa],false); } if(cga) { nya('funstop', gaa[laa][Eda], fba[Nba],false); } if((p_nIcons & translation_icon) == translation_icon) { nya('trans', gaa[maa][Eda], fba[maa],false); } if((p_nIcons & factfinder_icon) == factfinder_icon) { nya('ffinder', gaa[naa][Eda], fba[naa],false); } if((p_nIcons & dictionary_icon) == dictionary_icon) { nya('dictionary', gaa[oaa][Eda], fba[oaa],false); } if((p_nIcons & picturedictionary_icon) == picturedictionary_icon) { nya('picturedictionary', gaa[Aba][Eda], fba[Aba],false); } if((p_nIcons & spelling_icon) == spelling_icon) { xda = nya('spell', gaa[Bba][Eda],fba[Bba],true); } if((p_nIcons & homophone_icon) == homophone_icon) { yda = nya('homophone', gaa[Cba][Eda],fba[Cba],true); } if((p_nIcons & prediction_icon) == prediction_icon) { zda = nya('pred', gaa[Dba][Eda],fba[Dba],true); } var dga = false; if((p_nIcons & highlightcyan_icon) == highlightcyan_icon) { nya('cyan', gaa[paa][Eda], fba[paa], false); dga = true; } if((p_nIcons & highlightmagenta_icon) == highlightmagenta_icon) { nya('magenta', gaa[qaa][Eda], fba[qaa], false); dga = true; } if((p_nIcons & highlightyellow_icon) == highlightyellow_icon) { nya('yellow', gaa[raa][Eda],fba[raa], false); dga = true; } if((p_nIcons & highlightgreen_icon) == highlightgreen_icon) { nya('green', gaa[saa][Eda],fba[saa], false); dga = true; } if((p_nIcons & strike_icon) == strike_icon) { nya('strike', gaa[Jba][Eda], fba[Jba], false); dga = true; } if(dga) { nya('clear', gaa[taa][Eda], fba[taa],false); } if((p_nIcons & collect_icon) == collect_icon) { nya('collect', gaa[uaa][Eda],fba[uaa] ,false); } if((p_nIcons & vocabulary_icon) == vocabulary_icon) { nya('vocabulary', gaa[Iba][Eda], fba[Iba],false); } if((p_nIcons & mp3_icon) == mp3_icon) { nya('mp3', gaa[waa][Eda],fba[waa] ,false); } if((p_nIcons & calculator_icon) == calculator_icon) { nya('calculator', gaa[xaa][Eda],fba[xaa] ,false); } if((p_nIcons & record_icon) == record_icon) { nya('recorder', gaa[Kba][Eda],fba[Kba] ,false); } if((p_nIcons & generatecache_icon) == generatecache_icon) { nya('generate_cache', gaa[yaa][Eda], fba[yaa],false); } if((p_nIcons & checkcache_icon) == checkcache_icon) { nya('check_cache', gaa[zaa][Eda],fba[zaa] ,false); } if((p_nIcons & submit_icon) == submit_icon) { nya('submit', gaa[Eba][Eda], fba[Eba],false); } if((p_nIcons & sticky_icon) == sticky_icon) { wda = nya('sticky', gaa[Fba][Eda],fba[Fba] ,true); } if(yca != null && zca != null && Ada != null) { if((p_nIcons & pronCreate_icon) == pronCreate_icon) { nya('pronCreate', gaa[Gba][Eda],fba[Gba] ,false); } if((p_nIcons & pronEdit_icon ) == pronEdit_icon ) { nya('pronEdit', gaa[Hba][Eda],fba[Hba] ,false); } } if((p_nIcons & screenmask_icon) == screenmask_icon) { nya('screenmask', gaa[Lba][Eda], fba[Lba], false); }}var ega = 0;function $rw_setVoice(Mwb){ if(typeof(Mwb) =="string") { if(Mwb != null && Mwb.length > 0 && Mwb != xca) { eba_voice = Mwb; xca = Mwb; try { var tga = dab.getConnector(); if(tga != null) { tga.setVoiceName(xca); } } catch(err) { thLogE(err); } } }}function $rw_setVoiceForLanguage(Mwb, p_languageCode){ var ZJb; if(typeof(p_languageCode) =="string") { ZJb = iga(p_languageCode); if(ZJb == -1) { try { ZJb = parseInt(p_languageCode, 10); } catch(err) { thLogE(err); return; } } } else if(typeof(p_languageCode) =="number") { ZJb = p_languageCode; } else { return; } if(typeof(Mwb) =="string"&& Mwb != null && Mwb.length > 0 && ZJb >= 0 && ZJb < faa.length) { faa[ZJb] = Mwb; }}function iga(jga){ var Ohb = jga.toLowerCase(); if(Ohb =="english"|| Ohb =="english_uk") { return ENG_UK; } else if(Ohb =="english_us") { return ENG_US; } else if(Ohb =="spanish") { return SPANISH; } else if(Ohb =="espanol") { return ESPANOL; } else if(Ohb.substr(0, 4) =="espa"&& Ohb == ("espa"+ String.fromCharCode(241) +"ol")) { return ESPANOL; } else if(Ohb =="french") { return FRENCH; } else if(Ohb.substr(0, 4) =="fran"&& Ohb == ("fran"+ String.fromCharCode(231) +"ais")) { return FRENCH; } else if(Ohb =="french_ca") { return FRENCH_CA; } else if(Ohb =="german") { return GERMAN; } else if(Ohb =="italian") { return ITALIAN; } else if(Ohb =="dutch") { return DUTCH; } else if(Ohb =="swedish") { return SWEDISH; } else if(Ohb =="australian") { return AUSTRALIAN; } else if(Ohb =="portuguese") { return PORTUGUESE; } else if(Ohb =="portugues") { return PORTUGUES; } else { return -1; }}function lga(Dgb){ try { var hja = Dgb.split("~"); var wzb = hja.length; var i; var Ohb; var BNb; for(i=0; i<wzb; i+=2) { BNb = hja[i]; Ohb = hja[i+1]; $rw_setVoiceForLanguage(BNb, Ohb); } } catch(e) {}}function $rw_setSpeedValue(p_nSpeedValue){ if(typeof(p_nSpeedValue) =="number") { if(p_nSpeedValue > -4 && p_nSpeedValue < 101 && p_nSpeedValue != Hda) { eba_speedValue = p_nSpeedValue; eba_speed_value = p_nSpeedValue; eba_reading_age = p_nSpeedValue; Hda = p_nSpeedValue; try { if(kea) { var tga = dab.getConnector(); if(tga != null) { tga.setSpeedValue(""+ Hda); } } } catch(err) { thLogE(err); } } } else if(typeof(p_nSpeedValue) =="string") { var zlb = p_nSpeedValue.toUpperCase(); if(zlb =="VERY_SLOW_SPEED") { $rw_setSpeedValue(VERY_SLOW_SPEED); } else if(zlb =="SLOW_SPEED") { $rw_setSpeedValue(SLOW_SPEED); } else if(zlb =="MEDIUM_SPEED") { $rw_setSpeedValue(MEDIUM_SPEED); } else if(zlb =="FAST_SPEED") { $rw_setSpeedValue(FAST_SPEED); } else { var Wub = parseInt(p_nSpeedValue, 10); $rw_setSpeedValue(Wub); } }}function $rw_setVolumeValue(p_nVolumeValue){ if(typeof(p_nVolumeValue) =="number") { if(p_nVolumeValue >= -1 && p_nVolumeValue <= 100 && p_nVolumeValue != Ida) { eba_volume_value = p_nVolumeValue; Ida = p_nVolumeValue; try { if(kea) { var tga = dab.getConnector(); if(tga != null) { tga.setVolumeValue(""+ Ida); } } } catch(err) { thLogE(err); } } }}function $rw_setBarVisibility(hKb){ if(typeof(hKb) =="\x62\x6folean") { var uga = document.getElementById("r\x77Drag"); if(hKb) { uga.style.visibility ="\x76is\x69ble"; uga.style.display ="\x69nline"; } else { uga.style.visibility ="\x68idden"; uga.style.display ="n\x6fne"; } Kda = !hKb; IKb(); }}function $rw_enableClickToSpeak(p_bEnable){ if(p_bEnable && !$g_bMouseSpeech) { $rw_event_hover(null, vda); } else if(!p_bEnable && $g_bMouseSpeech) { $rw_event_hover(null, vda); if(vda > -1) { var Sta = wea; wea = 0; HIb("hover"+"", vda, true); wea = Sta; } }}function $rw_enableSpeachByBubbleMode(UEb){ var wga = false; if(typeof(SpeechStream.bubbleSpeech) =="undefinded"|| typeof(SpeechStream.bubbleSpeech.initSpeechBubble) =="undefinded") { aga.bubbleData.bBubbleModeStartDisabled = !UEb; return; } if(aga.controlData.bOnloadFinished) { aga.bubbleData.bBubbleMode = UEb; if(!aga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.hideStartBubble(); SpeechStream.bubbleSpeech.hideStopBubble(); $rw_stopSpeech(); } } else { aga.bubbleData.bBubbleModeStartDisabled = !UEb; }}function $rw_enableContinuousReading(UEb){ Eea = UEb; eba_continuous_reading = UEb; if(!Eea) { Fea = null; Mea = false; } else { if(typeof(eba_speak_selection_by_sentence) =="boolean") { Mea = eba_speak_selection_by_sentence; } else { Mea = true; } if($rw_isSpeaking() && sKb != null && Fea == null) { dIb(); iIb(sKb); } }}function $rw_getUserTarget(){ return Tga;}var xga ="The SpeechStream object will contain parameter objects in the future. It holds actionOnError cacheMode and pronunciation";SpeechStream.EnumActionOnError = {STOP:0,SKIP:1};SpeechStream.ActionOnError = function(){ this.action = SpeechStream.EnumActionOnError.STOP;};var yga = function(){ this.NONE = 0; this.CACHE_WITH_LIVE_SERVER = 1; this.CACHE_ONLY = 2; this.CACHE_BUILDING_MODE = 3; this.mode = this.NONE; this.getLiveServer = function() { if(this.mode == this.NONE) { return nca; } else if(this.mode == this.CACHE_ONLY) { return null; } else if(this.mode == this.CACHE_WITH_LIVE_SERVER) { return oca; } else if(this.mode == this.CACHE_BUILDING_MODE) { if(oca != null) { return oca; } else { return nca; } } }; this.useBackupForLiveRequests = function() { if(this.mode == this.NONE) { return false; } else if(this.mode == this.CACHE_ONLY) { return false; } else if(this.mode == this.CACHE_WITH_LIVE_SERVER) { return oca != null; } else if(this.mode == this.CACHE_BUILDING_MODE) { return oca != null; } }; this.setCacheMode = function(p_nMode) { try { var flash = dab.getConnector(); if(flash != null) { switch(p_nMode) { case this.NONE: this.mode = this.NONE; eba_cache_mode = false; eba_cache_building_mode = false; eba_cache_live_generation = false; Nda = false; Mda = false; Oda = false; flash.setCacheMode(false, false); break; case this.CACHE_WITH_LIVE_SERVER: this.mode = this.CACHE_WITH_LIVE_SERVER; eba_cache_mode = true; eba_cache_building_mode = false; eba_cache_live_generation = true; Nda = true; Mda = false; Oda = true; flash.setCacheMode(true, true); break; case this.CACHE_ONLY: this.mode = this.CACHE_ONLY; eba_cache_mode = true; eba_cache_building_mode = false; eba_cache_live_generation = false; Nda = true; Mda = false; Oda = false; flash.setCacheMode(true, false); break; case this.CACHE_BUILDING_MODE: this.mode = this.CACHE_BUILDING_MODE; eba_cache_mode = false; eba_cache_building_mode = true; eba_cache_live_generation = false; Nda = false; Mda = true; Oda = false; flash.setCacheMode(true, true); break; default: Kya("Tried to set to an invalid mode, "+ p_nMode +" is not recognised."); } } } catch(err) { } };};SpeechStream.actionOnError = new SpeechStream.ActionOnError();SpeechStream.cacheMode = new yga();function $rw_stopSpeech(){ $rw_event_stop();}var Aha = 200;function $rw_speakFromId(id){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; if(Oga != null) { var IBc = document.getElementById(id); SSAPIP.apipHandler.checkElement(IBc, SSAPIP.apipHandler.Type.DEFAULT); return; } var target = Nha(id); if(target != null) { $rw_stopSpeech(); if(Mea) { var Zta; Zta = kta(target, false); Pea = null; if(Zta != null) { target = Zta; } } Tga = target; rw_speakHoverTarget(target); } else { var IBc = document.getElementById(id); if(IBc != null) { IBc = SSDOM.getNextTextNodeNoBlank(IBc, false, null); ega = 0; $rw_speakCurrentSentence(IBc, 0); } }}function $rw_speakById(id){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; if(Oga != null) { var IBc = document.getElementById(id); SSAPIP.apipHandler.checkElement(IBc, SSAPIP.apipHandler.Type.SINGLE_ITEM); return; } var target = Nha(id); if(target != null) { $rw_stopSpeech(); var Zta; if(Mea) { Zta = kta(target, false); if(Zta == null) { Pea = target; } } else { Zta = target; Zta.allowContinuous = false; } if(Zta != null) { target = Zta; rw_speakHoverTarget(target); } else { target.blockCache = !Tda; rw_speakHoverTarget(target); } Tga = target; }}function $rw_speakByIdFromFile(id, VMb){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; var target = Nha(id); if(target != null) { $rw_stopSpeech(); Tga = target; RMb(target, VMb); }}function $rw_speakByIdHighlightOnly(id){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; var target = Nha(id); if(target != null) { $rw_stopSpeech(); Tga = target; rw_speechHighlightOnly(target); }}function $rw_speakByIdWithSpeaker(id){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; var target = Nha(id); if(target != null) { $rw_stopSpeech(); Sea = id; Tga = target; rw_speakHoverTarget(target); } else { var IBc = document.getElementById(id); if(IBc != null && IBc.nodeType==1 && IBc.firstChild == null) { Sea = id; ega = 0; $rw_speakFromId(id); } }}function Nha(id){ var qfb = document.getElementById(id); if(qfb != null) { if(qfb.nodeType == 1 && qfb.tagName =="img"&& qfb.getAttribute("msg") == null) { return new THHoverTarget(qfb.ownerDocument.body, SSDOM.getPositionInDom(qfb), null); } var Oha = qfb.innerHTML; if(Oha.length > 0) { var pNb = SSDOM.getFirstChildTextNode(qfb, true); if(pNb == null || pNb.nodeType != 3) { if(pNb != null && pNb.nodeType == 1 && pNb.tagName =="img") { var attr = pNb.getAttribute("msg"); if(attr != null && attr.length > 0) { } else { return null; } } else { return null; } } var Usb = SSDOM.getLastChildTextNode(qfb, true); if(Usb == null || Usb.nodeType != 3) { if(Usb != null && Usb.nodeType == 1 && Usb.tagName =="img") { var attr = Usb.getAttribute("msg"); if(attr != null && attr.length > 0) { } else { return null; } } else { return null; } } var xnb = XTb(pNb, 0); var ynb = (Usb.nodeType == 3)? XTb(Usb, Usb.nodeValue.length) : XTb(Usb, 0); var Zbb = new THRange(qfb.ownerDocument.body, xnb, ynb); var target = new THHoverTarget(null, null, Zbb); return target; } } return null;}function $rw_setSentenceFromSelection(){ try { var unb = $rw_getTHCaretRangeFromSelection(); if(unb == null) { return; } var efb = SSDOM.getSentenceBreakToLeft(unb.efb); var ffb = SSDOM.getSentenceBreakToRight(unb.ffb); if(efb != null && ffb != null) { var Xha = new dqa(efb, ffb); var Zbb = RPb(Xha); if(Zbb != null) { Tga = new THHoverTarget(null, null, Zbb); } } } catch(err) { thLogE(err); }}function $rw_speakSentenceAtNode(dsb, zfb){ if(!dsb && (dsb.nodeType != 1 || dsb.nodeType != 3) ) { return; } $rw_speakCurrentSentence(dsb, zfb);}function $rw_speakCurrentSentence(dsb, zfb){ var dJb = (new Date).getTime(); var aha = (dJb - ega); if(aha < Aha ) { return; } ega = dJb; var Yia = mha(dsb, zfb); if(Yia != null) { if(Yia.equals(Tga)) { if(aha < Aha * 5) { return; } } $rw_stopSpeech(); Tga = Yia; rw_speakHoverTarget(Yia); }}function $rw_speakCurrentSentenceHighlightOnly(dsb, zfb){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; var Yia = mha(dsb, zfb); if(Yia != null) { $rw_stopSpeech(); Tga = Yia; rw_speechHighlightOnly(Yia); }}function fha(dsb, zfb){ var UAc; if(typeof(zfb) =="undefined") { UAc = new Xqa(dsb, 0, true); } else { UAc = new Xqa(dsb, zfb, true); } var efb = SSDOM.getSentenceBreakToLeft(UAc); var ffb = SSDOM.getSentenceBreakToRight(UAc); if(efb == null || ffb == null) { return null; } return new dqa(efb, ffb);}function mha(dsb, zfb){ var Zbb; var Yia; if(typeof(dsb) =="undefined"|| dsb == null) { if(Tga == null) { var unb = SSDOM.getFirstSentence(document.body); if(unb == null) { return null; } Zbb = RPb(unb); Yia = new THHoverTarget(null, null, Zbb); } else { Yia = Tga; } } else { if(dsb instanceof dqa) { Zbb = RPb(dsb); } else { var unb = fha(dsb, zfb); if(unb == null) { return null; } Zbb = RPb(unb); } Yia = new THHoverTarget(null, null, Zbb); } return Yia;}function $rw_getCurrentTarget(){ return Tga;}function $rw_setCurrentTarget(XMb){ Tga = XMb; if(typeof(XMb) =="undefined") { Tga = null; } else { Tga = XMb; }}function $rw_speakFirstSentence(dMb){ var Etb = null; if(dMb && dMb.nodeType) { Etb = dMb; } else { if( aca != null && aca !="") { try { Etb = vha(window, aca); } catch(e) { } } if(Etb == null) { Etb = document.body; } } if(!(Etb.nodeType == 3 && Sya(Etb.nodeValue))) { Etb = SSDOM.getNextTextNodeNoBlank(Etb, false, null); } $rw_speakCurrentSentence(Etb, 0);}function vha(wha, Mwb){ var IBc = wha.document.getElementById(Mwb); if(IBc != null) { return IBc; } var wzb = wha.length; for(var i=0; i<wzb; i++) { var Pdb = wha[i]; IBc = vha(Pdb, Mwb); if(IBc != null) { return IBc; } } return null;}function $rw_speakNextSentence(){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; if(Tga == null) { ega = 0; $rw_speakCurrentSentence(); return; } var Via = Tga.getCaretRange(); var vqa = mqa(Via.ffb.node); if(vqa.length > 0) { var Pia = null; for(var i=0; i<vqa.length; i++) { var cmd = vqa[i]; if(cmd.command == cmd.CMD_JUMP) { if(document.getElementById(cmd.NEb) != null) { Pia = cmd.NEb; } } } if(Pia != null) { $rw_stopSpeech(); ega = 0; $rw_speakFromId(Pia); return; } } var oIb = SSDOM.getNextSentence(Via); if(oIb == null) { return; } if(cMb(Via.efb.node, oIb.efb.node)) { return; } var Zbb = RPb(oIb); var Yia = new THHoverTarget(null, null, Zbb); $rw_stopSpeech(); Tga = Yia; rw_speakHoverTarget(Yia);}function $rw_speakNextSentenceHighlightOnly(){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; if(Tga == null) { ega = 0; $rw_speakCurrentSentenceHighlightOnly(); return; } var Via = Tga.getCaretRange(); var oIb = SSDOM.getNextSentence(Via); if(oIb == null) { return; } var Zbb = RPb(oIb); var Yia = new THHoverTarget(null, null, Zbb); $rw_stopSpeech(); Tga = Yia; rw_speechHighlightOnly(Yia);}function $rw_speakPreviousSentence(){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; if(Tga == null) { ega = 0; $rw_speakCurrentSentence(); return; } var Via = Tga.getCaretRange(); var vqa = mqa(Via.ffb.node); if(vqa.length > 0) { var Pia = null; for(var i=0; i<vqa.length; i++) { var cmd = vqa[i]; if(cmd.command == cmd.CMD_JUMPBACK) { if(document.getElementById(cmd.NEb) != null) { Pia = cmd.NEb; } } } if(Pia != null) { $rw_stopSpeech(); ega = 0; $rw_speakFromId(Pia); return; } } var Wia = SSDOM.getPreviousSentence(Via); if(Wia == null) { return; } if(cMb(Wia.ffb.node, Via.ffb.node)) { return; } var Zbb = RPb(Wia); var Yia = new THHoverTarget(null, null, Zbb); $rw_stopSpeech(); Tga = Yia; rw_speakHoverTarget(Yia);}function $rw_speakPreviousSentenceHighlightOnly(){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; if(Tga == null) { ega = 0; $rw_speakCurrentSentenceHighlightOnly(); return; } var Via = Tga.getCaretRange(); var Wia = SSDOM.getPreviousSentence(Via); if(Wia == null) { return; } var Zbb = RPb(Wia); var Yia = new THHoverTarget(null, null, Zbb); $rw_stopSpeech(); Tga = Yia; rw_speechHighlightOnly(Yia);}function $rw_getTHCaretRangeFromSelection(){ var uRb = sRb(); if(uRb != null && uRb.range instanceof THRange) { return pPb(uRb.range); } return null;}function $rw_isTextSelectedForPlay(){ if(kea) { try { if(g_speakableTextAreaTarget != null) { if($rw_isPaused()) { return true; } if(g_nSpeakableTextAreaTimerId != 0) { return false; } return true; } else { if($rw_isPaused()) { return true; } var Uta = sRb(); if(Uta != null && Uta.range != null) { var Zbb = Uta.range; if(Zbb instanceof String) { return true; } else { var target = new THHoverTarget(null, null, Zbb); var Dtb = target.getTextPreparedForSpeech(); if(Dtb != null && Dtb.length > 0) { return true; } } } } } catch(err) { thLogE(err); } } return false;}function $rw_getNumberOfHighlights(){ if(typeof(Ubb) !="undefined") { return Ubb.length; } else { return 0; }}function $rw_getHighlightText(index){ if(typeof(Ubb) !="undefined"&& index > -1 && index < Ubb.length) { if (Ufa) { return Ubb[index].text; } else { return Ubb[index].toString(); } } return"";}function $rw_getHighlightColor(index){ if(typeof(Vbb) !="undefined"&& index > -1 && index < Vbb.length) { return Vbb[index]; } return"";}function $rw_getHighlightColour(index){ return $rw_getHighlightColor(index);}function $rw_isPageLoaded(){ return (aga.controlData.bOnloadFinished && kea);}function $rw_highlightOnlyWTSFailed(){}function $rw_log(JOb){ Kya(JOb);}function $rw_setReadingAge(p_nAge){ if(typeof(p_nAge) =="string") { try { p_nAge = parseInt(p_nAge, 10); } catch(e) { thLogE(e); return; } } if(typeof(p_nAge) =="number") { switch(p_nAge) { case 1: case 2: case 3: case 4: $rw_setSpeedValue(READING_AGE_4); break; case 5: $rw_setSpeedValue(READING_AGE_5); break; case 6: $rw_setSpeedValue(READING_AGE_6); break; case 7: $rw_setSpeedValue(READING_AGE_7); break; case 8: $rw_setSpeedValue(READING_AGE_8); break; case 9: $rw_setSpeedValue(nba); break; case 10: $rw_setSpeedValue(READING_AGE_10); break; case 11: $rw_setSpeedValue(READING_AGE_11); break; case 12: $rw_setSpeedValue(READING_AGE_12); break; case 13: $rw_setSpeedValue(READING_AGE_13); break; case 14: $rw_setSpeedValue(READING_AGE_14); break; case 15: $rw_setSpeedValue(READING_AGE_15); break; case 16: $rw_setSpeedValue(READING_AGE_16); break; default: $rw_setSpeedValue(READING_AGE_10); } }}function $rw_getVoice(){ return eba_voice;}function $rw_getSpeed(){ return eba_speed_value;}function $rw_setCustomerId(p_strVal){ try { if(typeof(p_strVal) =="string") { var jia = vUb(p_strVal.trimTH()); if(yca != jia) { yca = jia; eba_cust_id = yca; var flash = dab.getConnector(); if(flash != null) { flash.setCustomerId(yca); } var IBc = document.getElementById("editPageMsg"); if(IBc != null) { IBc.innerHTML =""; } if(pfa ) { aWb.deleteAll(); dXb(); } mia(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setBookId(p_strVal){ try { if(typeof(p_strVal) =="string") { var jia = vUb(p_strVal.trimTH()); if(zca != jia) { zca =jia; eba_book_id = zca; var flash = dab.getConnector(); if(flash != null) { flash.setBookId(zca); } var IBc = document.getElementById("editPageMsg"); if(IBc != null) { IBc.innerHTML =""; } if(pfa ) { aWb.deleteAll(); dXb(); } mia(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setPageId(p_strVal){ try { if(typeof(p_strVal) =="string") { var jia = vUb(p_strVal.trimTH()); if(Ada != jia) { Ada = jia; eba_page_id = Ada; var flash = dab.getConnector(); if(flash != null) { flash.setPageId(Ada); } var IBc = document.getElementById("editPageMsg"); if(IBc != null) { IBc.innerHTML =""; } if(pfa ) { aWb.deleteAll(); dXb(); } mia(); } } } catch(ignore) { thLogE(ignore); }}function $rw_setSymbolText(Gwb){ if(Gwb != null && typeof(Gwb) =="string"&& Gwb.length > 0) { qfa = true; rfa = new Array(); sfa = new Object(); KUb(tfa); KUb(Gwb); }}function mia(){ if(Zda) { if(bda !="*"&& typeof(ggb) !="undefined") { var feb = Zda; Zda = false; Kdb(true); Zda = feb; } if(ada !="*"&& typeof(lkb) !="undefined") { yjb(); } if(bda !="*"&& typeof(ggb) !="undefined") { ggb(); } else { if(ada !="*"&& typeof(lkb) !="undefined") { lkb(); } } }}function oia(){ Xea = uia(); Uea = 0; Vea = 1; if(bea) { Sda = 1; $rw_setSpeedValue(SLOW_SPEED); } Tea = SSDOM.getFirstSentence(document.body); Uea = qia(Tea); Wea = Xea.length; Yea = -1; Eja(true);}function qia(ria){ var pJb = ria; var i = 0; while(pJb != null) { i++; pJb = SSDOM.getNextSentence(pJb); } i += Xea.length; if(bea) { return i * 3; } else { return i; }}function uia(){ var sia = new Array(); if(Gea) { return sia; } var tia = document.getElementsByTagName("img"); var wzb = tia.length; var i; for(i=0; i<wzb;i++) { var wia = tia[i]; if(wia.style.display =="none"&& Sga) { continue; } if(SSDOM.isIgnored(wia)) { continue; } if(wia.getAttribute("msg")!= null) { continue; } var TQb = wia.getAttribute("title"); if(TQb != null && TQb.length > 0) { if(TQb.trimTH().length > 0) { sia.push(wia); } } else { TQb = wia.getAttribute("alt"); if(TQb != null && TQb.length > 0) { if(TQb.trimTH().length > 0) { sia.push(wia); } } } } return sia;}function yia(dsb){ if(dsb == null) { return""; } var mnb = dsb.getAttribute("title"); if(mnb != null && mnb.length > 0) { return mnb; } else { var nnb = dsb.getAttribute("alt"); if(nnb != null && nnb.length > 0) { return nnb; } else { var onb = dsb.getAttribute("msg"); if(onb != null && onb.length > 0) { return onb; } } } return"";}function Eja(Fja){ var QBc =""; var Gja =""; var Hja = null; if(Tea == null) { var zvb = false; if(Yea < Wea ) { if(Yea > -1 && Yea < Xea.length) { var Jja = yia(Xea[Yea]); if(Jja.trimTH().length > 0) { if(Fda) { Hja = yIb(Xea[Yea]); } var KNb = new SpeechStream.SpeechRequest(); KNb.setString(Jja, SpeechStream.SpeechRequestBookmarks.OUTER); Gja = KNb.getText(); QBc = KNb.getFinalText(); zvb = true; } } } if(!zvb) { if(Fja) { $rw_autogenSpeechFilesCallback("Success"); } else { $rw_checkAutogenCachedFilesCallback("Success"); } return; } } else { var nOb = zMb(Tea, new Array()); Hja = nOb.voice; if(nOb.ABc != null) { Tea = nOb.ABc; Uea++; } QBc = nOb.Dtb; Gja = nOb.JMb; } var flash = dab.getConnector(); if(flash != null) { var uOb = GPb(); var Wua; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { Wua = GQb(QBc); } else { Wua = GQb(Gja); } if(Lga) { uOb = aua(uOb); Wua = dua(Wua); } if(Pda) { var APb = HPb(Wua); uOb = uOb +"/"+ APb; } if(Fja) { var Zua = jya(true) + SpeechStream.cacheMode.getLiveServer() +"/"; flash.autogenSpeechFiles(QBc, uOb, Wua, !ofa, Zua); } else { var Knb = uOb +"/"+ Wua; flash.checkAutogenCachedFiles(Knb); } }}function $rw_autogenSpeechFilesCallback(Wja){ if(Wja =='Success') { var Xja = false; if(bea ) { if(Sda == 1 || Sda == 2) { Sda++; } else { Sda = 1; Xja = true; } switch(Sda) { case 1: $rw_setSpeedValue(SLOW_SPEED); break; case 2: $rw_setSpeedValue(MEDIUM_SPEED); break; case 3: $rw_setSpeedValue(FAST_SPEED); break; } } else { Xja = true; } if(Xja) { Tea = SSDOM.getNextSentence(Tea, null); if(Tea != null) { Vea++; if(Uea >= Vea) { $rwj('#pb1').progressBar((Vea / Uea) * 100); if(Cga) { var target = new THHoverTarget(null,null, RPb(Tea)); zqa(target); } Eja(true); } else { $rwj.unblockUI(); hea ="Error: More sentences to be cached than counted in initial count at the start of this process!"; if(!fea) { alert(hea); } if(typeof(eea) =="string") { lwa(eea); } } } else { if(Wea > 0 && Yea < (Wea - 1)) { ++Vea; $rwj('#pb1').progressBar((Vea / Uea) * 100); ++Yea; Eja(true); } else { $rwj.unblockUI(); var Zua = jya(true) + SpeechStream.cacheMode.getLiveServer() +"/"; var flash = dab.getConnector(); flash.autoGenComplete(Zua); if(eea == null && !fea) { alert("Page Cached Successfully!"); } } } } else { Vea++; Eja(true); } } else { $rwj.unblockUI(); hea = Wja; if(!fea) { alert(Wja); } if(typeof(eea) =="string") { lwa(eea); } }}function Vja(){ Xea = uia(); Uea = 0; Vea = 1; Zea = 0; aea = 0; if(bea) { Sda = 1; $rw_setSpeedValue(SLOW_SPEED); } Tea = SSDOM.getFirstSentence(document.body); Uea = qia(Tea); Wea = Xea.length; Yea = -1; Eja(false);}function $rw_checkAutogenCachedFilesCallback(Wja){ if(Wja =='Success') { ++Zea; } else { ++aea; } var Xja = false; if(bea) { if(Sda == 1 || Sda == 2) { Sda++; } else { Sda = 1; Xja = true; } switch(Sda) { case 1: $rw_setSpeedValue(SLOW_SPEED); break; case 2: $rw_setSpeedValue(MEDIUM_SPEED); break; case 3: $rw_setSpeedValue(FAST_SPEED); break; } } else { Xja = true; } if(Xja) { Tea = SSDOM.getNextSentence(Tea, null); if(Tea != null) { Vea++; if(Uea >= Vea) { $rwj('#pb1').progressBar((Vea / Uea) * 100); Eja(false); } else { $rwj.unblockUI(); hea ="Error: More sentences to be cached than counted in initial count at the start of this process!"; if(!fea) { alert(hea); } if(typeof(eea) =="string") { lwa(eea); } } } else { if(Wea > 0 && Yea < (Wea-1)) { ++Vea; $rwj('#pb1').progressBar((Vea / Uea) * 100); ++Yea; Eja(false); } else { $rwj.unblockUI(); if(aea > 0) { hea ="Missing files!  Checked page and found that "+ aea +" sentences out of "+ Vea +" where not cached."; gea = aea; if(!fea) { alert(hea); } } if(typeof(eea) =="string") { lwa(eea); } else { if(aea == 0 && !fea) { alert("Checked page and found that all "+ Vea +" sentences were cached."); } } } } } else { Vea++; Eja(false); }}function $rw_autogenCompleteCallback(Wja){ if(Wja !="Success") { hea = Wja; if(!fea) { alert("Finished autogeneration process.  "+ Wja); } } if(typeof(eea) =="string") { lwa(eea); } }function $rw_setTranslateSource(Eab){ SpeechStream.translatorData.setSource(Eab);}function $rw_setTranslateTarget(p_strTarget){ SpeechStream.translatorData.setTarget(p_strTarget);}var Yja = null;var Zja = null;var aja = 0;function $rw_getTouchSelection(){ var adb; var cja; if (window.getSelection().rangeCount>0 && !window.getSelection().isCollapsed) { adb = window.getSelection().getRangeAt(0).cloneRange(); cja = window; } else { adb = null; cja = null; var Pdb = SSDOM.getFrameSelection(window); if(Pdb) { var qAc = Pdb.getSelection(); if (qAc.rangeCount>0 && !qAc.isCollapsed) { adb = qAc.getRangeAt(0).cloneRange(); cja = Pdb; } } } if(cfa && hfa >= 6 && efa && adb == null || cja == null) { ++aja; if(aja>=10) { Yja = adb; Zja = cja; aja = 0; } } else { Yja = adb; Zja = cja; aja = 0; }}function $rw_setBreakList(lAc){ var fja = aga.pageData.fja; var gja = aga.pageData.gja; var hja = lAc.split("~"); var i; for(i=0; i<hja.length; i++) { var Ovb = hja[i]; if(Ovb.length > 0) { if(Ovb.charAt(0) =="!") { Ovb = Ovb.substring(1); if(aga.pageData.isInBreakList(Ovb)) { var Ksb = fja.indexOf("~"+ Ovb +"~"); var Lsb = Ksb + 1 + Ovb.length; fja = fja.substring(0, Ksb) + fja.substring(Lsb); } if(!aga.pageData.isInStyleList(Ovb)) { gja += Ovb +"~"; } } else { if(aga.pageData.isInBreakList(Ovb)) { fja += Ovb +"~"; } if(aga.pageData.isInStyleList(Ovb)) { var Ksb = gja.indexOf("~"+ Ovb +"~"); var Lsb = Ksb + 1 + Ovb.length; gja = gja.substring(0, Ksb) + gja.substring(Lsb); } } } } aga.pageData.fja = fja; aga.pageData.gja = gja;}function $rw_parseNewSection(dsb){ try { if(dsb != null) { $rw_tagSentencesForDynamicSection(dsb); if(ada !="*"&& typeof(lkb) !="undefined") { if(gib != -1) { Zjb(gib); var Qlb = function(){$rw_parseNewSection(dsb);}; setTimeout(Qlb, 100); return; } yjb(); } if(typeof($rw_refreshHighlights) =="function"&& Zda) { if(Nfb == 1) { Nfb = 2; } $rw_refreshHighlights(); } else { if(typeof(lkb) =="function"&& Zda) { lkb(); } } } } catch(err) { Kya(err.message); }}var qCb ="[\\x21\\x2E\\x3F\\x3A]";var rCb = /[\n\r\t ]{2,}/g;function $rw_tagSentencesForDynamicSection(dsb){ if(dsb == null) { return; } try { var sCb = false; var hNb = SSDOM.getNextNodeAllowMoveToChild(dsb, false, dsb); while(hNb != null) { if(hNb.nodeType == 3) { var oQb = hNb.parentNode.tagName.toLowerCase(); if(oQb =="textarea") { hNb = SSDOM.getNextNode(hNb, false, dsb); continue; } var Dtb = hNb.nodeValue; var xCb = Dtb.trimSpaceTH(); var aDb = xCb.length > 0; if(pda && oQb =="a") { aDb = false; } if(!aDb) { if(Zda || Nda && (Bea || Yda || Lea) ) { if(sCb) { if(!pda) { hNb.nodeValue =" "; } sCb = false; hNb = SSDOM.getNextNode(hNb, false, dsb); } else { var OAc = hNb; hNb = SSDOM.getNextNode(hNb, false, dsb); if(!pda) { OAc.parentNode.removeChild(OAc); } } } else { hNb = SSDOM.getNextNode(hNb, false, dsb); } } else { if(!pda) { if(Zda || Nda && (Bea || Yda || Lea) ) { if(xCb.length < Dtb.length) { var ibb = false; xCb = Dtb.trimSpaceStartTH(); if((Dtb.length - xCb.length) > 0) { if(sCb) { Dtb =" "+ xCb; } else { Dtb = xCb; } ibb = true; } xCb = Dtb.trimSpaceEndTH(); if((Dtb.length - xCb.length) > 1) { Dtb = xCb +" "; sCb = false; ibb = true; } if(ibb) { hNb.nodeValue = Dtb; } } xCb = Dtb.replace(rCb," "); if(xCb.length < Dtb.length) { Dtb = xCb; ibb = true; } } } var hzb; hzb = Dtb.search(qCb); var CDb = (hNb.parentNode.getAttribute("texthelpSkip") != null); var DDb = hNb; if(hzb > -1 && hzb < (Dtb.length - 1)) { var EDb = true; while(true) { var Mgb = jDb(Dtb, hzb, hNb); if(Mgb) { break; } else { var GDb = Dtb.substring(hzb + 1); var Iob = GDb.search(qCb); if(Iob > -1) { hzb = hzb + 1 + Iob; } else { EDb =false; break; } } } if(EDb) { var IDb = Dtb.substring(0, hzb + 1); var JDb = Dtb.substring(hzb + 1); var span = document.createElement("span"); span.setAttribute(eaa,"1"); var SDb = document.createTextNode(IDb); var MDb = document.createTextNode(JDb); var TDb = hNb.parentNode; TDb.insertBefore(MDb, hNb); TDb.insertBefore(span, MDb); span.appendChild(SDb); TDb.removeChild(hNb); hNb = MDb; DDb = SDb; } else { if(hNb.previousSibling != null || hNb.nextSibling != null || CDb) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var SDb = document.createTextNode(Dtb); var TDb = hNb.parentNode; TDb.insertBefore(span, hNb); span.appendChild(SDb); TDb.removeChild(hNb); hNb = SDb; } DDb = hNb; hNb = SSDOM.getNextNode(hNb, false, null); } } else { if(hNb.previousSibling != null || hNb.nextSibling != null || CDb) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var SDb = document.createTextNode(Dtb); var TDb = hNb.parentNode; TDb.insertBefore(span, hNb); span.appendChild(SDb); TDb.removeChild(hNb); hNb = SDb; } DDb = hNb; hNb = SSDOM.getNextNode(hNb, false, null); } if(Zda || Nda && (Bea || Yda || Lea) ) { var UDb = DDb.nodeValue; var VDb = DDb.nodeValue.length; if(VDb > 0 && UDb.charCodeAt(VDb - 1) == 32) { sCb = false; } else { sCb = true; } } } } else if(hNb.nodeType == 1) { if(Zda) { if(!SSDOM.isStyleNode(hNb)) { if(SSDOM.isLineBreakNode(hNb)) { sCb = false; } } else if(hNb.tagName.toLowerCase() =="img") { sCb = true; } } if(Bea) { if(hNb.tagName.toLowerCase() =="img") { var TQb = hNb.getAttribute("title"); if(TQb != null && TQb.length > 0) { hNb.setAttribute("msg", TQb); } } } else if(Gea) { if(hNb.tagName.toLowerCase() =="img") { var TQb = hNb.getAttribute("msg"); if(!(TQb != null && TQb.length > 0)) { TQb = hNb.getAttribute("title"); if(TQb != null && TQb.length > 0) { hNb.setAttribute("msg", TQb); } else { TQb = hNb.getAttribute("alt"); if(TQb != null && TQb.length > 0) { hNb.setAttribute("msg", TQb); } } } } } var eDb = hNb.getAttribute(caa); var fDb = hNb.getAttribute(baa); if(hNb.tagName.toLowerCase() =="pre"|| (eDb != null && eDb.length > 0) || (fDb != null && fDb.length > 0)) { hNb = SSDOM.getNextNodeIgnoreChildren(hNb, false, dsb); } else { hNb = SSDOM.getNextNode(hNb, false, dsb); } } else { hNb = SSDOM.getNextNode(hNb, false, dsb); } } if(Zda) { hNb = SSDOM.getNextNodeAllowMoveToChild(dsb, false, dsb); while(hNb != null) { if(hNb.nodeType==3) { var aDb = hNb.nodeValue.trimTH().length > 0; if(aDb) { var bDb = hNb.parentNode; var dDb = bDb.getAttribute("rwthgen"); while((dDb != null && dDb.length > 0)) { bDb = bDb.parentNode; dDb = bDb.getAttribute("rwthgen"); } var cDb = bDb.getAttribute("id"); if(cDb != null && cDb.substr(0,14) =="rwTHnoteMarker") { var Ukb = cDb; bDb.id =""; cDb = null; if(bDb.nextSibling == null && bDb.previousSibling == null && (bDb.parentNode.id==null||bDb.parentNode.id=="") ) { bDb.parentNode.id = Ukb; } else { var YBb = bDb.ownerDocument.createElement("span"); bDb.id = Ukb; while(bDb.firstChild != null) { YBb.appendChild(bDb.firstChild); } bDb.appendChild(YBb); bDb = YBb; } } if(cDb == null || cDb.length == 0 ) { var oyb = nka(hNb); if(oyb != null) { bDb.id = oyb; } } } hNb = SSDOM.getNextNode(hNb, false, dsb); } else if(hNb.nodeType == 1) { if(Jjb(hNb)) { if(hNb.tagName.toLocaleLowerCase() =="img") { var dDb = hNb.getAttribute("id"); if(dDb != null && dDb.substr(0,14) =="rwTHnoteMarker") { var Ukb = dDb; hNb.id =""; dDb = null; if(hNb.nextSibling == null && hNb.previousSibling == null && (hNb.parentNode.id==null||hNb.parentNode.id=="") ) { hNb.parentNode.id = Ukb; } else { var YBb = hNb.ownerDocument.createElement("span"); YBb.id = Ukb; hNb.parentNode.insertBefore(YBb, hNb); YBb.appendChild(hNb); } } if(dDb == null || dDb.length == 0) { var oyb = rka(hNb); if(oyb != null) { hNb.id = oyb; } } } } var eDb = hNb.getAttribute(caa); var fDb = hNb.getAttribute(baa); if( hNb.tagName.toLowerCase() =="pre"|| (eDb != null && eDb.length > 0) || (fDb != null && fDb.length > 0)) { hNb = SSDOM.getNextNodeIgnoreChildren(hNb, false, dsb); } else { hNb = SSDOM.getNextNode(hNb, false, dsb); } } else { hNb = SSDOM.getNextNode(hNb, false, dsb); } } } } catch(exception) { Kya("Error in $rw_tagSentences: "+ exception); } Aea = true;}function nka(dsb){ if(dsb != null && dsb.nodeType == 3) { var lub = dsb.ownerDocument; var Lob = lub.body; var Dtb = dsb.nodeValue; if(Dtb != null) { Dtb = Dtb.replace(/\s+/g,""); var HHb = dsb.parentNode; while(HHb != null && HHb.parentNode != null) { HHb = HHb.parentNode; if(HHb.id != null&&HHb.id.length>0) { if(HHb.id.substr(0, 4) !="rwTH") { Dtb = HHb.id + Dtb; break; } } if(HHb == Lob) { break; } } var oyb ="rwTH"+ NOb(Dtb); if(lub.getElementById(oyb) != null) { var n = 1; while(lub.getElementById(oyb + n) != null) { ++n; } oyb = oyb + n; } return oyb; } } return null;}function rka(dsb){ if(dsb != null && dsb.nodeType == 1 && dsb.tagName.toLocaleLowerCase() =="img") { var lub = dsb.ownerDocument; var Lob = lub.body; var Dtb = dsb.src; if(Dtb != null) { Dtb = Dtb.replace(/\s+/g,""); var HHb = dsb; while(HHb != null && HHb.parentNode != null) { HHb = HHb.parentNode; if(HHb.id != null&&HHb.id.length>0) { if(HHb.id.substr(0, 4) !="rwTH") { Dtb = HHb.id + Dtb; break; } } if(HHb == Lob) { break; } } var oyb ="rwTH"+ NOb(Dtb); if(lub.getElementById(oyb) != null) { var n = 1; while(lub.getElementById(oyb + n) != null) { ++n; } oyb = oyb + n; } return oyb; } } return null;}if(typeof(SpeechStream) =="undefined"){ SpeechStream = {};}SpeechStream.annotateBlock = {};SpeechStream.annotateBlock.m_bUseAnnotations = true;SpeechStream.annotateBlock.setUseAnnotations = function(p_bUse){ SpeechStream.annotateBlock.m_bUseAnnotations = p_bUse;};SpeechStream.annotateBlock.getUseAnnotations = function(){ return SpeechStream.annotateBlock.m_bUseAnnotations;};function $rw_isCustId(p_id){ if(p_id==1600) { return Yda; } else { return false; }}function $rw_disableSpeech(){ if(!Kga) { try { var NEb = SpeechStream.EnumIconParameter; for (var i = 0; i < nea; i++) { var knb = g_icons[i][NEb.ICON_NAME]; if (LEb.indexOf(knb) > -1) { eza(g_icons[i][NEb.ICON_NAME],"mask", g_icons[i][NEb.ICON_OFFSET], false); } } } catch(err) { thLogE(err); } } Kga = true; $rw_divPress(Rba); $rw_divPress(Pba); $rw_divPress(Zba);}function $rw_enableSpeech(){ if(Kga) { try { var NEb = SpeechStream.EnumIconParameter; for (var i = 0; i < nea; i++) { var knb = g_icons[i][NEb.ICON_NAME]; if (LEb.indexOf(knb) > -1) { eza(g_icons[i][NEb.ICON_NAME],"flat", g_icons[i][NEb.ICON_OFFSET], false); } } } catch(err) { thLogE(err); } } Kga = false; $rw_divPress(Rba); $rw_divPress(Pba); $rw_divPress(Zba);}function $rw_setApipFolder(bua){ Mga = bua;}function $rw_setApipFile(eua){ Nga = eua;}if(typeof(SpeechStream) =="undefined"){ SpeechStream = {};}SpeechStream.Dom = function(p_dat){ var self = this; this.bIE = false; this.bIEOld = false; if(typeof(p_dat) !="undefined") { self.bIE = p_dat.browser.bIE; self.bIEOld = p_dat.browser.bIEOld; } else { try { window.console.log("Data not available when setting up the SpeechStream.Dom"); } catch(err) { } }};SpeechStream.dom = new SpeechStream.Dom(aga);var SSDOM = SpeechStream.dom;SSDOM.toString = function(){ return"Singleton instance to control DOM requests.";};SSDOM.alert = function(){ alert("testing SSDOM "+ SSDOM.toString());};SSDOM.getPreviousNode = function(dsb, p_bGoByStyle, kSb){ if(dsb == null || dsb == kSb) { return null; } var fTb = dsb; if (fTb.previousSibling != null) { fTb = fTb.previousSibling; if(p_bGoByStyle) { if(!SSDOM.isStyleNode(fTb)) { return null; } } if(fTb != null && SSDOM.isInvalidNode(fTb)) { if(kSb == fTb) { return null; } fTb = SSDOM.getPreviousNode(fTb, p_bGoByStyle, kSb); } else { while(fTb != null && fTb.lastChild != null) { if(fTb.nodeType == 1 && fTb.tagName.toLowerCase() =="math") { break; } if(fTb.nodeType == 1 && fTb.isMathJax) { break; } fTb = fTb.lastChild; if(p_bGoByStyle) { if(!SSDOM.isStyleNode(fTb)) { fTb = null; } } if(fTb != null && SSDOM.isInvalidNode(fTb)) { if(kSb == fTb) { return null; } fTb = SSDOM.getPreviousNode(fTb, p_bGoByStyle, kSb); break; } } } } else { fTb = fTb.parentNode; if(p_bGoByStyle && fTb != null) { if(!SSDOM.isStyleNode(fTb)) { fTb = null; } } } return fTb;};SSDOM.getNextNodeImpl = function(dsb, p_bGoByStyle, kSb, p_bDeferEndNodeCheck, p_bAlwaysIgnoreChild){ if(dsb == null || (dsb == kSb && !p_bDeferEndNodeCheck)) { return null; } var Kla = SSDOM.isInvalidNode(dsb); if(dsb.nodeType == 1 && dsb.tagName.toLowerCase() =="math") { Kla = true; } if(dsb.nodeType == 1 && dsb.isMathJax) { Kla = true; } var YNb = null; if(dsb == kSb && p_bDeferEndNodeCheck) { if(!Kla && dsb.firstChild != null) { YNb = dsb.firstChild; } else { return null; } } else { YNb = dsb; if(YNb.firstChild != null && !Kla && !p_bAlwaysIgnoreChild) { YNb = YNb.firstChild; } else if(YNb.nextSibling != null) { YNb = YNb.nextSibling; } else { while (YNb != null && YNb.nextSibling == null) { YNb = YNb.parentNode; if(p_bGoByStyle) { if(!SSDOM.isStyleNode(YNb)) { YNb = null; } } if(kSb == YNb) { break; } } if (YNb != null && kSb != YNb) { YNb = YNb.nextSibling; } } } if(YNb != null) { if(p_bGoByStyle) { if(!SSDOM.isStyleNode(YNb)) { YNb = null; } } } if(YNb != null && SSDOM.isInvalidNode(YNb)) { YNb = SSDOM.getNextNodeImpl(YNb, p_bGoByStyle, kSb, false, p_bAlwaysIgnoreChild); if(p_bDeferEndNodeCheck && YNb == kSb && dsb == kSb) { YNb = null; } } return YNb;};SSDOM.getNextNode = function(dsb, p_bGoByStyle, kSb){ return SSDOM.getNextNodeImpl(dsb, p_bGoByStyle, kSb, false, false);};SSDOM.getNextNodeAllowMoveToChild = function(dsb, p_bGoByStyle, kSb){ return SSDOM.getNextNodeImpl(dsb, p_bGoByStyle, kSb, true, false);};SSDOM.getPreviousNodeIgnoreChildren = function(dsb, p_bGoByStyle, kSb){ if(dsb == null || dsb == kSb) { return null; } var fTb = dsb; if (fTb.previousSibling != null) { fTb = fTb.previousSibling; if(p_bGoByStyle) { if(!SSDOM.isStyleNode(fTb)) { fTb = null; } } if(fTb != null && SSDOM.isInvalidNode(fTb)) { if(kSb == fTb) { fTb = null; } else { fTb = SSDOM.getPreviousNodeIgnoreChildren(fTb, p_bGoByStyle, kSb); } } } else { fTb = fTb.parentNode; if(p_bGoByStyle && fTb != null) { if(!SSDOM.isStyleNode(fTb)) { fTb = null; } } } return fTb;};SSDOM.getNextNodeIgnoreChildren = function(dsb, p_bGoByStyle, kSb){ return SSDOM.getNextNodeImpl(dsb, p_bGoByStyle, kSb, false, true);};SSDOM.getFirstChildTextNode = function(dsb, p_bAllowImg){ if(dsb == null) { return null; } if(dsb.firstChild == null || SSDOM.isInvalidNode(dsb)) { return dsb; } if(dsb.nodeType == 1 && dsb.tagName.toLowerCase() =="textarea") { return dsb; } if(dsb.nodeType == 1 && dsb.tagName.toLowerCase() =="math") { return dsb; } if(dsb.nodeType == 1 && dsb.isMathJax) { return dsb; } var Yub = dsb.firstChild; if(Yub.nodeType == 3) { return Yub; } else if(Yub.nodeType == 1 && p_bAllowImg && Yub.tagName.toLowerCase() =="img"&& Yub.getAttribute("msg") != null && Yub.getAttribute("msg").length > 0) { return Yub; } else { if(p_bAllowImg) { return SSDOM.getNextTextNode(Yub, false, dsb); } else { return SSDOM.getNextTextNodeNoImg(Yub, false, dsb, true); } }};SSDOM.getLastChildTextNode = function(dsb, p_bAllowImg){ if(dsb == null) { return null; } if(dsb.lastChild == null || SSDOM.isInvalidNode(dsb)) { return dsb; } if(dsb.nodeType == 1 && dsb.tagName.toLowerCase() =="textarea") { return dsb; } if(dsb.nodeType == 1 && dsb.tagName.toLowerCase() =="math") { return dsb; } if(dsb.nodeType == 1 && dsb.isMathJax) { return dsb; } var Yub = dsb.lastChild; while(Yub != null) { if(Yub.nodeType == 3) { return Yub; } else if(Yub.nodeType == 1 && p_bAllowImg && Yub.tagName.toLowerCase() =="img"&& Yub.getAttribute("msg") != null && Yub.getAttribute("msg").length > 0) { return Yub; } else if(SSDOM.isInvalidNode(Yub) || Yub.lastChild == null) { var Ijb; if(p_bAllowImg) { Ijb = SSDOM.getPreviousTextNode(Yub, false, dsb); } else { Ijb = SSDOM.getPreviousTextNodeNoImg(Yub, false, dsb, true); } return Ijb; } else { Yub = Yub.lastChild; } } return dsb;};SSDOM.getNextNodeIEBugFix = function(SVb){ var Kla = SSDOM.isInvalidNode(SVb); var YNb = SVb; if (YNb.firstChild != null && !Kla) { YNb = YNb.firstChild; } else if(YNb.nextSibling != null) { var hNb = YNb; YNb = YNb.nextSibling; var Yub = YNb; var Lob = Yub.ownerDocument.body; while(Yub != null && Yub != Lob) { if(Yub == hNb) { throw"DOM Error"; } Yub = Yub.parentNode; } } else { while (YNb != null && YNb.nextSibling == null) { YNb = YNb.parentNode; } if (YNb != null) { var hNb = YNb; YNb = YNb.nextSibling; var Yub = YNb; var Lob = Yub.ownerDocument.body; while(Yub != null && Yub != Lob) { if(Yub == hNb) { throw"DOM Error"; } Yub = Yub.parentNode; } } } if(YNb != null && SSDOM.isInvalidNode(YNb)) { YNb = SSDOM.getNextNodeIEBugFix(YNb); } return YNb;};SSDOM.getSentenceBreakToLeft = function(mib, kSb){ if(typeof(kSb) =="undefined") { kSb = null; } if(mib == null || mib.node == null) { return null; } var node = mib.node; var Tyb = mib.offset; if(mib.node.nodeType == 1 && mib.node.tagName.toLowerCase() =="math") { return mib; } if(mib.node.nodeType == 1 && mib.node.isMathJax) { return mib; } if(mib.forwardBias) { if(node.nodeType == 3 && Tyb == node.nodeValue.length) { node = SSDOM.getNextTextNode(node, true, kSb); Tyb = 0; if(node == null) { node = mib.node; Tyb = mib.offset; } } } else { if(Tyb > 0) { --Tyb; } else { node = SSDOM.getPreviousTextNode(node, true, kSb); if(node == null) { return mib; } if(node.nodeType == 3) { Tyb = node.nodeValue.length - 1; } else { Tyb = 0; if(node.tagName.toLowerCase() =="math") { return mib; } if(node.isMathJax) { return mib; } } } } if(node.nodeType == 3) { var yib = node.nodeValue.charAt(Tyb); if(yib =='.'|| yib =='!'|| yib =='?'|| yib ==':') { if(Tyb > 0) { --Tyb; } else { node = SSDOM.getPreviousTextNode(node, true, kSb); if(node == null) { return mib; } if(node.nodeType == 3) { Tyb = node.nodeValue.length - 1; } else { Tyb = 0; if(node.tagName.toLowerCase() =="math") { return mib; } if(node.isMathJax) { return mib; } } } } } var fla = node; var gla = Tyb; var fTb = node; var aNb = Tyb; var HVb = false; var ila =' '; while(!HVb) { if(fTb.nodeType == 3) { var Dtb = fTb.nodeValue; if(Dtb.length > 0) { if(aNb == -1) { aNb = Dtb.length; } Dtb = Dtb.replace(/[\x21\x3f\x3a]/g,"."); var hzb = Dtb.lastIndexOf(".", aNb); while(hzb > -1) { if(jDb(Dtb, hzb, fTb)) { if(hzb < Dtb.length - 1) { fla = fTb; gla = hzb + 1; HVb = true; break; } else { if(!hxa(ila)) { HVb = true; break; } } } if(hzb == 0) { hzb = -1; } else { hzb = Dtb.lastIndexOf(".", hzb - 1); } } if(HVb) { break; } if(Dtb.trimTH().length > 0) { fla = fTb; gla = 0; } ila = Dtb.charAt(0); } } else { if(SSDOM.isSpecialCase(fTb) && fTb.getAttribute("ignore") == null) { if(fTb.tagName.toLowerCase() =="math") { HVb = true; break; } if(fTb.isMathJax) { HVb = true; break; } fla = fTb; gla = 0; } } fTb = SSDOM.getPreviousNode(fTb, true, kSb); aNb = -1; if(fTb == null) { HVb = true; break; } if(fTb.nodeType == 3 && SSDOM.checkForSpecialParent(fTb) != null) { fTb = SSDOM.checkForSpecialParent(fTb); if(fTb == null) { HVb = true; break; } } } if(fla.nodeType == 3) { var Dtb = fla.nodeValue; if(gla < Dtb.length) { while(gla < Dtb.length) { if(Fya(Dtb.charAt(gla))) { ++gla; } else { break; } } } } return new Xqa(fla, gla, true);};SSDOM.getSentenceBreakToRight = function(mib, kSb){ if(typeof(kSb) =="undefined") { kSb = null; } if(mib == null || mib.node == null) { return null; } var YNb = mib.node; var bNb = mib.offset; var fla = YNb; var gla = bNb; var HVb = false; var ila =' '; while(!HVb) { if(YNb.nodeType == 3) { var Dtb = YNb.nodeValue; if(Dtb.length > 0) { if(ila =='.') { var kla = Dtb.charAt(bNb); if(!hxa(kla)) { HVb = true; break; } } Dtb = Dtb.replace(/[\x21\x3f\x3a]/g,"."); var hzb = Dtb.indexOf(".", bNb); while(hzb > -1) { if(jDb(Dtb, hzb, YNb)) { if(hzb < Dtb.length - 1) { fla = YNb; gla = hzb + 1; HVb = true; } break; } bNb = hzb + 1; hzb = Dtb.indexOf(".", bNb); } if(HVb) { break; } if(Dtb.trimTH().length > 0) { fla = YNb; gla = Dtb.length; } ila = Dtb.charAt(Dtb.length -1); if(ila =='.') { if(!jDb(Dtb, Dtb.length -1, YNb)) { ila =' '; } } } YNb = SSDOM.getNextNode(YNb, true, kSb); } else { if(SSDOM.isSpecialCase(YNb) && YNb.getAttribute("ignore") == null) { if(YNb.tagName.toLowerCase() =="math") { HVb = true; break; } if(YNb.isMathJax) { HVb = true; break; } fla = YNb; gla = 0; YNb = SSDOM.getNextNodeIgnoreChildren(YNb, true, kSb); } else { YNb = SSDOM.getNextNode(YNb, true, kSb); } } bNb = 0; if(YNb == null) { HVb = true; break; } } if(fla.nodeType == 3) { var Dtb = fla.nodeValue; if(gla > 0 && gla <= Dtb.length) { while(gla > 0) { if(Fya(Dtb.charAt(gla - 1))) { --gla; } else { break; } } } } return new Xqa(fla, gla, false);};SSDOM.getPreviousTextNode = function(dsb, p_bGoByStyle, kSb){ var fTb = dsb; var zvb = false; while (fTb != null && fTb != kSb) { fTb = SSDOM.getPreviousNode(fTb, p_bGoByStyle, kSb); if(fTb != null) { if (fTb.nodeType == 3 && fTb.parentNode.tagName.toLowerCase() !="textarea") { if(fTb.nodeValue.length > 0) { zvb = true; } } if (fTb.nodeType == 1 && fTb.tagName.toLowerCase() =="math") { zvb = true; } else if (fTb.nodeType == 1 && fTb.isMathJax) { zvb = true; } else if(fTb.nodeType == 1 && fTb.tagName.toLowerCase() =="img") { var TQb = fTb.getAttribute("msg"); if (TQb != null && TQb.length > 0) { zvb = true; } } if(zvb) { return fTb; } } } return null;};SSDOM.getPreviousTextNodeNoBlank = function(dsb, p_bGoByStyle, kSb){ var fTb = dsb; while(fTb != null && fTb != kSb) { fTb = SSDOM.getPreviousTextNode(fTb, p_bGoByStyle, kSb); if(fTb != null) { var xla = (fTb.nodeType == 3)? fTb.nodeValue.trimTH() : fTb.getAttribute("msg").trimTH(); if(Sya(xla)) { return fTb; } } } return null;};SSDOM.getPreviousTextNodeNoImg = function(dsb, p_bGoByStyle, kSb, p_bIncludeBlanks){ var fTb = (p_bIncludeBlanks)? SSDOM.getPreviousTextNode(dsb, p_bGoByStyle, kSb) : SSDOM.getPreviousTextNodeNoBlank(dsb, p_bGoByStyle, kSb); while(fTb != null && fTb.nodeType != 3 && fTb != kSb) { if(fTb.tagName.toLowerCase() =="math") { break; } if(fTb.isMathJax) { break; } fTb = (p_bIncludeBlanks)? SSDOM.getPreviousTextNode(fTb, p_bGoByStyle, kSb) : SSDOM.getPreviousTextNodeNoBlank(fTb, p_bGoByStyle, kSb); } return fTb;};SSDOM.getNextTextNode = function(dsb, p_bGoByStyle, kSb){ var YNb = dsb; var zvb = false; while (YNb != null && YNb != kSb) { YNb = SSDOM.getNextNode(YNb, p_bGoByStyle, kSb); if(YNb != null) { if (YNb.nodeType == 3 && YNb.parentNode.tagName.toLowerCase() !="textarea") { if(YNb.nodeValue.length > 0) { zvb = true; } } if (YNb.nodeType == 1 && YNb.tagName.toLowerCase() =="math") { zvb = true; } else if (YNb.nodeType == 1 && YNb.isMathJax) { zvb = true; } else if(YNb.nodeType == 1 && YNb.tagName.toLowerCase() =="img") { var TQb = YNb.getAttribute("msg"); if (TQb != null && TQb.length > 0) { zvb = true; } } if(zvb) { return YNb; } } } return null;};SSDOM.getNextTextNodeNoBlank = function(dsb, p_bGoByStyle, kSb){ var YNb = dsb; while(YNb != null && YNb != kSb) { YNb = SSDOM.getNextTextNode(YNb, p_bGoByStyle, kSb); if(YNb != null) { var xla; if(YNb.nodeType == 3) { xla = YNb.nodeValue.trimTH(); } else { if(YNb.tagName.toLowerCase() =="img") { xla = YNb.getAttribute("msg").trimTH(); } else if(YNb.tagName.toLowerCase() =="math") { xla = SSDOM.getTextFromMathMl(YNb); } else if(YNb.isMathJax) { xla = SSDOM.getTextFromMathJax(YNb); } } if(Sya(xla)) { return YNb; } } } return null;};SSDOM.getNextTextNodeNoImg = function(dsb, p_bGoByStyle, kSb, p_bIncludeBlanks){ var YNb = (p_bIncludeBlanks)? SSDOM.getNextTextNode(dsb, p_bGoByStyle, kSb) : SSDOM.getNextTextNodeNoBlank(dsb, p_bGoByStyle, kSb); while(YNb != null && YNb.nodeType != 3 && YNb != kSb) { if(YNb.tagName.toLowerCase() =="math") { break; } if(YNb.isMathJax) { break; } YNb = (p_bIncludeBlanks)? SSDOM.getNextTextNode(YNb, p_bGoByStyle, kSb) : SSDOM.getNextTextNodeNoBlank(YNb, p_bGoByStyle, kSb); } return YNb;};SSDOM.getFirstSentence = function(HWb){ var Zma = SSDOM.getFirstChildTextNode(HWb, true); var efb = new Xqa(Zma, 0, true); var ffb = SSDOM.getSentenceBreakToRight(efb, HWb); efb = SSDOM.getSentenceBreakToLeft(ffb, HWb); if(efb == null || ffb == null) { return null; } var unb = new dqa(efb, ffb); var Jma = false; while(!Jma) { Jma = cya(unb) && SSDOM.checkSentence(unb); if(!Jma) { var Kma = SSDOM.getNextSentence(unb, HWb); if(Kma == null || (ffb.node == Kma.ffb.node && ffb.offset == Kma.ffb.offset) || (efb.node == Kma.efb.node && efb.offset == Kma.efb.offset)) { break; } else { unb = Kma; } } } return unb;};SSDOM.getLastSentence = function(HWb){ var Zma = SSDOM.getLastChildTextNode(HWb, true); var ffb; if(Zma.nodeType == 3) { ffb = new Xqa(Zma, Zma.nodeValue.length, false); } else { ffb = new Xqa(Zma, -1, false); } var efb = SSDOM.getSentenceBreakToLeft(ffb, HWb); ffb = SSDOM.getSentenceBreakToRight(efb, HWb); if(efb == null || ffb == null) { return null; } var unb = new dqa(efb, ffb); var Jma = false; while(!Jma) { Jma = cya(unb) && SSDOM.checkSentence(unb); if(!Jma) { var Kma = SSDOM.getPreviousSentence(unb, HWb); if(Kma == null || (ffb.node == Kma.ffb.node && ffb.offset == Kma.ffb.offset) || (efb.node == Kma.efb.node && efb.offset == Kma.efb.offset)) { break; } else { unb = Kma; } } } return unb;};SSDOM.getSentenceFromPoint = function(mib){ var ffb = SSDOM.getSentenceBreakToRight(mib); var efb = SSDOM.getSentenceBreakToLeft(ffb); if(efb == null || ffb == null) { return null; } return new dqa(efb, ffb);};SSDOM.getSentenceFromPointByLang = function(mib){ var ffb = SSDOM.getSentenceBreakToRight(mib); var BNb = yIb(mib.node); var CNb = LJb(mib.node, ffb.node, BNb); if(CNb != null) { ffb = CNb; } var efb = SSDOM.getSentenceBreakToLeft(ffb); BNb = yIb(efb.node); var Rma = RJb(efb.node, ffb.node, BNb); if(Rma != null) { efb = Rma; } if(efb == null || ffb == null) { return null; } return new dqa(efb, ffb);};SSDOM.getSentenceFromPoints = function(eNb,fNb){ var efb = SSDOM.getSentenceBreakToLeft(eNb, null); var ffb = SSDOM.getSentenceBreakToRight(fNb, null); if(efb == null || ffb == null) { return null; } return new dqa(efb, ffb);};SSDOM.getNextSentence = function(UPb, kSb){ if(UPb == null) { return null; } if(typeof(kSb) =="undefined") { kSb = null; } var hNb = UPb.ffb.node; var ema = UPb.ffb.offset; if(UPb.ffb.isSpecialCase()) { hNb = SSDOM.getNextNodeIgnoreChildren(hNb, false, kSb); ema = 0; } var ffb; var efb; while(hNb != null) { if(hNb.nodeType == 3 && ema < hNb.nodeValue.length) { ffb = SSDOM.getSentenceBreakToRight( new Xqa(hNb, ema, false), kSb); if(ffb == null) { return null; } if(ffb.node == hNb && ffb.offset == ema) { var Zma = SSDOM.getNextTextNodeNoBlank(hNb, false, kSb); if(Zma == null) { return null; } ffb = SSDOM.getSentenceBreakToRight(new Xqa(Zma, 0, false), kSb); } } else { var Zma = SSDOM.getNextTextNodeNoBlank(hNb, false, kSb); if(Zma == null) { return null; } ffb = SSDOM.getSentenceBreakToRight(new Xqa(Zma, 0, false), kSb); } efb = SSDOM.getSentenceBreakToLeft(ffb, null); if(efb == null) { return null; } if(UPb.efb.node != efb.node || UPb.efb.offset != efb.offset) { var unb = new dqa(efb, ffb); if(SSDOM.checkSentence(unb) && cya(unb)) { return unb ; } } hNb = ffb.node; if(hNb.nodeType == 3) { var tyb = hNb.nodeValue.replace(/[\x21\x3f\x3a]/g,"."); var izb = tyb.indexOf(".", ffb.offset + 1); if(izb == -1) { ema = tyb.length; } else { ema = izb; } } } return null;};SSDOM.getPreviousSentence = function(UPb, kSb){ if(typeof(kSb) =="undefined") { kSb = null; } var hNb = UPb.efb.node; var ema = UPb.efb.offset; var efb; var ffb; while(hNb != null) { if(hNb.nodeType == 3) { var tyb = hNb.nodeValue.replace(/[\x21\x3f\x3a]/g,"."); var izb; if(ema > 0) { izb = tyb.lastIndexOf(".", ema); } else if(ema == 0) { izb = -1; } else { izb = tyb.lastIndexOf("."); } while(izb > -1) { ema = izb; ffb = SSDOM.getSentenceBreakToRight(new Xqa(hNb, ema, true), kSb); if(ffb == null) { return null; } if(ffb.node != UPb.ffb.node || ffb.offset != UPb.ffb.offset) { efb = SSDOM.getSentenceBreakToLeft(ffb, kSb); if(efb == null) { return null; } var unb = new dqa(efb, ffb); if(SSDOM.checkSentence(unb) && cya(unb)) { return unb ; } } if(izb == 0) { izb = -1; } else { izb = tyb.lastIndexOf(".", izb - 1); } } } ema = -1; Yub = SSDOM.getPreviousTextNodeNoImg(hNb, true, kSb, false); if(Yub != null) { hNb = Yub; } else { hNb = SSDOM.getPreviousTextNodeNoBlank(hNb, false, kSb); if(hNb != null) { if(hNb.nodeType == 3) { ffb = SSDOM.getSentenceBreakToRight(new Xqa(hNb, hNb.nodeValue.length, false), kSb); } else { ffb = SSDOM.getSentenceBreakToRight(new Xqa(hNb, 0, false), kSb); } if(ffb == null) { return null; } if(ffb.node != UPb.ffb.node || ffb.offset != UPb.ffb.offset) { efb = SSDOM.getSentenceBreakToLeft(ffb, kSb); if(efb == null) { return null; } return new dqa(efb, ffb); } } } } return null;};SSDOM.checkSentence = function(UPb){ var Etb = UPb.efb.node; var Lob = Etb.ownerDocument.body; while(Etb != null && Etb != Lob) { if(Etb.nodeType == 1) { if(Etb.className =="rwDictDefin"|| Etb.className =="rwPopupContent"|| Etb.className =="rwToolbarBarCollect") { break; } if(Etb.getAttribute(caa) != null) { return false; } } Etb = Etb.parentNode; } var afb = UPb.ffb.node; if(afb != Etb) { while(afb != null && afb != Lob) { if(afb.className =="rwDictDefin"|| afb.className =="rwPopupContent"|| afb.className =="rwToolbarBarCollect") { break; } if(afb.nodeType == 1 && afb.getAttribute(caa) != null) { return false; } afb = afb.parentNode; } } return true;};SSDOM.getStartOfParagraph = function(dsb){ var NAb; var match = dsb; var Ijb = SSDOM.getPreviousNode(dsb, true, null); while(Ijb != null) { NAb = false; if(Ijb.nodeType == 1) { if(SSDOM.isSpecialCase(Ijb)) { if(Ijb.getAttribute("ignore") != null) { NAb = true; } } else { NAb = true; } } else if(Ijb.nodeType == 3) { if(Ijb.nodeValue.trimTH().length == 0) { NAb = true; } } if(!NAb) { match = Ijb; } Ijb = SSDOM.getPreviousNode(Ijb, true, null); } return match;};SSDOM.getEndOfParagraph = function(dsb){ var NAb; var match = dsb; var nextNode = SSDOM.getNextNode(dsb, true, null); while(nextNode != null) { NAb = false; if(nextNode.nodeType == 1) { if(SSDOM.isSpecialCase(nextNode)) { if(nextNode.getAttribute("ignore") != null) { NAb = true; } } else { NAb = true; } } else if(nextNode.nodeType == 3) { if(nextNode.nodeValue.trimTH().length == 0) { NAb = true; } } if(!NAb) { match = nextNode; } nextNode = SSDOM.getNextNode(nextNode, true, null); } return match;};SSDOM.getEndOfWordAsCaret = function(lfb){ var VAc = null; var node = lfb.node; if(node.nodeType != 3) { return null; } var Dtb = node.nodeValue; var Tyb = lfb.offset; var zvb = false; var i; var c; var vma = false; while(!zvb) { for(i=Tyb;i<Dtb.length; i++) { c = Dtb.charCodeAt(i); if(!Pya(c)) { if(vma) { return new Xqa(node, i, false); } else { return VAc; } } else { vma = true; } } if(!zvb) { if(vma) { VAc = new Xqa(node, Dtb.length, false); vma = false; } node = SSDOM.getNextTextNode(node, true, null); if(node == null) { break; } if(node.nodeType != 3) { break; } Dtb = node.nodeValue; Tyb = 0; } } return VAc;};SSDOM.Hnb = function(o, p, q){ function r(a) { var b; if(typeof DOMParser !="undefined") { b = (new DOMParser()).parseFromString(a,"application/xml"); } else { var c = ["MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"]; for(var i = 0; i < c.length && !b; i++) { try { b = new ActiveXObject(c[i]); b.loadXML(a); } catch(e) { } } } return b; } function s(a, b, c) { a[b] = function() { return eval(c); }; } function t(b, c, d) { if(typeof d =="undefined") { d = 1; } if(d > 1) { if(c.nodeType == 1) { var e = document.createElement(c.nodeName); var f = {}; for(var a = 0,g = c.attributes.length; a < g; a++) { var h = c.attributes[a].name,k = c.attributes[a].value,l = (h.substr(0, 2) =="on"); if(l) { f[h] = k; } else { switch(h) { case"class":e.className = k;break;case"for":e.htmlFor = k;break;default:e.setAttribute(h, k); } } } b = b.appendChild(e); for(l in f) { s(b, l, f[l]); } } else if(c.nodeType == 3) { var m = (c.nodeValue ? c.nodeValue :""); var n = m.replace(/^\s*|\s*$/g,""); if(n.length < 7 || (n.indexOf("<!--") != 0 && n.indexOf("-->") != (n.length - 3))) { b.appendChild(document.createTextNode(m)); } } } for(var i = 0,j = c.childNodes.length; i < j; i++) { t(b, c.childNodes[i], d + 1); } } p ="<root>"+ p +"</root>"; var u = r(p); if(o && u) { if(q != false) { while(o.lastChild) { o.removeChild(o.lastChild); } } t(o, u.documentElement); }};SSDOM.isStyleNode = function(dsb){ if(dsb == null) { return false; } if(dsb.nodeType != 1) { return dsb.nodeType == 3; } var knb = dsb.tagName.toLowerCase().trimTH(); if(knb == aga.pageData.strHighlightTag) { var Dkb = dsb.getAttribute("started"); if(Dkb != null && Dkb =="1") { return false; } } if(knb =="span"&& dsb.getAttribute(hba) != null) { return false; } return aga.pageData.isInStyleList(knb);};SSDOM.isInvalidNode = function(dsb){ if(dsb == null) { return true; } if(dsb.nodeType != 1) { return dsb.nodeType != 3; } var attr; attr = dsb.getAttribute("ignore"); if(attr != null) { return true; } attr = dsb.getAttribute(hba); if(attr != null && aga.controlData.bIgnoreSkipSection) { return true; } if(Sga) { var yma = SSDOM.getComputedStyle(dsb); if(yma != null) { if(yma.visibility =="hidden"|| yma.display =="none") { return true; } } } var knb = dsb.tagName.toLowerCase(); return knb =="link"|| knb =="area"|| knb =="script"|| knb =="noscript"|| knb =="annotation"|| knb =="style"|| knb =="!--"|| knb =="title"|| knb =="html:script"; };SSDOM.isInvalidNodeNested = function(dsb){ if(dsb == null) { return true; } var Lob = dsb.ownerDocument.body; var Yub = dsb; while(Yub != null) { if(SSDOM.isInvalidNode(Yub)) { return true; } if(Yub==Lob) { break; } Yub = Yub.parentNode; } return false;};SSDOM.isIgnored = function(dsb){ if(dsb != null && dsb.nodeType == 3) { dsb = dsb.parentNode; } if(dsb == null) { return true; } var Lob = dsb.ownerDocument.body; var Yub = dsb; while(Yub != null && Yub.nodeType == 1) { if(Yub.getAttribute("ignore") != null) { return true; } if(Yub==Lob) { break; } Yub = Yub.parentNode; } return false;};SSDOM.isLineBreakNode = function(SVb){ if(SVb.nodeType != 1) { return false; } var knb = SVb.tagName.toLowerCase().trimTH(); return aga.pageData.isInBreakList(knb);};SSDOM.isFollowedBySpace = function(lfb){ var node = lfb.node; var Tyb = lfb.offset; if(node.nodeType != 3) { return false; } if(Tyb == node.nodeValue.length) { Tyb = 0; node = SSDOM.getNextTextNodeNoImg(node, true, null, true); if(node == null) { return false; } } var c = node.nodeValue.charCodeAt(Tyb); return c == 32 || c == 160;};SSDOM.isFollowedByWordBreak = function(lfb){ if(!lfb.forwardBias) { lfb = lfb.clone(); lfb.forwardBias = true; } if(lfb.offset == lfb.node.nodeValue.length) { lfb = SSDOM.moveCaret(lfb, 0, true); if(lfb == null) { return true; } } var c = lfb.node.nodeValue.charCodeAt(lfb.offset); if(c == 39) { if(arguments.length > 1 && arguments[1] === true) { return true; } else { var Gna = SSDOM.moveCaret(lfb, 1, true); if(Gna == null) { return true; } return SSDOM.isFollowedByWordBreak(Gna, true); } } else { return !bxa(c); }};SSDOM.isFollowingWordBreak = function(lfb){ if(lfb.forwardBias) { lfb = lfb.clone(); lfb.forwardBias = true; } if(lfb.offset == 0) { lfb = SSDOM.moveCaret(lfb, 0, true); if(lfb == null) { return true; } } var c = lfb.node.nodeValue.charCodeAt(lfb.offset - 1); if(c == 39) { if(arguments.length > 1 && arguments[1] === true) { return true; } else { var Hna = SSDOM.moveCaret(lfb, -1, true); if(Hna == null) { return true; } return SSDOM.isFollowingWordBreak(Hna, true); } } else { return !bxa(c); }};SSDOM.isSpecialCase = function(dsb){ if(dsb == null) { return false; } if(dsb.nodeType == 1) { var tagName = dsb.tagName.toLowerCase(); if(tagName =="span") { var attr = dsb.getAttribute("pron"); if(attr != null) { return true; } attr = dsb.getAttribute("chunk"); if(attr != null) { return true; } attr = dsb.isMathJax; if(attr != null && attr) { var BUb = SSDOM.getTextFromMathJax(dsb); if(BUb.length > 0) { return true; } } } else if(tagName =="acronym"|| tagName =="abbr") { var attr = dsb.getAttribute("title"); if(attr != null) { return true; } } else if(tagName =="chunk") { return true; } else if(tagName =="img") { var attr = dsb.getAttribute("msg"); if(attr != null) { return true; } } else if(tagName =="math") { var BUb = SSDOM.getTextFromMathMl(dsb); if(BUb.length > 0) { return true; } } if(dsb.getAttribute("ignore") != null) { return true; } } return false;};SSDOM.isSpecialCaseHighlightable = function(dsb){ if(dsb.nodeType == 1) { var tagName = dsb.tagName.toLowerCase(); if(tagName =="span") { var attr = dsb.getAttribute("pron"); if(attr != null) { return true; } attr = dsb.getAttribute("chunk"); if(attr != null && attr =="1") { return true; } attr = dsb.isMathJax; if(attr != null && attr) { var BUb = SSDOM.getTextFromMathJax(dsb); if(BUb.length > 0) { return true; } } } else if(tagName =="acronym"|| tagName =="abbr") { var attr = dsb.getAttribute("title"); if(attr != null) { return true; } } else if(tagName =="math") { var BUb = SSDOM.getTextFromMathMl(dsb); if(BUb.length > 0) { return true; } } } return false;};SSDOM.checkForSpecialParent = function(dsb){ if(dsb != null) { var Lob = SSDOM.getBody(dsb); var Yub = dsb; while(Yub != null && Yub != Lob) { if(SSDOM.isSpecialCase(Yub)) { return Yub; } Yub = Yub.parentNode; } if(Yub == Lob) { if(Yub.getAttribute("ignore") != null) { return Yub; } } } return null;};SSDOM.getContainingNode = function(dMb, p_attr, p_attrVal){ var Lob = SSDOM.getBody(dMb); var Yub = dMb; if(Yub.nodeType == 3) { Yub = Yub.parentNode; } while(Yub != null && Yub != Lob) { if(p_attr =="class"&& Lfa) { if(Yub.className == p_attrVal) { return Yub; } if(Yub.getAttribute("className") == p_attrVal) { return Yub; } } if(Yub.getAttribute(p_attr) != null) { if(p_attrVal == null || Yub.getAttribute(p_attr) == p_attrVal) { return Yub; } } Yub = Yub.parentNode; } return null;};SSDOM.getAllTextFromNode = function(dsb){ var Dtb =""; if(dsb.nodeType == 3) { if(!SSDOM.isInvalidNode(dsb.parentNode) && dsb.parentNode.tagName.toLowerCase() !="textarea") { Dtb = dsb.nodeValue; } } else if(dsb.nodeType == 1) { if(dsb.getAttribute("ignore") != null) { Dtb =""; HVb = true; } else { var oQb = dsb.tagName.toLowerCase(); var HVb = false; if(oQb =="img") { var TQb = dsb.getAttribute("msg"); if(TQb != null && TQb.trimTH().length > 0) { Dtb =" "+ TQb.trimTH() +" "; } HVb = true; } else if(oQb =="span") { var TQb = dsb.getAttribute("pron"); if(TQb != null && TQb.trimTH().length > 0) { Dtb = TQb.trimTH(); HVb = true; } TQb = dsb.isMathJax; if(TQb) { Dtb = SSDOM.getTextFromMathJax(dsb); } } else if(oQb =="acronym"|| oQb =="abbr") { var TQb = dsb.getAttribute("pron"); if(TQb != null && TQb.trimTH().length > 0) { Dtb = TQb.trimTH(); } else { TQb = dsb.getAttribute("title"); if(TQb != null && TQb.trimTH().length > 0) { Dtb = TQb.trimTH(); HVb = true; } } } else if(oQb =="math") { Dtb = SSDOM.getTextFromMathMl(dsb); } } if(!HVb) { var Ipa = dsb.firstChild; while(Ipa != null) { Dtb += SSDOM.getAllTextFromNode(Ipa); Ipa = Ipa.nextSibling; } } } return Dtb;};SSDOM.getTextFromNode = function(dsb){ var Dtb =""; if(dsb.nodeType == 3) { if(!SSDOM.isInvalidNode(dsb.parentNode) && dsb.parentNode.tagName.toLowerCase() !="textarea") { Dtb = dsb.nodeValue; } } else if(dsb.nodeType == 1) { if(dsb.getAttribute("ignore") != null) { Dtb =""; } else { var oQb = dsb.tagName.toLowerCase(); if(oQb =="img") { var TQb = dsb.getAttribute("msg"); if(TQb != null && TQb.trimTH().length > 0) { Dtb =" "+ TQb.trimTH() +" "; } } else if(oQb =="span") { var TQb = dsb.getAttribute("pron"); if(TQb != null && TQb.trimTH().length > 0) { Dtb = TQb.trimTH(); } TQb = dsb.getAttribute("chunk"); if(TQb != null && TQb =="1") { Dtb = dsb.innerHTML; } TQb = dsb.isMathJax; if(TQb) { Dtb = SSDOM.getTextFromMathJax(dsb); } } else if(oQb =="acronym"|| oQb =="abbr") { var TQb = dsb.getAttribute("pron"); if(TQb != null && TQb.trimTH().length > 0) { Dtb = TQb.trimTH(); } else { TQb = dsb.getAttribute("title"); if(TQb != null && TQb.trimTH().length > 0) { Dtb = TQb.trimTH(); } } } else if(oQb =="math") { Dtb = SSDOM.getTextFromMathMl(dsb); } } } return Dtb;};SSDOM.getTextOverRange = function(HWb, oMb, p_domRefRight){ try { if(oMb == null || p_domRefRight == null) { return""; } var ABc = SSDOM.getCaretPairFromDomPosition(HWb, oMb.path, oMb.offset, p_domRefRight.path, p_domRefRight.offset); return SSDOM.getTextOverCaretRange(ABc); } catch(err) { Kya("Error getTextOverRange: "+ err.message); return""; }};SSDOM.getTextOverCaretRange = function(ANb){ try { if(ANb == null || ANb.efb == null || ANb.ffb == null) { return""; } var efb = ANb.efb; var ffb = ANb.ffb; var fTb = efb.node; var YNb = ffb.node; var kNb = true; var hNb = fTb; var Dtb =""; while(hNb != null) { var OAc =""; if(hNb.nodeType == 3) { if(!SSDOM.isInvalidNode(hNb.parentNode) && hNb.parentNode.tagName.toLowerCase() !="textarea") { OAc = hNb.nodeValue; } } if(OAc != null && OAc !="") { if(hNb == YNb && ffb.offset > -1) { OAc = OAc.substring(0, ffb.offset); } if(hNb == fTb && efb.offset > -1) { OAc = OAc.substring(efb.offset); } Dtb += OAc; } if(kNb) { hNb = SSDOM.getNextNodeAllowMoveToChild(hNb, false, YNb); } else { hNb = SSDOM.getNextTextNode(hNb, false, YNb); } kNb = false; } return Dtb.trimTH(); } catch(err) { Kya("Error getTextOverCaretRange: "+ err.message); return""; }};SSDOM.getTextSpokenOverCaretRange = function(ANb){ try { if(ANb == null || ANb.efb == null || ANb.ffb == null) { return""; } var efb = ANb.efb; var ffb = ANb.ffb; var fTb = efb.node; var YNb = ffb.node; var Zya = false; var hNb = fTb; var Dtb =""; while(hNb != null) { Zya = SSDOM.isSpecialCase(hNb); if(Zya || hNb.nodeType == 3) { var OAc = SSDOM.getTextFromNode(hNb); if(OAc != null && OAc !="") { if(!Zya) { if(hNb == YNb && ffb.offset > -1) { OAc = OAc.substring(0, ffb.offset); } if(hNb == fTb && efb.offset > -1) { OAc = OAc.substring(efb.offset); } } Dtb += OAc; } } if(Zya) { hNb = SSDOM.getNextNodeIgnoreChildren(hNb, false, YNb); } else { hNb = SSDOM.getNextNode(hNb, false, YNb); } } return Dtb.trimTH(); } catch(err) { Kya("Error getTextOverCaretRange: "+ err.message); return""; }};SSDOM.textFromFormTH = function(SVb){ var sgb = null; var oQb = SVb.tagName.toLowerCase(); var Nkb = SSDOM.getPositionInDom(SVb); if(oQb =="input") { var lab = SVb.getAttribute("type"); if(lab != null) { lab = lab.toLowerCase(); } var yXb =""; if(lab == null || lab.equalsTH("") || lab.equalsTH("text")) { yXb = SVb.value; } else if(lab.equalsTH("password")) { yXb ="Masked password field"; } else if(lab.equalsTH("image")) { yXb =""; } else if(lab.equalsTH("button") || lab.equalsTH("submit") || lab.equalsTH("reset")) { yXb = SVb.getAttribute("value"); } if(!yXb.equalsTH("")) { sgb ="form:"+ Nkb +";"+ yXb; } } else if(oQb =="select") { var yXb =""; var uTb = SVb.selectedIndex; var Jsb =""; for(var Dwb = 0; Dwb < SVb.options.length; Dwb++) { Jsb += SVb.options[Dwb].text +" "; } if(!Jsb.equalsTH("")) { if(uTb > -1) { yXb = SVb.options[uTb].text; yXb +=" selected from the list "+ Jsb; } else { yXb ="No selection from the list "+ Jsb; } sgb ="form"+ Nkb +";"+ yXb; } } else if(oQb =="textarea") { var yXb = SVb.value; sgb ="form"+ Nkb +";"+ yXb; } else if(oQb =="option") { var yXb = SVb.value; sgb ="form"+ Nkb +";"+ yXb; } return sgb;};SSDOM.getTargetElement = function(evt){ var ULb; if(Lfa) { ULb = evt.srcElement; } else if(Yfa) { ULb = evt.target; } else { ULb = evt.target; } return ULb;};SSDOM.getClickPoint = function(evt){ var Btb = null; var ULb; if(Lfa) { ULb = evt.srcElement; if(ULb.nodeType == 1 && ULb.tagName.toLowerCase() =="textarea") { } else { Btb = rw_getTargetNodeAsCaretIE(evt, true); if(Btb != null) { if(Btb.node == null || Btb.node.parentNode == null || Btb.node.parentNode != ULb) { Btb = null; return null; } else { if(Btb.node.nodeType == 3) { Btb.node = SSDOM.mergeTextNodes(Btb.node); } } } } } else if(Yfa) { ULb = evt.target; if(ULb != null) { if(xKb) { if(ULb.firstChild != null && ULb.firstChild.nodeType == 3 && ULb.tagName.toLowerCase() !="textarea") { var NVb = ULb.firstChild.nodeValue; if(NVb.trimTH().length > 0) { ULb = ULb.firstChild; } } } else if(wKb) { if(evt.fromElement != null && ULb.nodeType == 1 && ULb.tagName.toLowerCase() !="textarea") { if(evt.fromElement.nodeType == 3) { ULb = evt.fromElement; } } else { if(ULb.nodeType == 1 && ULb.firstChild != null && ULb.firstChild.nodeType == 3 && ULb.tagName.toLowerCase() !="textarea") { var NVb = ULb.firstChild.nodeValue; if(NVb.trimTH().length > 0) { ULb = ULb.firstChild; } } } } } } else { if(evt.explicitOriginalTarget.nodeValue != null) { if(evt.target.tagName.toLowerCase() =="textarea") { ULb = evt.target; } else { ULb = evt.explicitOriginalTarget; var gRb = window.getSelection(); if(gRb.anchorNode == null || gRb.anchorNode != ULb) { return null; } else { Btb = new Xqa(gRb.anchorNode, gRb.anchorOffset, true); } } } else { ULb = evt.target; } } if(Btb == null && ULb != null) { Btb = new Xqa(ULb, 0, true); } return Btb;};SSDOM.getPositionInDom = function(p_theNode){ var Nkb =""; var Loa = 0; var Moa =""; if(p_theNode != null && p_theNode.ownerDocument != null) { var Zoa = false; var Yoa = false; var Lob = p_theNode.ownerDocument.body; while(p_theNode != null && p_theNode != Lob) { if(SSDOM.isSpecialCase(p_theNode)) { Nkb =""; } Zoa = (p_theNode.nodeType == 3) || (p_theNode.nodeType == 1 && p_theNode.tagName.toLowerCase() == aga.pageData.strHighlightTag && p_theNode.getAttribute("rwstate") != null); var SVb = p_theNode.previousSibling; while(SVb != null) { Yoa = (SVb.nodeType == 3) || (SVb.nodeType == 1 && SVb.tagName.toLowerCase() == aga.pageData.strHighlightTag && SVb.getAttribute("rwstate") != null); if(Zoa && Yoa) { } else { ++Loa; } SVb = SVb.previousSibling; Zoa = Yoa; } Nkb = Nkb + Loa +"~"; Loa = 0; p_theNode = p_theNode.parentNode; if(p_theNode != null && p_theNode.getAttribute != null && p_theNode.tagName != null) { var Roa = p_theNode.getAttribute("chunk"); if(p_theNode.tagName.toLowerCase() =="span"&& Roa =="1") { var Soa = SSDOM.getPositionInDom(p_theNode); Moa ="#^th*"+ Soa +"#^th*"; } } } } return Moa + Nkb;};SSDOM.getNodeFromPosition = function(p_theBody, Isa){ var Ctb = p_theBody; if(Isa.lastIndexOf("*") > -1) { var hzb = Isa.lastIndexOf("*"); Isa = Isa.substring(hzb + 1); } var Voa = Isa.split("~"); var wzb = Voa.length; var i; for(i = wzb - 2; i > -1; i--) { Ctb = Ctb.firstChild; if(Ctb == null) { return null; } var Wub; if(Voa[i].length == 0) { Wub = 0; } else { Wub = parseInt(Voa[i], 10); } var Yoa = false; var Zoa = (Ctb.nodeType == 3) || (Ctb.nodeType == 1 && Ctb.tagName.toLowerCase() == aga.pageData.strHighlightTag && Ctb.getAttribute("rwstate") != null); while(Wub > 0) { Ctb = Ctb.nextSibling; if(Ctb == null) { return null; } Yoa = (Ctb.nodeType == 3) || (Ctb.nodeType == 1 && Ctb.tagName.toLowerCase() == aga.pageData.strHighlightTag && Ctb.getAttribute("rwstate") != null); if(Yoa && Zoa) { } else { --Wub; Zoa = Yoa; } } } return Ctb;};SSDOM.getCaretFromDomPosition = function(p_theBody, Isa, Adb, esb, p_bForceSpecial){ if(typeof(p_bForceSpecial) =="undefined") { p_bForceSpecial = false; } try { if(p_theBody == null) { return null; } var Ctb = SSDOM.getNodeFromPosition(p_theBody, Isa); if(p_bForceSpecial) { var Wyb = new Xqa(Ctb, 0, esb); Wyb.setSpecialCase(true); return Wyb; } if(SSDOM.isSpecialCase(Ctb)) { if(SSDOM.isSpecialCaseHighlightable(Ctb)) { if(esb) { var Etb = SSDOM.getFirstChildTextNode(Ctb, false); if(Etb != null) { return new Xqa(Etb, 0, esb); } else { return new Xqa(Ctb, 0, esb); } } else { var afb = SSDOM.getLastChildTextNode(Ctb, false); if(afb != null) { if(afb.nodeType == 3) { return new Xqa(afb, afb.length, esb); } else { return new Xqa(afb, 0, esb); } } else { return new Xqa(Ctb, 0, esb); } } } else { return new Xqa(Ctb, 0, esb); } } var Tyb = 0; if(!esb) { ++Tyb; } if(Adb > -1) { if(Ctb == null) { return null; } var zvb = false; var afb = Ctb.parentNode; var hoa = Ctb; var tyb; while(!zvb) { if(Ctb.nodeType == 3) { tyb = Ctb.nodeValue; if(Adb < (Tyb + tyb.length)) { zvb = true; break; } hoa = Ctb; Tyb += Ctb.nodeValue.length; Ctb = SSDOM.getNextNode(Ctb, false, afb); } else if(Ctb.nodeType == 1) { if(SSDOM.isSpecialCase(Ctb)) { var joa = Adb - Tyb; if(joa > 0) { Tyb += 1; } else { zvb = true; break; } Ctb = SSDOM.getNextNodeIgnoreChildren(Ctb, false, afb); } else { Ctb = SSDOM.getNextNode(Ctb, false, afb); } } if(Ctb == null || Ctb == afb) { if(hoa != null) { Ctb = hoa; if(Ctb.nodeType == 3) { Tyb = Adb - Ctb.nodeValue.length; } else { Tyb = 0; } if(!esb) { ++Tyb; } break; } else { return null; } } } if(esb) { return new Xqa(Ctb, Adb - Tyb, esb); } else { return new Xqa(Ctb, Adb - (Tyb - 1), esb); } } else { return new Xqa(Ctb, Adb, esb); } } catch(err) { Kya("getCaretFromDomPosition error: "+ err); return null; }};SSDOM.getCaretPairFromDomPosition = function(p_theBody, p_strPathLeft, p_nPosLeft, p_strPathRight, p_nPosRight){ var efb = SSDOM.getCaretFromDomPosition(p_theBody, p_strPathLeft, p_nPosLeft, true); var ffb; if(p_strPathLeft == p_strPathRight && p_nPosLeft >= p_nPosRight) { ffb = efb; } else { ffb = SSDOM.getCaretFromDomPosition(p_theBody, p_strPathRight, p_nPosRight, false); } return new dqa(efb, ffb);};SSDOM.getClass = function(dsb){ if(dsb == null) { return""; } if(dsb.className) { return dsb.className; } else { return dsb.getAttribute("class"); }};SSDOM.getComputedStyle = function(bob){ if(bob == null) { return null; } if(bob.nodeType == 3) { bob = bob.parentNode; if(bob == null) { return null; } } if(SSDOM.bIEOld) { return bob.currentStyle; } else { return window.getComputedStyle(bob, null); }};SSDOM.getTextFromMathMl = function(dsb){ if(dsb.previousSibling != null || dsb.nextSibling != null) { var moa = document.createElement("span"); dsb.parentNode.replaceChild(moa, dsb); moa.appendChild(dsb); } if(Lfa) { var BUb = dsb.outerHTML; if(BUb == null) { return""; } else { if(BUb.indexOf("<?import namespace") > -1) { var n = BUb.indexOf("/>"); if(n > -1) { BUb = BUb.substring(n + 2); BUb = BUb.replace(/m:/gi,""); } } return BUb; } } else { var BUb = dsb.parentNode.innerHTML; if(BUb != null && BUb.length > 0) { return BUb; } else { return""; } }};SSDOM.getTextFromMathJax = function(dsb){ var poa = MathJax.Hub.getJaxFor(dsb); if(poa != null) { var qoa = null; try { qoa = poa.root.toMathML(""); } catch (err) { return""; } if(qoa != null || qoa.length >0) { return qoa; } else { return""; } } else { return""; }};SSDOM.getFrameSelection = function(wha){ if(!uda && wha.frames && wha.length>0) { var i; var wzb = wha.length; for(i = 0; i<wzb; i++) { try { var qAc = wha[i].getSelection(); if(qAc != null && !qAc.isCollapsed) { return wha[i]; } else { if(wha[i].length > 0) { var zoa = SSDOM.getFrameSelection(wha[i]); if(zoa) { return zoa; } } } } catch(e) { } } } return null;};SSDOM.getFrameSelectionSFF = function(wha){ var iRb = {}; var OAc = SSDOM.getFrameSelection(wha); if(OAc!= null) { iRb.FVb = OAc; iRb.hRb = OAc.getSelection(); } return iRb;};SSDOM.getFrameSelectionOldIE = function(wha){ var iRb = {}; var range; if(!uda && wha.frames && wha.length>0) { var i; var wzb = wha.length; for(i = 0; i<wzb; i++) { try { var Pdb = wha[i]; range = Pdb.document.selection.createRange(); if(range != null && range.text != null && range.text.length > 0) { iRb.FVb = Pdb; iRb.bRb = range; break; } else { if(Pdb.length > 0) { var zoa = SSDOM.getFrameSelectionOldIE(Pdb); if(zoa.bRb) { iRb = zoa; break; } } } } catch(e) { } } } return iRb;};SSDOM.getByClassName = function(p_strClass, HWb, p_strTagName){ var LAc; if(!Lfa) { LAc = []; var Dpa = HWb.getElementsByClassName(p_strClass); var wzb = Dpa.length; var i; for(i=0;i<wzb;i++) { LAc.push(Dpa[i]); } } else { LAc = SSDOM.getElementsByClass(p_strClass, HWb, p_strTagName); } return LAc;};SSDOM.getElementsByClass = function(p_strClassName, dsb, p_strTagName){ var Dpa = []; if(p_strTagName == null || p_strTagName =="*") { p_strTagName = aga.pageData.strHighlightTag; } var LAc = dsb.getElementsByTagName(p_strTagName); var wzb = LAc.length; var Gpa = new RegExp("(^|\\s)"+p_strClassName+"(\\s|$)"); var i; for (i=0; i<wzb; i++) { if( Gpa.test(LAc[i].getAttribute("className")) ) { Dpa.push(LAc[i]); } else if( Gpa.test(LAc[i].getAttribute("class")) ) { Dpa.push(LAc[i]); } } return Dpa;};SSDOM.getContentDocument = function(bob){ return bob.contentDocument ? bob.contentDocument: bob.contentWindow.document;};SSDOM.allTextFromNodeTH = function(SVb){ var Dtb =""; if (SVb.nodeType == 3) { Dtb = SVb.nodeValue; } else if (SVb.nodeType == 1) { var Ipa = SVb.firstChild; while (Ipa != null) { if (Ipa.nodeType == 3) { Dtb += Ipa.nodeValue; } else if (Ipa.nodeType == 1) { Dtb += SSDOM.allTextFromNodeTH(Ipa); } Ipa = Ipa.nextSibling; } } return Dtb;};SSDOM.getListOfHighlightableNodes = function(p_startCaret, p_endCaret){ var Jpa = Sga; Sga = false; var BAc = new Array(); try { var Etb = p_startCaret.node; var afb = p_endCaret.node; if(Etb.nodeType != 3) { if(Etb.nodeType == 1 && Etb.tagName.toLowerCase() =="math") { BAc.push(Etb); if(Etb == afb) { return BAc; } else { Etb = SSDOM.getNextTextNode(Etb, false, afb); } } else if(Lfa && Etb.nodeType == 1 && Etb.firstChild != null && Etb.firstChild.tagName.toLowerCase() =="math") { BAc.push(Etb.firstChild); if(Etb == afb) { return BAc; } else { Etb = Etb.firstChild; Etb = SSDOM.getNextTextNode(Etb, false, afb); } } else if(Etb.nodeType == 1 && Etb.isMathJax) { BAc.push(Etb); if(Etb == afb) { return BAc; } else { Etb = SSDOM.getNextTextNode(Etb, false, afb); } } else if(Lfa && Etb.nodeType == 1 && Etb.firstChild != null && Etb.firstChild.isMathJax) { BAc.push(Etb.firstChild); if(Etb == afb) { return BAc; } else { Etb = Etb.firstChild; Etb = SSDOM.getNextTextNode(Etb, false, afb); } } else { Etb = SSDOM.getFirstChildTextNode(Etb, false); if(Etb == null) { return BAc; } } } if(Etb == afb) { if(Etb.nodeType == 3) { var Dtb = Etb.nodeValue; if(Dtb.length > 0 && p_startCaret.offset < Dtb.length && p_endCaret.offset > 0 && p_endCaret.offset > p_startCaret.offset) { BAc.push(Etb); } } } else { if(Etb.nodeType == 3) { var Dtb = Etb.nodeValue; if(Dtb.length > 0 && p_startCaret.offset < Dtb.length) { BAc.push(Etb); } } else { if(Etb.nodeType == 1 && Etb.tagName.toLowerCase() =="math") { BAc.push(Etb); } else if(Lfa && Etb.nodeType == 1 && Etb.firstChild != null && Etb.firstChild.tagName.toLowerCase() =="math") { Etb = Etb.firstChild; BAc.push(Etb); } else if(Etb.nodeType == 1 && Etb.isMathJax) { BAc.push(Etb); } else if(Lfa && Etb.nodeType == 1 && Etb.firstChild != null && Etb.firstChild.isMathJax) { Etb = Etb.firstChild; BAc.push(Etb); } } var Yub = SSDOM.getNextTextNodeNoImg(Etb, false, afb, true); while (Yub != null) { if (Yub == afb) { if(afb.nodeType == 3) { var Dtb = afb.nodeValue; if(Dtb.length > 0 && p_endCaret.offset > 0) { BAc.push(afb); } } else { if(Yub.nodeType == 1 && Yub.tagName.toLowerCase() =="math") { BAc.push(Yub); } else if(Lfa && Yub.nodeType == 1 && Yub.firstChild != null && Yub.firstChild.tagName.toLowerCase() =="math") { BAc.push(Yub.firstChild); } else if(Yub.nodeType == 1 && Yub.isMathJax) { BAc.push(Yub); } else if(Lfa && Yub.nodeType == 1 && Yub.firstChild != null && Yub.firstChild.isMathJax) { BAc.push(Yub.firstChild); } } break; } else { BAc.push(Yub); } Yub = SSDOM.getNextTextNodeNoImg(Yub, false, afb, true); } } } catch(err){Kya("getListOfHighlightableNodes error:"+ err.message);} Sga = Jpa; return BAc;};SSDOM.getListOfNodes = function(p_startCaret, p_endCaret){ var BAc = new Array(); try { var Etb = p_startCaret.node; var afb = p_endCaret.node; if(Etb == afb) { BAc.push(Etb); } else { BAc.push(Etb); var Yub = SSDOM.getNextTextNode(Etb, false, afb, true); while (Yub != null) { BAc.push(Yub); Yub = SSDOM.getNextTextNodeNoImg(Yub, false, afb, true); } } } catch(err){Kya("getListOfNodes error:"+ err.message);} return BAc;};SSDOM.getRangeFromSelectionPoint = function(p_sel){ try { var Dtb = p_sel +""; Dtb = Dtb.trimTH(); p_sel.collapseToStart(); var Etb = p_sel.anchorNode; var Xpa = p_sel.anchorOffset; if(Etb.nodeType != 3) { Etb = SSDOM.getNextTextNodeNoBlank(Etb, false, null); Xpa = 0; } else if(Xpa == Etb.nodeValue.length) { Etb = SSDOM.getNextTextNodeNoBlank(Etb, false, null); Xpa = 0; } if(Etb != null && Etb.nodeType == 3) { var tyb = Etb.nodeValue.substring(Xpa); var Zpa = tyb.trimStartTH(); while(tyb.length > Zpa.length) { if(Zpa.length == 0) { Etb = SSDOM.getNextTextNodeNoBlank(Etb, false, null); Xpa = 0; if(Etb == null || Etb.nodeType != 3) { break; } } else { Xpa += tyb.length - Zpa.length; } tyb = Etb.nodeValue.substring(Xpa); Zpa = tyb.trimStartTH(); } } var range = SSDOM.getRangeObject(); if(Etb == null) { range.setStart(p_sel.anchorNode, p_sel.anchorOffset); range.setEnd(p_sel.anchorNode, p_sel.anchorOffset); } else { if(Etb.nodeType != 3) { range = SSDOM.getNodesForText(Etb, Xpa, Dtb); } else { if((Xpa + Dtb.length) < Etb.nodeValue.length) { range.setStart(Etb, Xpa); range.setEnd(Etb, Xpa + Dtb.length); } else { range = SSDOM.getNodesForText(Etb, Xpa, Dtb); } } } return range; } catch(ignore) { var range = SSDOM.getRangeObject(); range.setStart(p_sel.anchorNode, p_sel.anchorOffset); range.setEnd(p_sel.anchorNode, p_sel.anchorOffset); return range; }};SSDOM.getNodesForText = function(dMb, zfb, JOb){ var range = SSDOM.getRangeObject(dMb.ownerDocument.body); range.setStart(dMb, zfb); range.setEnd(dMb, zfb); var wzb = 0; var bpa = JOb.length + zfb; var Yub = dMb; while(Yub != null && wzb < bpa) { if(Yub.nodeType == 3) { var Dtb = Yub.nodeValue; wzb += Dtb.length; } if(wzb < bpa) { Yub = SSDOM.getNextTextNodeNoBlank(Yub, false, null); } else { var epa = wzb - bpa; range.setEnd(Yub, Yub.nodeValue.length - epa); } } return range;};SSDOM.getSelectionObject = function(){ var bRb = null; if(window.getSelection) {if(Yja!=null) { return null; } var gRb = window.getSelection(); var hRb = null; if(!gRb.isCollapsed) { hRb = gRb; } else { gRb = SSDOM.getFrameSelectionSFF(window); if(gRb.hRb) { hRb = gRb.hRb; } } if(hRb == null) { return null; } bRb = hRb; } else if(document.selection) {var range = document.selection.createRange(); if(range.text.length > 0) { FVb = window; bRb = range; } else { var OAc = SSDOM.getFrameSelectionOldIE(window); if(OAc.bRb) { bRb = OAc.bRb; } } } return bRb;};SSDOM.getPageText = function(){ var Dtb =""; if (SSDOM.bIEOld) { var range = document.body.createTextRange(); range.expand("textedit"); Dtb = range.text; } else { var range = document.createRange(); range.setStartBefore(document.body); range.setEndAfter(document.body); Dtb = range.toString(); } return Dtb;};SSDOM.getTextFromElement = function(dsb){ if(dsb.textContent) { return dsb.textContent; } else if(dsb.innerText) { return dsb.innerText; } else { return""; }};SSDOM.getRangeObject = function(HWb){ if(typeof(HWb) =='undefined'|| HWb == null) { HWb = document.body; } if (SSDOM.bIEOld) { return HWb.createTextRange(); } else { var lub = HWb.ownerDocument; return lub.createRange(); }};SSDOM.getBody = function(dsb){ if(dsb.document) { return dsb.document.body; } else { return dsb.ownerDocument.body; }};SSDOM.getWindow = function(dsb){ try { if(dsb == null) { return window; } if(top.frames.length === 0) { return window; } else { var lpa = dsb.ownerDocument.body; var mpa = window.document.body; if(lpa === mpa) { return window; } if(!uda) { var i; var wzb = top.frames.length; for(i = 0; i<wzb; i++) { try { var WWb = top.frames[i].document.body; if(WWb === lpa) { return top.frames[i]; } } catch(e) { } } } } } catch(err) { Kya("Error getWindow: "+ err); } return window;};SSDOM.splitText = function(dsb, Adb){ if(dsb == null || dsb.nodeType != 3 || dsb.parentNode == null) { return dsb; } var ppa = 0; var xjb = dsb.parentNode; var rpa = xjb.parentNode; if(rpa != null && xjb.tagName.toLowerCase() =="span"&& rpa.tagName.toLowerCase() =="span"&& xjb.getAttribute(daa) != null && (rpa.getAttribute(daa) != null || rpa.getAttribute(eaa) != null)) { ppa = 2; if(dsb.nextSibling != null || dsb.previousSibling != null) { ppa = 1; } } else if(xjb.tagName.toLowerCase() =="span"&& (xjb.getAttribute(daa) != null || xjb.getAttribute(eaa) != null)) { ppa = 1; } if(dsb.nodeValue.length == 0 || Adb <= 0 || Adb >= dsb.nodeValue.length) { if(ppa == 0) { var span = document.createElement("span"); span.setAttribute(daa,"1"); var ypa = document.createElement("span"); ypa.setAttribute(daa,"1"); xjb.insertBefore(span, dsb); span.appendChild(ypa); ypa.appendChild(dsb); } else if(ppa == 1) { var span = document.createElement("span"); span.setAttribute(daa,"1"); xjb.insertBefore(span, dsb); span.appendChild(dsb); } return dsb; } var Dtb = dsb.nodeValue; var IDb = Dtb.substring(0, Adb); var JDb = Dtb.substring(Adb); var ypa = document.createElement("span"); var zpa = document.createElement("span"); var SDb = document.createTextNode(IDb); var MDb = document.createTextNode(JDb); ypa.appendChild(SDb); zpa.appendChild(MDb); ypa.setAttribute(daa,"1"); zpa.setAttribute(daa,"1"); if(ppa == 2) { rpa.insertBefore(zpa, xjb); rpa.insertBefore(ypa, zpa); rpa.removeChild(xjb); } else if(ppa == 1) { xjb.insertBefore(ypa, dsb); xjb.insertBefore(zpa, dsb); xjb.removeChild(dsb); } else { var span = document.createElement("span"); span.setAttribute(daa,"1"); span.appendChild(ypa); span.appendChild(zpa); xjb.insertBefore(span, dsb); xjb.removeChild(dsb); } return MDb;};SSDOM.createObjectWithNameAttr = function(Mwb, p_attrList, dpb, p_strClass, p_strNameAttr){ if(SSDOM.bIEOld) { return SSDOM.createObject("<"+ Mwb +" name='"+ p_strNameAttr +"'>", p_attrList, dpb, p_strClass); } else { var TAc = SSDOM.createObject(Mwb, p_attrList, dpb, p_strClass); TAc.setAttribute("name",p_strNameAttr); TAc.name = p_strNameAttr; return TAc; }};SSDOM.createObject = function(Mwb, p_attrList, dpb, p_strClass){ var Pza = document.createElement(Mwb); if(dpb != null) { Pza.id = dpb; } if(p_strClass != null) { Pza.className = p_strClass; } if(p_attrList != null) { var wzb = p_attrList.length; if(SSDOM.bIEOld) { for(var i = 0; i < wzb; i += 2) { if(p_attrList[i] =="style") { SSDOM.setStyle(Pza, p_attrList[i + 1]); } else { Pza.setAttribute(p_attrList[i], p_attrList[i + 1]); } } } else { for(var i = 0; i < wzb; i += 2) { Pza.setAttribute(p_attrList[i], p_attrList[i + 1]); } } } return Pza;};SSDOM.createObjectFromMap = function(Mwb, p_attrMap, dpb, p_strClass){ var Pza = document.createElement(Mwb); if(dpb != null) { Pza.id = dpb; } if(p_strClass != null) { Pza.className = p_strClass; } if(p_attrMap != null) { if(SSDOM.bIEOld) { for(var i in p_attrMap) { if(i =="style") { SSDOM.setStyle(Pza, p_attrMap[i]); } else { Pza.setAttribute(i, p_attrMap[i]); } } } else { for(var i in p_attrMap) { Pza.setAttribute(i, p_attrMap[i]); } } } return Pza;};SSDOM.setStyle = function(p_theObj, p_strStyles){ var Hqa = p_strStyles.indexOf(":"); var Iqa = p_strStyles.indexOf(";", Hqa); var Oqb; var yXb; var sgb = p_strStyles; while(Hqa > -1) { Oqb = sgb.substring(0, Hqa); if(Iqa > -1) { yXb = sgb.substring(Hqa + 1, Iqa); sgb = sgb.substr(Iqa + 1); Hqa = sgb.indexOf(":"); Iqa = sgb.indexOf(";", Hqa); } else { yXb = sgb.substr(Hqa + 1); Hqa = -1; } if(SSDOM.bIE) { if(Oqb ==" background-position") { Oqb =" backgroundPosition"; } } eval("p_theObj.style."+ Oqb +"=\""+ yXb +"\";"); }};SSDOM.addContentToPage = function(p_strHTML, p_strTag){ var element = document.createElement(p_strTag); element.innerHTML = p_strHTML; document.body.appendChild(element);};SSDOM.addContentToPageWithAttr = function(p_strHTML, p_strTag, p_astrAttr){ var element = document.createElement(p_strTag); var wzb = p_astrAttr.length; for(i = 0; i < wzb; i += 2) { element.setAttribute(p_astrAttr[i], p_astrAttr[i + 1]); } element.innerHTML = p_strHTML; document.body.appendChild(element);};SSDOM.moveCaret = function(lfb, p_nCount, p_bGoByStyle){ var Yub; var node = lfb.node; var Tyb = lfb.offset; var Pqa = lfb.forwardBias; if(node.nodeType != 3) { return null; } while(node) { var wzb = node.nodeValue.length; if(wzb == 0) { if(p_nCount > 0 || (p_nCount == 0 && Pqa)) { Yub = SSDOM.getNextTextNodeNoImg(node, p_bGoByStyle, null, true); if(Yub==null) { if(p_nCount == 0) { return new Xqa(node, node.nodeValue.length, Pqa); } else { return null; } } node = Yub; Tyb=0; } else { Yub = SSDOM.getPreviousTextNodeNoImg(node, p_bGoByStyle, null, true); if(Yub==null) { if(p_nCount == 0) { return new Xqa(node, 0, Pqa); } else { return null; } } node = Yub; Tyb=node.nodeValue.length; } } else { Tyb += p_nCount; if(Tyb<0 || (Tyb==0 && !Pqa)) { p_nCount = Tyb; Yub = SSDOM.getPreviousTextNodeNoImg(node, p_bGoByStyle, null, true); if(Yub==null) { if(p_nCount == 0) { return new Xqa(node, 0, Pqa); } else { return null; } } node = Yub; Tyb=node.nodeValue.length; } else if(Tyb>wzb || (Tyb==wzb && Pqa)) { p_nCount = Tyb - wzb; Yub = SSDOM.getNextTextNodeNoImg(node, p_bGoByStyle, null, true); if(Yub==null) { if(p_nCount == 0) { return new Xqa(node, node.nodeValue.length, Pqa); } else { return null; } } node = Yub; Tyb=0; } else { return new Xqa(node, Tyb, Pqa); } } } return null;};SSDOM.insertAfter = function(dsb, p_newNode){ var parent = dsb.parentNode; if(dsb.nextSibling != null) { parent.insertBefore(p_newNode, dsb.nextSibling); } else { parent.appendChild(p_newNode); }};SSDOM.mergeTextNodes = function(dsb){ if(dsb == null) { return dsb; } var HHb = dsb.parentNode; if(HHb != null && dsb.nodeType == 3) { var lub = dsb.ownerDocument; while(dsb.previousSibling != null && dsb.previousSibling.nodeType == 3) { var Dtb = dsb.previousSibling.nodeValue + dsb.nodeValue; var Olb = lub.createTextNode(Dtb); HHb.removeChild(dsb.previousSibling); HHb.replaceChild(Olb, dsb); dsb = Olb; } while(dsb.nextSibling != null && dsb.nextSibling.nodeType == 3) { var Dtb = dsb.nodeValue + dsb.nextSibling.nodeValue; var Olb = lub.createTextNode(Dtb); HHb.removeChild(dsb.nextSibling); HHb.replaceChild(Olb, dsb); dsb = Olb; } } return dsb;};function Xqa(dsb, zfb, esb){ this.node = dsb; this.offset = zfb; this.forwardBias = esb; this.specialCase = false; if(SSDOM.isSpecialCase(this.node)) { this.specialCase = true; this.offset = 0; }}Xqa.prototype.setSpecialCase = function(p_bSpecialCase){ this.specialCase = p_bSpecialCase;};Xqa.prototype.isSpecialCase = function(){ return this.specialCase;};Xqa.prototype.check = function(){ var Mgb = true; if(this.node == null || this.node.parentNode == null) { Mgb = false; } else { if( this.node.nodeType != 3) { if(this.node.nodeType == 1 && this.specialCase) { } else { Mgb = false; } } else if(this.offset < 0 || this.offset >this.node.nodeValue.length) { Mgb = false; } } return Mgb;};Xqa.prototype.toString = function(){ var Dtb ="TH"+"Caret "; if(this.node != null) { if(this.node.nodeType == 3) { Dtb += this.node.nodeValue +" "+ this.node.parentNode.tagName +" "; } else if(this.node.nodeType == 1) { Dtb += this.node.tagName +" "; } } Dtb += this.offset; return Dtb;};Xqa.prototype.equals = function(lfb){ if(lfb == null) { return false; } return this.node == lfb.node && this.offset == lfb.offset && this.forwardBias == lfb.forwardBias;};Xqa.prototype.clone = function(){ return new Xqa(this.node, this.offset, this.forwardBias);};function dqa(eNb, fNb){ this.efb = eNb; this.ffb = fNb;}dqa.prototype.equals = function(UPb){ if(UPb == null) { return false; } return this.efb.equals(UPb.efb) && this.ffb.equals(UPb.ffb);};dqa.prototype.toString = function(){ return SSDOM.getTextOverCaretRange(this);};function hqa(iqa){ this.command = null; this.NEb = null; if(iqa != null) { var hzb = iqa.indexOf(":"); if(hzb > -1) { this.command = iqa.substr(0, hzb).toLowerCase(); this.NEb = iqa.substr(hzb + 1); } else { this.command = iqa.toLowerCase(); } }}hqa.prototype.CMD_LIST ="list";hqa.prototype.CMD_STOP ="stop";hqa.prototype.CMD_STOPAFTER ="stopafter";hqa.prototype.CMD_JUMP ="jump";hqa.prototype.CMD_JUMPBACK ="jumpback";hqa.prototype.CMD_VOICE ="voice";hqa.prototype.CMD_PAGEID ="pageid";hqa.prototype.CMD_BOOKID ="bookid";hqa.prototype.CMD_EXEC ="exec";hqa.prototype.CMD_EXECAFTER ="execafter";function mqa(dsb){ var jqa = []; if(dsb != null) { var Lob = dsb.ownerDocument.body; var OAc = dsb; if(OAc.nodeType == 3) { OAc = OAc.parentNode; } if(OAc.nodeType != 1) { return jqa; } while(OAc != null && OAc != Lob) { if(OAc.getAttribute("texthelpCmd") != null) { var Hfb = OAc.getAttribute("texthelpCmd").trimTH(); if(Hfb == hqa.prototype.CMD_LIST || Hfb == (hqa.prototype.CMD_LIST +":")) { var Dwb = 1; Hfb = OAc.getAttribute(("texthelpCmd"+ Dwb)); while(Hfb != null) { jqa.push(new hqa(Hfb)); ++Dwb; Hfb = OAc.getAttribute(("texthelpCmd"+ Dwb)); } } else { jqa.push(new hqa(Hfb)); } break; } OAc = OAc.parentNode; } } return jqa;}function sqa(dsb){ if(dsb != null) { var Lob = dsb.ownerDocument.body; var OAc = dsb; if(OAc.nodeType == 3) { OAc = OAc.parentNode; } if(OAc.nodeType != 1) { return null; } while(OAc != null && OAc != Lob) { if(OAc.getAttribute("texthelpCmd") != null) { return OAc; } OAc = OAc.parentNode; } } return null;}function zqa(XMb){ if(Cga) { var Wyb = XMb.getCaretRange(); if(Wyb != null) { var vqa = mqa(Wyb.ffb.node); if(vqa.length > 0) { var DTb = false; for(var i=0; i<vqa.length; i++) { var cmd = vqa[i]; if(cmd.command == cmd.CMD_STOP) { DTb = true; } else if(cmd.command == cmd.CMD_STOPAFTER) { XMb.allowContinuous = false; } else if(cmd.command == cmd.CMD_JUMP) { XMb.jumpId = cmd.NEb; } else if(cmd.command == cmd.CMD_VOICE) { XMb.voice = cmd.NEb; } else if(cmd.command == cmd.CMD_PAGEID) { XMb.pageId = cmd.NEb; } else if(cmd.command == cmd.CMD_BOOKID) { XMb.bookId = cmd.NEb; } else if(cmd.command == cmd.CMD_EXEC) { try { eval(cmd.NEb); } catch(err) { thLogE(err.message); } } else if(cmd.command == cmd.CMD_EXECAFTER) { var yqa ="try{eval(\""+ cmd.NEb +"\");}catch(err){thLogE(err.message);}"; bIb.push(yqa); } } if(DTb) { XMb.valid = false; } } } }}SpeechStream.DateFilterModes = {DATE:2,NUMBER:1,NONE:0};SpeechStream.dateFilter = new function(){ var Bra = 2; var Cra = SpeechStream.DateFilterModes; var Dra = /^[ ,.?!;:\x27\x22\x28\x29\x5b\x5d\x7b\x7d\x82\x91\x92\x93\x94]+|[ ,.?!;:\x27\x22\x28\x29\x5b\x5d\x7b\x7d\x82\x91\x92\x93\x94]+$/g;this.setMode = function(p_nMode) { var Era = parseInt(p_nMode, 10); if(Era == Cra.NONE || Era == Cra.NUMBER || Era == Cra.DATE) { Bra = Era; } else if(typeof(p_nMode) =="string") { var Fra = p_nMode.toUpperCase(); if(Fra =="NONE") { Bra = Cra.NONE; } else if(Fra =="NUMBER") { Bra = Cra.NUMBER; } else if(Fra =="DATE") { Bra = Cra.DATE; } } };this.getMode = function() { return Bra; };this.checkDatesFromString = function(Gwb) { var ibb = false; var wordList = Gwb.split(" "); ibb = this.checkDatesFromList(wordList); if(ibb) { var wzb = wordList.length; var fUb =""; for(i=0; i<wzb - 1; i++) { fUb += wordList[i]; fUb +=" "; } fUb += wordList[wzb - 1]; return fUb; } else { return Gwb; } };this.checkDatesFromList = function(rwb) { var Ovb; var ibb = false; var wzb = rwb.length; var i; for(i=0; i<wzb; i++) { Ovb = Vra(rwb[i]); if(Ovb != rwb[i]) { rwb[i] = Ovb; ibb = true; } } return ibb; };function Ora(wqb) { var Fib; switch(Bra) { case 0: Fib = wqb; break; case 1: if(Sra(wqb)) { Fib =" "+ wqb.substring(0, 1) +","+ wqb.substring(1, 4) +" "; } else { Fib = wqb; } break; case 2: if(Sra(wqb)) { var wgb = parseInt(wqb, 10); var Rra = parseInt(wqb.substring(2,4), 10); if(wgb < 1000) { Fib = wqb; } else if( ( (wgb >= 1000 && wgb < 2000) || wgb >= 2100 ) && Rra == 0 ) { Fib =" "+ wqb.substring(0, 2) +" hundred "; } else if( ( (wgb >= 1000 && wgb < 2000) || wgb >= 2100 ) && ( Rra > 0 && Rra < 10 ) ) { Fib =" "+ wqb.substring(0, 2) +" oh "+ wqb.substring(3, 4) +" "; } else if( ( (wgb >= 1000 && wgb < 2000) || wgb >= 2010 ) && Rra >= 10 ) { Fib =" "+ wqb.substring(0, 2) +" "+ wqb.substring(2, 4) +" "; } else if(wgb == 2000) { Fib =" two thousand "; } else if(wgb > 2000 && wgb < 2010) { Fib =" two thousand and "+ wqb.substring(3, 4) +" "; } else { Fib = wqb; } } else { Fib = wqb; } break; default: Fib = wqb; break; } return Fib; }; function Sra(wqb) { if(wqb.length == 4) { if(!isNaN(wqb)) { if(parseInt(wqb, 10) >= 1000) { return true; } } } return false; };function Vra(Gwb) { if(Gwb == null) { return Gwb; } var QBc = Gwb.replace(Dra,''); if(QBc.length == 4) { var fUb = Ora(QBc); if(fUb != QBc) { var n = Gwb.indexOf(QBc); return Gwb.substring(0, n) + fUb + Gwb.substring(n + 4); } } return Gwb; };};var Yra = -1;var Zra = 0;var ara = 1;var bra = 2;var cra = 3;var dra = 4;var era = 5;var fra = 6;var gra = 7;var hra = 8;function ira(dMb, pra, kSb, qra){ this.body = dMb.ownerDocument.body; this.UAc = new Xqa(dMb, pra, true); this.VAc = new Xqa(kSb, qra, false); this.xnb = XTb(dMb, pra); this.ynb = XTb(kSb, qra);}ira.prototype.refresh = function(){ with (this) { if(UAc.check() == false || VAc.check() == false) { var ABc = SSDOM.getCaretPairFromDomPosition(this.body, this.xnb.path, this.xnb.offset, this.ynb.path, this.ynb.offset); var UAc = ABc.efb; var VAc = ABc.ffb; if(UAc == null && VAc == null) { UAc = new Xqa(document.body, 0, true); VAc = new Xqa(document.body, 0, false); } else if(UAc == null || VAc == null) { if(UAc == null) { UAc = new Xqa(VAc.node, VAc.offset, true); } else { VAc = new Xqa(UAc.node, UAc.offset, false); } } } }};ira.prototype.toString = function(){ this.refresh(); var range = SSDOM.getRangeObject(this.body); range.setStart(this.UAc.node, this.UAc.offset); range.setEnd(this.VAc.node, this.VAc.offset); return range.toString();};ira.prototype.getStartAsRange = function(){ var range = SSDOM.getRangeObject(this.body); range.setStart(this.UAc.node, this.UAc.offset); range.setEnd(this.UAc.node, this.UAc.offset); return range;};ira.prototype.getEndAsRange = function(){ var range = SSDOM.getRangeObject(this.body); range.setStart(this.VAc.node, this.VAc.offset); range.setEnd(this.VAc.node, this.VAc.offset); return range;};ira.prototype.equals = function(XMb){ return (this.xnb.path == XMb.xnb.path && this.xnb.offset == XMb.xnb.offset && this.ynb.path == XMb.ynb.path && this.ynb.offset == XMb.ynb.offset);};ira.prototype.compareRange = function(XMb){ if(this.equals(XMb)) { return Zra; } this.refresh(); XMb.refresh(); var ura = this.getStartAsRange(); var vra = this.getEndAsRange(); var wra = XMb.getStartAsRange(); var xra = XMb.getEndAsRange(); var yra = ura.compareBoundaryPoints("START_TO_START", wra); var zra = ura.compareBoundaryPoints("START_TO_START", xra); var Asa = vra.compareBoundaryPoints("START_TO_START", wra); var Bsa = vra.compareBoundaryPoints("START_TO_START", xra); var ddb = Yra; if(zra > -1) { ddb = ara; } else if(Asa < 1) { ddb = bra; } else if(yra == -1) { if(Bsa == -1) { ddb = fra; } else { ddb = cra; } } else if(yra == 0) { if(Bsa == -1) { ddb = gra; } else if(Bsa == 0) { ddb = Zra; } else { ddb = cra; } } else { if(Bsa == -1) { ddb = dra; } else if(Bsa == 0) { ddb = hra; } else { ddb = era; } } return ddb;};function THDomRefPt(Isa, zfb){ this.path = Isa; this.offset = zfb;}THDomRefPt.prototype.toString = function(){ return"THDomRefPt "+ this.path +" "+ this.offset;};function THHoverTarget(HWb, Isa, Jsa){ this.body = HWb; this.path = Isa; this.range = Jsa; this.bUb = null; this.blockCache = false; this.textToSpeak = null; this.textToSpeakNoChanges = null; this.allowContinuous = true; this.useHighlighting = true; this.prepared = false; this.valid = true; this.jumpId = null; this.voice = null; this.pageId = null; this.bookId = null;}THHoverTarget.prototype.isRange = function(){ return this.range != null; };THHoverTarget.prototype.isValid = function(){ return this.valid && !Kga;};THHoverTarget.prototype.isOverridingGlobal = function(){ return this.voice != null || this.pageId != null || this.bookId != null;};THHoverTarget.prototype.getCaretRange = function(){ var ABc; if(this.isRange()) { ABc = SSDOM.getCaretPairFromDomPosition(this.range.body, this.range.xnb.path, this.range.xnb.offset, this.range.ynb.path, this.range.ynb.offset); } else { var caret = SSDOM.getCaretFromDomPosition(this.body, this.path, -1, true); ABc = new dqa(caret, caret); } return ABc;};THHoverTarget.prototype.getTextPreparedForSpeech = function(){ this.prepareTextForSpeech(); return this.textToSpeak;};THHoverTarget.prototype.prepareTextForSpeech = function(){ if(this.prepared) { return; } var Msa; var Nsa; if(this.isRange()) { this.bUb = new Array(); var Osa = mMb(this.range.body, this.range.xnb, this.range.ynb, this.bUb); this.voice = Osa.voice; if(Osa.ABc != null) { var FNb = Osa.ABc; this.range = RPb(FNb); } Msa = Osa.Dtb; Nsa = Osa.JMb; } else { var caret = SSDOM.getCaretFromDomPosition(this.body, this.path, -1, true); if(caret != null && caret.node != null) { var Rsa = qTb(caret.node); if(Rsa.trimTH().length == 0) { Msa =""; Nsa =""; } else { if(Fda) { this.voice = yIb(caret.node); } else { this.voice = null; } var KNb = new SpeechStream.SpeechRequest(); KNb.setString(Rsa, SpeechStream.SpeechRequestBookmarks.OUTER); Msa = KNb.getFinalText(); Nsa = KNb.getText(); } } else { Msa =""; Nsa =""; } } this.textToSpeak = Msa; this.textToSpeakNoChanges = Nsa; this.prepared = true;};THHoverTarget.prototype.highlightRange = function(){ try { if(this.range != null) { var ABc = SSDOM.getCaretPairFromDomPosition(this.range.body, this.range.xnb.path, this.range.xnb.offset, this.range.ynb.path, this.range.ynb.offset); var efb = ABc.efb; var ffb = ABc.ffb; if(efb != null && ffb != null) { rw_setSpeechRangeImpl(efb.node, efb.offset, ffb.node, ffb.offset,"sp"); } else { } } } catch(err) { Kya("Error in THHoverTargetClass:highlightRange: "+ err.message); }};THHoverTarget.prototype.unhighlightRange = function(){ try { if(this.range != null) { var ABc = SSDOM.getCaretPairFromDomPosition(this.range.body, this.range.xnb.path, this.range.xnb.offset, this.range.ynb.path, this.range.ynb.offset); var efb = ABc.efb; var ffb = ABc.ffb; if(efb != null && ffb != null) { rw_removeSpeechHighlight(SSDOM.getListOfHighlightableNodes(efb, ffb), false); } else { } } } catch(err) { Kya("Error in THHoverTarget:unhighlightRange: "+err.message); }};THHoverTarget.prototype.equals = function(Bob){ if(Bob == null) { return false; } if(this.isRange() != Bob.isRange()) { return false; } if(this.isRange()) { return this.range.equals(Bob.range); } else { return this.path.equalsTH(Bob.path); }};THHoverTarget.prototype.equalsAprox = function(Bob){ if(Bob == null) { return false; } if(this.isRange() != Bob.isRange()) { return false; } if(this.isRange()) { if(this.range.equals(Bob.range)) { return true; } var r1 = this.getCaretRange(); var r2 = Bob.getCaretRange(); r1 = xta(r1); r2 = xta(r2); return r1.equals(r2); } else { return this.path.equalsTH(Bob.path); }};THHoverTarget.prototype.toString = function(){ var Dtb ="THHoverTarget "; if(this.path != null) { Dtb+="path="+ this.path; } else if(this.range != null) { Dtb+= this.range.toString(); } return Dtb;};SpeechStream.pronunciation = new function(){ this.NONE = 0; this.SERVER_PRONUNCIATION = 1; this.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE = 2; this.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER = 3; this.mode = this.SERVER_PRONUNCIATION; this.checkPronunciation = function() { return (this.mode != this.NONE && SpeechStream.cacheMode.mode != SpeechStream.cacheMode.CACHE_ONLY && this.mode != this.SERVER_PRONUNCIATION); }; this.fetchData = function() { if(this.mode == this.NONE || SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY) { return false; } if(this.mode != this.SERVER_PRONUNCIATION) { return true; } else { if( (jca & pronCreate_icon) == pronCreate_icon || (jca & pronEdit_icon) == pronEdit_icon ) { return true; } } return false; }; this.encodeData = function() { return (this.mode != this.NONE && this.mode != this.SERVER_PRONUNCIATION); }; this.setPronunciation = function(p_nMode) { if(p_nMode == this.NONE || p_nMode == this.SERVER_PRONUNCIATION || p_nMode == this.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE || p_nMode == this.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { this.mode = p_nMode; } };}; SpeechStream.Dictionary = function(){function asa(rsa) { return(this["+"+ rsa]); }function dsa(rsa) { var isa ="+"+ rsa; this[isa] = null; delete this[isa]; var hzb = this.Keys$__.indexOf(rsa); if(hzb > -1) { this.Keys$__.splice(hzb, 1); } hzb = this.AllPageKeys$__.indexOf(rsa); if(hzb > -1) { this.AllPageKeys$__.splice(hzb, 1); } if(rsa.indexOf(" ") > -1) { var hzb = rsa.indexOf(" "); var yOb = rsa.substring(0, hzb); hzb = this.MultiwordStart$__.indexOf(yOb); if(hzb > -1) { this.MultiwordStart$__.splice(hzb, 1); } } }function jsa(rsa, Rwa, msa) { var isa ="+"+ rsa; if(rsa.substr(rsa.length - 3) =="$__") { rsa = rsa.substr(0, rsa.length - 1); } if(rsa != null && rsa.length > 0 && Rwa != null && Rwa.length > 0) { var nsa = false; if(this[isa] != null) { nsa = true; if(msa && !this.isAllPage$__(rsa)) { return; } } this[isa] = Rwa; if(this.Keys$__.indexOf(rsa) == -1) { this.Keys$__[this.Keys$__.length] = rsa; } if(msa) { if(this.AllPageKeys$__.indexOf(rsa) == -1) { this.AllPageKeys$__[this.AllPageKeys$__.length] = rsa; } } else { if(this.AllPageKeys$__.indexOf(rsa) > -1) { this.AllPageKeys$__.splice(this.AllPageKeys$__.indexOf(rsa), 1); } } if(!nsa) { if(rsa.indexOf(" ") > -1) { var hzb = rsa.indexOf(" "); var yOb = rsa.substring(0, hzb); this.MultiwordStart$__.push(yOb); } } } }function qsa(rsa) { return this.AllPageKeys$__.indexOf(rsa) > -1; } this.add$__ = jsa; this.get$__ = asa; this.remove$__ = dsa; this.isAllPage$__ = qsa; this.Keys$__ = new Array(); this.AllPageKeys$__ = new Array(); this.MultiwordStart$__ = new Array();};SpeechStream.Dictionary.prototype.deleteAll = function(){ if(typeof(this.Keys$__) !="undefined") { var Ovb; var i; for(i=0; i< this.Keys$__.length; i++) { Ovb = this.Keys$__[i]; this["+"+ Ovb] = null; delete this["+"+ Ovb]; } this.Keys$__ = new Array(); this.AllPageKeys$__ = new Array(); this.MultiwordStart$__ = new Array(); }};function THRange(HWb, vsa, wsa){ this.body = HWb; this.xnb = vsa; this.ynb = wsa;}THRange.prototype.equals = function(XMb){ return ( this.body == XMb.body && this.xnb.path == XMb.xnb.path && this.xnb.offset == XMb.xnb.offset && this.ynb.path == XMb.ynb.path && this.ynb.offset == XMb.ynb.offset);};THRange.prototype.toString = function(){ var range = this.getAsRange(); if(range != null) { if(Ufa) { return this.getAsRange().text; } else { return this.getAsRange().toString(); } } else { return""; }};THRange.prototype.getAsRange = function(){ var range = null; if(Ufa) { range = rw_getAsTextRange(this.body, this.xnb.path, this.xnb.offset, this.ynb.path, this.ynb.offset); } else { range = SSDOM.getRangeObject(this.body); var ABc = SSDOM.getCaretPairFromDomPosition(this.body, this.xnb.path, this.xnb.offset, this.ynb.path, this.ynb.offset); var UAc = ABc.efb; var VAc = ABc.ffb; if(UAc != null && VAc != null) { range.setStart(UAc.node, UAc.offset); range.setEnd(VAc.node, VAc.offset); } else { range = null; Kya("Error in THRange:getAsRange: Failed to get the start or end caret."); } } return range;};THRange.prototype.clone = function(){ return new THRange(this.body, this.xnb, this.ynb);};SpeechStream.SpeechRequestBookmarks = {NONE:0, OUTER:1, ALL:2};SpeechStream.SpeechRequest = function(){ this.m_strText = null; this.m_strFinalText = null; this.m_bChanged = false; this.m_wordList = null;};SpeechStream.SpeechRequest.prototype.setString = function(Gwb, p_nBookmarks){ var wordList = Gwb.split(" "); var i; var wzb = wordList.length - 1; for(i=0; i<wzb; i++) { wordList[i] = wordList[i] +" "; } this.setWordList(wordList, p_nBookmarks);};SpeechStream.SpeechRequest.prototype.setWordList = function(rwb, p_nBookmarks){ var Cta = null; if(typeof(eba_build_cache_for_external_use) =="boolean"&& eba_build_cache_for_external_use) { var OAc =""; var wzb = rwb.length; for(i=0; i<wzb; i++) { OAc += rwb[i]; } Cta = OAc; } var ibb = false; if(qfa) { if(jUb(rwb)) { ibb = true; } } if(SpeechStream.dateFilter.getMode() != SpeechStream.DateFilterModes.NONE) { if(SpeechStream.dateFilter.checkDatesFromList(rwb)) { ibb = true; } } this.m_strText = this.buildString(rwb, p_nBookmarks); var Lmb; var i, hzb, XAc, YAc, bSub; var wzb = rwb.length; for(i=0;i<wzb;i++) { var OAc = rwb[i]; hzb = OAc.indexOf("-"); if(hzb > 0) { XAc = OAc.substr(0, hzb); YAc = OAc.substr(hzb + 1); if(YAc.length == 0 || YAc.indexOf("-") > -1) { break; } if(!isNaN(XAc) &&!isNaN (YAc)) { Lmb = [XAc,"to", YAc]; SpeechStream.dateFilter.checkDatesFromList(Lmb); rwb[i] = Lmb.join(" "); ibb = true; bSub = true; } } } if(bSub) { this.m_strFinalText = this.buildString(rwb, p_nBookmarks); } if(SpeechStream.pronunciation.checkPronunciation()) { if(DXb(rwb)) { ibb = true; this.m_strFinalText = this.buildString(rwb, p_nBookmarks); } } this.m_bChanged = ibb; if(this.m_strFinalText == null) { this.m_strFinalText = this.m_strText; } if(Cta != null) { this.m_strText = Cta; }};SpeechStream.SpeechRequest.prototype.buildString = function(rwb, p_nBookmarks){ if(rwb.length == 0) { return""; } var Cmb = (p_nBookmarks == SpeechStream.SpeechRequestBookmarks.ALL); var Kta = (p_nBookmarks == SpeechStream.SpeechRequestBookmarks.OUTER); var OAc =""; var wzb = rwb.length; if(Kta) { OAc += pKb +"0"+ qKb; } for(i=0; i<wzb; i++) { if(Cmb) { OAc += pKb + i + qKb; } if(SpeechStream.pauseHandler.hasPauseKey(rwb[i])) { var Nta = RNb(rwb[i]); var Ota = SpeechStream.pauseHandler.decodedPause(Nta); OAc += Ota.join(""); } else { OAc += RNb(rwb[i]); } } if(Kta || Cmb) { OAc += pKb + wzb + qKb; } return OAc;};SpeechStream.SpeechRequest.prototype.isChanged = function(){ return this.m_bChanged;};SpeechStream.SpeechRequest.prototype.getFinalText = function(){ return this.m_strFinalText;};SpeechStream.SpeechRequest.prototype.getText = function(){ return this.m_strText;};var Pta = null;var Qta = null;function $rw_event_click(event, i){ return $rw_event_hover(event, i);}function $rw_isTouchDevice(){ return bfa;}function $rw_event_hover(event, i){ if(sda && Yfa) { $rw_tagSentences(); } if(!kea) { return; } if(!Aea) { if(Mda) { throw"The page has not fully loaded, click and speak is not available yet."; } else { hya("The page has not fully loaded, click and speak is not available yet."); } return; } $g_bMouseSpeech = !$g_bMouseSpeech; var Ulb = SpeechStream.EnumIconParameter; if(i > -1) { g_icons[i][Ulb.ICON_TOGGLE_STATE] = $g_bMouseSpeech; if(bfa && !$g_bMouseSpeech) { eza(g_icons[i][Ulb.ICON_NAME],"flat", g_icons[i][Ulb.ICON_OFFSET], true); } else { eza(g_icons[i][Ulb.ICON_NAME],"toggleOn", g_icons[i][Ulb.ICON_OFFSET], true); } } if(nfa && $g_bMouseSpeech) { if(wda > -1 && typeof($rw_event_sticky) !="undefined") { $rw_event_sticky(event, wda); var Sta = wea; wea = 0; HIb("sticky"+"", wda, true); wea = Sta; } } if(!$g_bMouseSpeech) { if(Qga) { window.postMessage( { type:"1757FROM_PAGE", command:"saveOnClickHover", settings:{'clickHoverOn': false } },'*'); } dab.enableTouchEvents(false); $rw_event_stop(); PEb(false); REb(false); dab.enableTouchEvents(false); } else { if(Qga) { window.postMessage( { type:"1757FROM_PAGE", command:"saveOnClickHover", settings:{'clickHoverOn': true } },'*'); } PEb(true); dab.enableTouchEvents(true); }}function $rw_isPaused(){ return (kea && dab.getConnector && $rw_isSpeaking() && dab.getConnector() != null && dab.getConnector().isPaused());}function $rw_event_play(){ if(kea) { try { if(g_speakableTextAreaTarget != null) { if($rw_isPaused()) { $rw_event_pause(); return; } if(g_nSpeakableTextAreaTimerId != 0) { clearTimeout(g_nSpeakableTextAreaTimerId); g_nSpeakableTextAreaTimerId = 0; if(g_speakableTextAreaTarget == null) { $rw_event_play(); return; } } var Tta = g_speakableTextAreaTarget; Tta.focus(); g_speakableTextAreaTarget = null; $rw_event_stop(); rw_speakHoverTarget(new THHoverTarget(Tta.ownerDocument.body, SSDOM.getPositionInDom(Tta), null)); } else { if($rw_isPaused()) { $rw_event_pause(); return; } var Uta = sRb(); if(Uta != null && Uta.range != null) { var Zbb = Uta.range; if(Zbb instanceof String) { $rw_event_stop(); rw_speakHoverTarget(Zbb); } else { if(Ufa) { var range = SSDOM.getSelectionObject(); if(range != null) { range.collapse(); range.select(); } } else { var range = SSDOM.getSelectionObject(); if(range != null) { range.collapseToStart(); } } var target = new THHoverTarget(null, null, Zbb); var adb = Zbb.clone(); var Dtb = target.getTextPreparedForSpeech(); var Yta = false; if(!adb.equals(target.range)) { Yta = true; } if(Dtb == null || Dtb.length == 0) { return; } $rw_event_stop(); var Zta; if(Mea) { if(Yta) { Zta = kta(new THHoverTarget(null, null, adb), true); } else { Zta = kta(target, true); } if(Zta == null) { Pea = target; } } else { Zta = target; } if(Zta != null) { target = Zta; rw_speakHoverTarget(target); } else { target.blockCache = !Tda; rw_speakHoverTarget(target); } } } else { if(aca != null || arguments[0]) { $rw_event_stop(); if(Tga == null || bca) { bca = false; $rw_speakFirstSentence(arguments[0]); } else { $rw_speakCurrentSentence(); } } } } } catch(err) { thLogE(err); } }}function kta(XMb, mta){ if(XMb == null) { return null; } Qea = null; var ABc = XMb.getCaretRange(); ABc = xta(ABc); var jOb = mta ? SSDOM.getSentenceFromPointByLang(ABc.efb) : SSDOM.getSentenceFromPoint(ABc.efb); if(jOb == null) { return null; } if(jOb.ffb.node == ABc.ffb.node) { if(jOb.ffb.offset == ABc.ffb.offset) { return null; } var Yub = jOb.ffb.node; if(Yub.nodeType == 3) { var dta = Yub.nodeValue.substring(jOb.ffb.offset, ABc.ffb.offset).trimTH(); if(dta.length == 0) { return null; } } } var eta = mta ? SSDOM.getSentenceFromPointByLang(ABc.ffb) : SSDOM.getSentenceFromPoint(ABc.ffb); if(eta == null) { return null; } if(jOb.equals(eta)) { return null; } else { var fta; if(!Nea) { fta = jOb; jOb = new dqa(ABc.efb, jOb.ffb); } if(!cya(jOb)) { jOb = SSDOM.getNextSentence(jOb, eta.ffb.node); if(jOb == null) { return null; } if(jOb.equals(eta)) { return null; } } if(!cya(eta)) { eta = SSDOM.getPreviousSentence(eta, null); if(eta == null) { return null; } if(jOb.equals(eta)) { return null; } if(fta) { if(fta.equals(eta)) { return null; } } } if(!Nea) { var gta = new dqa(eta.efb, ABc.ffb); Qea = new THHoverTarget(null, null, RPb(gta)); } var hta; var ita; var Zbb = RPb(jOb ); hta = new THHoverTarget(null, null, Zbb); eta = new dqa(xta(eta).efb, eta.ffb); Zbb = RPb(eta ); ita = new THHoverTarget(null, null, Zbb); Pea = ita; return hta; }}function xta(UPb){ var ibb = false; var YNb; var Lgb; var fTb; var Igb; try { var Yub; var tta; if(!UPb.ffb.isSpecialCase()) { YNb = UPb.ffb.node; Lgb = UPb.ffb.offset; var uta = YNb.nodeValue; while(true) { if(Lgb == 0) { Yub = SSDOM.getPreviousTextNode(YNb, false, fTb); if(Yub == null) { break; } if(Yub.nodeType == 1) { YNb = Yub; Lgb = 0; ibb = true; break; } YNb = Yub; uta = YNb.nodeValue; Lgb = uta.length; ibb = true; } if(Lgb > 0) { tta = uta.charAt(Lgb - 1); if(Fya(tta)) { --Lgb; ibb = true; } else { break; } } else { break; } } } if(!UPb.efb.isSpecialCase()) { fTb = UPb.efb.node; Igb = UPb.efb.offset; var vta = fTb.nodeValue; var wzb = vta.length; while(true) { if(Igb == wzb) { Yub = SSDOM.getNextTextNode(fTb, false, YNb); if(Yub == null) { break; } if(Yub.nodeType == 1) { fTb = Yub; Igb = 0; wzb = 0; ibb = true; break; } fTb = Yub; vta = fTb.nodeValue; Igb = 0; wzb = vta.length; ibb = true; } if(Igb < wzb) { tta = vta.charAt(Igb); if(Fya(tta)) { ++Igb; ibb = true; } else { break; } } else { break; } } } } catch(err) { thLogE(err); } if(!ibb) { return UPb; } else { return (new dqa(new Xqa(fTb, Igb, true), new Xqa(YNb, Lgb, false))); }}function $rw_event_funplay(){ $rw_event_play();}var zta = null;function $rw_speakText(Gwb){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; $rw_event_stop(); Gwb = SpeechStream.pauseHandler.encodePauseFromString(Gwb); var KNb = new SpeechStream.SpeechRequest(); KNb.setString(Gwb, SpeechStream.SpeechRequestBookmarks.NONE); var QBc = KNb.getText(); var Hua = KNb.getFinalText(); Iua(Hua, !Uda, QBc);}function $rw_speak(Gwb, p_bNoCache, p_bFilter){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; $rw_event_stop(); if(p_bFilter) { var KNb = new SpeechStream.SpeechRequest(); KNb.setString(Gwb, SpeechStream.SpeechRequestBookmarks.NONE); var QBc = KNb.getText(); var Hua = KNb.getFinalText(); Iua(Hua, p_bNoCache, QBc); } else { Iua(Gwb, p_bNoCache, Gwb); }}function Iua(Gwb, Kua, Lua){ if(!nwa(Gwb)){ return; } if(typeof(eba_no_flash) =="boolean"&& eba_no_flash) { rw_sendSocketMessage("THStart"+ Gwb +"THEnd"); return; } if(Gwb == null && Gwb.length == 0) { $rw_doSelection(-1); return; } if(!kea) { $rw_doSelection(-1); return; } try { Gwb = SpeechStream.stringAssist.filterNbsp(Gwb); if(typeof(Lua) =="undefinded"|| Lua == null ) { Lua = Gwb; } else { Lua = SpeechStream.stringAssist.filterNbsp(Lua); } var flash = dab.getConnector(); if(flash != null) { if(sKb && sKb.isRange()) { PEb(true); REb(true); $rw_doSelection(0); } if(Kua && Nda && Oda) { flash.startSpeechFromBackup(Gwb, !ofa); pwa(); } else { if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY) { var uOb = GPb(); var Wua = GQb(Lua); if(Lga) { uOb = aua(uOb); Wua = dua(Wua); } var Knb; if(Pda) { var APb = HPb(Wua); uOb = uOb +"/"+ APb ; Knb = uOb +"/"+Wua; } else { Knb = uOb +"/"+ Wua; } flash.startSpeechFromCache(Knb, Gwb, false); pwa(); } else if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_WITH_LIVE_SERVER) { var uOb = GPb(); var Wua; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { Wua = GQb(Gwb); } else { Wua = GQb(Lua); } if(Lga) { uOb = aua(uOb); Wua = dua(Wua); } var Knb; if(Pda) { var APb = HPb(Wua); uOb = uOb +"/"+ APb ; Knb = uOb +"/"+Wua; } else { Knb = uOb +"/"+ Wua; } flash.startSpeechFromCacheWithGen(Knb, Gwb, uOb, Wua, !ofa); pwa(); } else if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_BUILDING_MODE) { var uOb = GPb(); var Wua; if(SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { Wua = GQb(Gwb); } else { Wua = GQb(Lua); } if(Lga) { uOb = aua(uOb); Wua = dua(Wua); } var Knb; if(Pda) { var APb = HPb(Wua); uOb = uOb +"/"+ APb ; Knb = uOb +"/"+Wua; } else { Knb = uOb +"/"+ Wua; } var Zua = jya(true) + SpeechStream.cacheMode.getLiveServer() +"/"; flash.startSpeechGenerateCache(Knb, Gwb, uOb, Wua, !ofa, Zua ); pwa(); } else { flash.startSpeech(Gwb, !ofa); pwa(); } } }} catch(err) { thLogE(err); }}function aua(bua){ if(Mga != null) { return Mga; } else { return bua; }}function dua(eua){ if(Nga != null) { return Nga; } else { return eua; }}function gua(Ywa, Gwb){ if(Gwb.indexOf("\n") > -1) { var Bab = jya(true) + nca +"/SpeechCache/"+ Ywa +".xml"; var kua = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"); kua.open("HEAD", Bab, false); kua.send(); return (kua.status == 404); } return false;}function mua(Gwb, VMb){ if(Gwb == null && Gwb.length == 0) { $rw_doSelection(-1); return; } if(!kea) { $rw_doSelection(-1); return; } try { var flash = dab.getConnector(); if(flash != null) { PEb(true); $rw_doSelection(0); flash.startSpeechFromFile(Gwb, VMb, !ofa); pwa(); } } catch(err) { thLogE(err); }}function sua(Gwb){ if(Gwb == null && Gwb.length == 0) { $rw_doSelection(-1); return; } if(!kea) { $rw_doSelection(-1); return; } try { var flash = dab.getConnector(); if(flash != null) { PEb(true); $rw_doSelection(0); flash.startHighlighting(Gwb); } } catch(err) { thLogE(err); }}var g_nPauseEventTimeout = 0;function $rw_event_pause(){ if(g_nPauseEventTimeout > 0) { clearTimeout(g_nPauseEventTimeout); g_nPauseEventTimeout = 0; } if($rw_isSpeaking()) { var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; var flash = dab.getConnector(); if(flash != null) { if(!flash.canPause()) { g_nPauseEventTimeout = setTimeout("g_nPauseEventTimeout=0;$rw_event_pause();", 100); return; } if(flash.isPaused()) { if(!flash.resume()) { g_nPauseEventTimeout = setTimeout("g_nPauseEventTimeout=0;$rw_event_pause();", 100); } } else { if(!flash.pause()) { g_nPauseEventTimeout = setTimeout("g_nPauseEventTimeout=0;$rw_event_pause();", 100); } } } } else { if(HEb) { var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; g_nPauseEventTimeout = setTimeout("g_nPauseEventTimeout=0;$rw_event_pause();", 100); } }}function $rw_event_funstop(){ $rw_event_stop();}function $rw_event_stop(){ if(!kea) { return; } try { if(aga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.hideStopBubble(); } dIb(); Fea = null; Pea = null; if(wLb > 0) { clearTimeout(wLb); wLb = 0; } uLb.length = 0; if(oLb) { setTimeout($rw_event_stop, 100); return; } if(tKb > 0) { clearTimeout(tKb); tKb = 0; } if(uKb > 0) { clearTimeout(uKb); uKb = 0; } PEb(false); REb(false); var flash = dab.getConnector(); if(flash != null) { flash.stopSpeechAlt(); } rKb = null; } catch(err) { thLogE(err); }}function $rw_event_stop_limited(){ if(!kea) { return; } try { dIb(); Fea = null; PEb(false); REb(false); var flash = dab.getConnector(); if(flash != null) { flash.stopSpeechAlt(); } } catch(err) { thLogE(err); }}function $rw_event_mp3(){ try { var zua = null; if(qda != null) { var target = document.getElementById(qda); if(target!= null) { zua = SSDOM.getAllTextFromNode(target); } } else { zua = Qva(); } if(zua != null) { zua = zua.trimTH(); if (zua.length > 0) { if(zua.length > rda) { alert("Too much text was selected for making an MP3 file, there is a "+ (rda/1024) +"k limit."); return; } var flash = dab.getConnector(); if(flash != null) { var Dtb ="<br>The MP3 file for the text is being generated, <br> "+"this could take some time depending on the amount of text selected.<br><p align=\"center\">"+"<img alt=\"loading\" src=\""+ aga.paths.strFileLoc +"rwimgs/request-processing.gif\"> </p>"; bKb(Oba, Dtb); gKb(true, Oba); flash.getMP3File(zua, !ofa); } } } } catch(err) { thLogE(err); }}function $rw_mp3reply(Dtb){ try { if(typeof(eba_mp3_callback) !="undefined") { gKb(false, Oba); eval(""+ eba_mp3_callback +"('"+ Dtb +"')"); } else { if(Dtb.length > 0) { var Szb ="Save Target As..."; if(!Lfa) { if(Xfa) { Szb ="Save Link As..."; } else if(Yfa) { Szb ="Download Linked File"; } else { Szb ="Save Link As..."; } } Dtb ="<br>Right click on the link below and select "+"'"+ Szb +"' to save the mp3 file to your hard drive.<p></p>"+"<a type='application/octet-stream' href=\""+ Dtb +"\">Download speech mp3 file.</a><p></p>"; bKb(Oba, Dtb); gKb(true, Oba); } } } catch(err) { thLogE(err); }}var Dva ="setWarning";function setWarning(){ $rw_lexiSubmitEvent();}function $rw_lexiSubmitEvent(){ vea = true;}function Fva(){ if (Ufa) {var range = document.selection.createRange(); if (range.text.length > 0) { return true; } if(!uda && top.frames.length > 0) { var i = 0; var wzb = top.frames.length; for (i = 0; i < wzb; i++) { try { var Pdb = top.frames[i]; range = Pdb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { return true; } } catch(e) { } } } } else {if(Yja!=null) { return true; } if (window.getSelection() != null && !window.getSelection().isCollapsed) { return true; } if(!uda && top.frames.length > 0) { var i = 0; var wzb = top.frames.length; for (i = 0; i < wzb; i++) { try { if (top.frames[i].getSelection() != null && !top.frames[i].getSelection().isCollapsed) { return true; } } catch(e) { } } } } return false;}function Jva(){ if (Ufa) {var range = document.selection.createRange(); if(range.text == null || range.text.length == 0) { if(!uda && top.frames.length > 0) { var i = 0; var wzb = top.frames.length; for (i = 0; i < wzb; i++) { try { var Pdb = top.frames[i]; range = Pdb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { return range.parentElement(); } } catch(e) { } } } } else { return range.parentElement(); } } else { if(Yja!=null) { return Yja.startContainer; } var gRb = window.getSelection(); if(gRb.isCollapsed || gRb.toString().trimTH().length == 0) { if(wDb && wDb.selectionStart != wDb.selectionEnd) { return wDb; } if(!uda && top.frames.length>0) { var i=0; var wzb = top.frames.length; for(i = 0; i<wzb; i++) { try { var qAc = top.frames[i].getSelection(); if(qAc != null && !qAc.isCollapsed) { return qAc; } } catch(e) { } } } } else { return gRb.focusNode; } } return null;}function Qva(){ var Dtb =''; if (Ufa) {var range = document.selection.createRange(); if (range.text == null || range.text.length == 0) { if(!uda && top.frames.length > 0) { var i = 0; var wzb = top.frames.length; for (i = 0; i < wzb; i++) { try { var Pdb = top.frames[i]; range = Pdb.document.selection.createRange(); if (range.text != null && range.text.length > 0) { break; } } catch(e) { } } } } Dtb = range.text; var adb = range.duplicate(); adb.collapse(); var Tkb = adb.parentElement(); if(SSDOM.isIgnored(Tkb)) { Dtb =""; } } else { if(Yja!=null) { return Yja.toString(); } var gRb = window.getSelection(); if(gRb.isCollapsed || gRb.toString().trimTH().length == 0) { if(wDb && wDb.selectionStart != wDb.selectionEnd) { return wDb.value.substring( wDb.selectionStart, wDb.selectionEnd); } if(!uda && top.frames.length>0) { var i=0; var wzb = top.frames.length; for(i = 0; i<wzb; i++) { try { var qAc = top.frames[i].getSelection(); if(qAc != null && !qAc.isCollapsed) { gRb = qAc; break; } } catch(e) { } } } } if(gRb.anchorNode) { if(SSDOM.isIgnored(gRb.anchorNode)) { return""; } } if(gRb.focusNode && gRb.focusNode.id) { if(gRb.focusNode.id =="flashcontent") { return""; } } if(!gRb.isCollapsed) { Dtb = gRb.toString(); } else { Dtb =""; } } return Dtb;}function Yva(){ PEb(false); REb(false); }var Zva = -1;function $rw_doSelection(NIb){ if (NIb < 0) { if(NIb == -2 && $rw_isSpeaking()) { $rw_speechCompleteCallback("Stopped"); } else if(NIb == -3) { $rw_speechErrorCallback(); } MEb = setTimeout(Yva, 200); TEb(false); if(aga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.hideStopBubble(); } } else { TEb(true); } if(sKb && sKb.isRange()) { if(NIb != Zva) { if (NIb == -1 || NIb == -2 || NIb == -3) { if (Zva > -1 && sKb.bUb != null) { try { var bUb = sKb.bUb; var wzb = bUb.length; if (Zva < wzb) { var Zbb = bUb[Zva].range; var ABc = SSDOM.getCaretPairFromDomPosition(Zbb.body, Zbb.xnb.path, Zbb.xnb.offset, Zbb.ynb.path, Zbb.ynb.offset); var efb = ABc.efb; var ffb = ABc.ffb; if(efb != null && ffb != null) { rw_removeSpeechHighlight(SSDOM.getListOfHighlightableNodes(efb, ffb), true); } else { Kya("Cannot determine valid range to remove speech highlight from. "+ efb +" "+ ffb); } } } catch(err) { Kya("$rw_doSelection:clear last speech:"+ err.toString()); } } Zva = -1; try { sKb.unhighlightRange(); } catch(err){Kya("$rw_doSelection:unhighlightRange:"+ err.message);} } else if(sKb.bUb != null) { if (Zva == NIb) { return; } var bUb = sKb.bUb; var wzb = bUb.length; try { if (Zva > -1 && Zva < wzb) { var Zbb = bUb[Zva].range; var ABc = SSDOM.getCaretPairFromDomPosition(Zbb.body, Zbb.xnb.path, Zbb.xnb.offset, Zbb.ynb.path, Zbb.ynb.offset); var efb = ABc.efb; var ffb = ABc.ffb; if(efb != null && ffb != null) { rw_removeSpeechHighlight(SSDOM.getListOfHighlightableNodes(efb, ffb), true); } else { Kya("Cannot determine valid range to remove speech highlight from. "+ efb +" "+ ffb); } } } catch(err) { thLogE(err); } if (NIb < 0 || NIb >= wzb) { return; } Zva = NIb; var Zbb = bUb[NIb].range; try { var ABc = SSDOM.getCaretPairFromDomPosition(Zbb.body, Zbb.xnb.path, Zbb.xnb.offset, Zbb.ynb.path, Zbb.ynb.offset); var efb = ABc.efb; var ffb = ABc.ffb; if(efb != null && ffb != null) { try { var zvb = false; var rva = SSDOM.getComputedStyle(efb.node); if(rva != null && (rva.display =="none"|| rva.visibility =="hidden")) { zvb = true; } else { var Yub = efb.node; var Lob = Yub.ownerDocument.body; while(Yub != Lob) { Yub = Yub.parentNode; if(SSDOM.getComputedStyle(Yub).display =="none") { zvb = true; break; } } } if(zvb) { var $tmpFunc = function() { $rw_stopSpeech(); $rw_setCurrentTarget(null); }; setTimeout($tmpFunc, 1); return; } } catch(e) {} var result = rw_setSpeechRangeImpl(efb.node, efb.offset, ffb.node, ffb.offset,"csp"); if(result != null && result.node != null) { wRb(result.node); } else { wRb(efb.node); } } else { Kya("Cannot determine valid range to add speech highlight from. "+ efb +" "+ ffb); } } catch(err) { Kya("error with highlight speech range in rw_doSelection:"+ err.message); } } } } if (NIb == -1 || NIb == -2 || NIb == -3) { Zva = -1; sKb = null; var vva = null; if(bIb.length > 0) { vva = new Array(); } while(bIb.length > 0) { if(typeof(bIb[0])=="string") { if(bIb[0].indexOf("$rw_readNextTarget") > -1) { break; } } vva.push(bIb.shift()); } if(NIb == -1) { if(bIb.length > 0) { vva.push(bIb.shift()); } } else if(NIb == -3) { var flash = dab.getConnector(); var xva = flash.getLastError(); var nAc="An error occurred with speech.  "+ xva; if(SpeechStream.actionOnError.action == SpeechStream.EnumActionOnError.SKIP) { Kya(nAc); if(bIb.length > 0) { vva.push(bIb.shift()); } } else { hya(nAc); } } if(vva != null && vva.length > 0) { vIb(vva); } }}function $displayMe(Dtb){ hya(Dtb);}function Cwa(Dwa, Ewa, Fwa, Gwa, a_bool_scrollbars, a_bool_resizable, a_bool_menubar, a_bool_toolbar, a_bool_addressbar, a_bool_statusbar, a_bool_fullscreen){ var zva = (screen.width - Fwa) / 2; var Awa = (screen.height - Gwa) / 2; var Bwa ='height='+ Gwa +',width='+ Fwa +',top='+ Awa +',left='+ zva +',scrollbars='+ a_bool_scrollbars +',resizable='+ a_bool_resizable +',menubar='+ a_bool_menubar +',toolbar='+ a_bool_toolbar +',location='+ a_bool_addressbar +',statusbar='+ a_bool_statusbar +',fullscreen='+ a_bool_fullscreen +''; var Hwa = window.open(Dwa, Ewa, Bwa); if (parseInt(navigator.appVersion, 10) >= 4) { Hwa.window.focus(); }}function Jwa(Xwa){ var start = document.cookie.indexOf(Xwa +"="); var Lwa = start + Xwa.length + 1; if (( !start ) && ( Xwa != document.cookie.substring(0, Xwa.length) )) { return null; } if (start == -1) { return null; } var end = document.cookie.indexOf(";", Lwa); if (end == -1) { end = document.cookie.length; } return unescape(document.cookie.substring(Lwa, end));}function Pwa(Xwa, Rwa, Swa, Ywa, Zwa, Vwa){ var Nwa = new Date(); Nwa.setTime(Nwa.getTime()); if (Swa) { Swa = Swa * 1000 * 60 * 60 * 24; } var Owa = new Date(Nwa.getTime() + (Swa)); document.cookie = Xwa +"="+ escape(Rwa) + ( ( Swa ) ?";expires="+ Owa.toGMTString() :"") + ( ( Ywa ) ?";path="+ Ywa :"") + ( ( Zwa ) ?";domain="+ Zwa :"") + ( ( Vwa ) ?";secure":"");}function Wwa(Xwa, Ywa, Zwa){ if (Jwa(Xwa)) { document.cookie = Xwa +"="+ ( ( Ywa ) ?";path="+ Ywa :"") + ( ( Zwa ) ?";domain="+ Zwa :"") +";expires=Thu, 01-Jan-1970 00:00:01 GMT"; }}function cwa(){ if(eeb()) { var QBc = ldb(); bKb(Sba, QBc); gKb(true, Sba); var mKb = aEb("rwcollatewrapper"); var dwa = document.getElementById("rwCollect"); if(dwa != null) { if(parseInt(mKb.scrollHeight, 10) >= 380) { var rwTextCollect = aEb("rwTextCollect"); rwTextCollect.style.height ="360px"; } else { var rwTextCollect = aEb("rwTextCollect"); rwTextCollect.style.height = (mKb.scrollHeight + 24); } }}}function $rw_event_axendolink(){ document.location ="http://www.browsealoud.info";}function dis(node){ hya(node.tagName +"|"+ node.nodeValue +"|"+ SSDOM.getPositionInDom(node));}function iwa(Mwb, kwa){ if(Mwb == null) { return; } try { var zvb = false; var wzb = Mwb.length; if(wzb > 0) { if(Mwb.charAt(wzb-1) ==")"|| Mwb.substr(wzb-1) ==";") { zvb = true; } } else { return; } if(zvb) { eval(Mwb); } else { try { if(typeof(kwa) !="undefined"&& kwa != null) { eval(Mwb +"("+ kwa +");"); } else { eval(Mwb +"();"); } } catch(innerErr) { eval(Mwb); } } } catch(err) { thLogE(err); }}function lwa(dUb){ try { (new Function(dUb))(); } catch(err) { thLogE(err.message); }}function nwa(Gwb){ if(eba_speech_redirect_callback && typeof(eba_speech_redirect_callback) =="function") { return eba_speech_redirect_callback(Gwb); } return true;}function pwa(){ if(typeof(eba_speech_started_callback) =="string") { iwa(eba_speech_started_callback.trimTH()); }}function $rw_renderingSpeechCallback(){ if(typeof(eba_rendering_speech_callback) =="string") { iwa(eba_rendering_speech_callback.trimTH()); }}function $rw_speechCompleteCallback(p_strParam){ try { if(typeof(p_strParam) =="undefined"|| p_strParam == null) { p_strParam ="Complete"; } if(typeof(eba_speech_complete_callback) =="string") { iwa(eba_speech_complete_callback.trimTH(),"'"+ p_strParam +"'"); } if(Lga && p_strParam =="Complete") { SSAPIP.apipHandler.handleSpeechComplete(); } } catch(e) {}}function $rw_speechErrorCallback(){ try { if(typeof(eba_speech_complete_callback) =="string") { iwa(eba_speech_complete_callback.trimTH(),"'Error'"); } } catch(e) {}}function rw_pageCompleteCallBack(){ try { if(typeof(eba_page_complete_callback) =="string") { iwa(eba_page_complete_callback.trimTH()); } } catch(e) {}} function $rw_event_calculator() { try { bKb(Wba,""); gKb(true, Wba); rw_calClearMem(); rw_calAddDigit('0'); } catch(err) { thLogE(err); } }function $rw_event_recorder(){ try { bKb(aba,""); gKb(true, aba); var rwa = document.getElementById("rw_micDisplay"); rwa.style.visibility="visible"; var swa = document.getElementById("rw_micRecordingOn"); swa.style.visibility="visible"; } catch(err) { thLogE(err); }}function $rw_event_generate_cache(){ try { if(typeof($rwj) =="undefined") { setTimeout($rw_event_generate_cache, 1000); return; } $rwj.blockUI({ message:'<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore> Caching page please wait...</div><br><span id="pb1" ignore>0%</span>'}); $rwj('#pb1').progressBar(0); oia(); } catch(err) { thLogE(err); }}function $rw_event_check_cache(){ try { if(typeof($rwj) =="undefined") { setTimeout($rw_event_check_cache, 1000); return; } $rwj.blockUI({ message:'<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore> Reading Cache please wait...</div><br><span id="pb1" ignore>0%</span>'}); $rwj('#pb1').progressBar(0); Vja(); } catch(err) { $rwj.unblockUI(); thLogE(err); }}function $rw_event_screenmask(event, i){ var Ulb = SpeechStream.EnumIconParameter, isToggled = g_icons[i][Ulb.ICON_TOGGLE_STATE] == true; g_icons[i][Ulb.ICON_TOGGLE_STATE] = !isToggled; xwa(event ? event : window.event);}var uwa = 60;var vwa;function xwa(e){ var wwa = eba_screen_mask_opacity, Gxa = eba_screen_mask_letterbox_depth, viewportWidth = window.innerWidth ? window.innerWidth : $jq(window).width(), viewportHeight = window.innerHeight ? window.innerHeight : $jq(window).height(), posX = e && e.pageX ? e.pageX : 0, posY = e && e.pageY ? e.pageY - $jq(window).scrollTop() : 0, maskTopHeight = posY - Gxa, maskBottomHeight = viewportHeight - posY - Gxa, maskVisible = false, firstTime = false, Exa = null, bottomMask = null; if($jq("#rwMaskTop").length === 0) { Exa = $jq("<div />") .attr("id","rwMaskTop") .addClass("rwScreenMaskOverlay") .css({"opacity": wwa / 100,"top": 0,"height": maskTopHeight +"px"}) .appendTo("body"); if($rw_isTouchDevice()) { upArrow = $jq("<a />") .attr({"id":"rwMaskUpArrow","class":"rwScreenMaskArrow","ignore":"1","href":"#"}) .css({"top":"0"}) .html("<span><img src=\""+ aga.paths.strFileLoc +"/rwimgs/arrow_up.png\" alt=\"\" /></span>") .appendTo("body"); downArrow = $jq("<a />") .attr({"id":"rwMaskDownArrow","class":"rwScreenMaskArrow","ignore":"1","href":"#"}) .css({"top":"50%"}) .html("<span><img src=\""+ aga.paths.strFileLoc +"/rwimgs/arrow_down.png\" alt=\"\" /></span>") .appendTo("body"); $jq(".rwScreenMaskArrow").on("touchstart", function (e) { var ywa = $jq(this).attr("id") ==="rwMaskUpArrow"; Cxa(e, ywa); vwa = setInterval(function () { Cxa(e, ywa); }, 250); }) .on("touchend", function () { clearInterval(vwa); g_lastTapTarget = null; }); Axa = setInterval(Dxa, 100); IKb(); document.getElementById('rwDrag').style.zIndex = 99993; } maskVisible = true; firstTime = true; } else { Exa = $jq("#rwMaskTop"); } if($jq("#rwMaskBottom").length === 0) { bottomMask = $jq("<div />") .attr("id","rwMaskBottom") .addClass("rwScreenMaskOverlay") .css({"opacity": wwa / 100,"bottom": 0,"height": maskBottomHeight +"px"}) .appendTo("body"); maskVisible = true; firstTime = true; } else { bottomMask = $jq("#rwMaskBottom"); } if(maskVisible && firstTime) { if(!$rw_isTouchDevice()) { $jq(document).on("mousemove", Hxa); } } else { maskVisible = Exa.is(":visible"); Axa = setInterval(Dxa, 100); if(maskVisible) { $jq("#rwMaskTop,#rwMaskBottom,#rwMaskUpArrow,#rwMaskDownArrow").hide(); if(!$rw_isTouchDevice()) { $jq(document).off("mousemove"); } else { IKb(); clearInterval(Axa); } } else { $jq("#rwMaskTop,#rwMaskBottom,#rwMaskUpArrow,#rwMaskDownArrow").show(); if(!$rw_isTouchDevice()) { $jq(document).on("mousemove", Hxa); } else { IKb(); } } }}var zwa = null, g_lastTapTarget = null;function Cxa(e, ywa){ if(event.touches.length === 1) { if((g_lastTapTarget === null || e.target === g_lastTapTarget) && (zwa === null || new Date() - zwa > 500)) { g_lastTapTarget = e.target; zwa = new Date(); Fxa(ywa ? (uwa * -1) : uwa); } e.preventDefault(); } return false;}var Axa, g_currentHeight = 0, g_currentWidth = 0;function Dxa(){ var Exa = $jq("#rwMaskTop"), bottomMask = $jq("#rwMaskBottom"), tmHeight = Exa.height(), bmHeight = bottomMask.height(), viewportWidth = window.innerWidth ? window.innerWidth : $jq(window).width(), viewportHeight = window.innerHeight ? window.innerHeight : $jq(window).height(); if(viewportWidth !== g_currentWidth || viewportHeight !== g_currentHeight) { g_currentWidth = viewportWidth; g_currentHeight = viewportHeight; bottomMask.css({"height": (viewportHeight - tmHeight - (eba_screen_mask_letterbox_depth * 2)) +"px"}); }}function Fxa(pixelChange){ var Exa = $jq("#rwMaskTop"), bottomMask = $jq("#rwMaskBottom"), tmHeight = Exa.height(), bmHeight = bottomMask.height(), viewportWidth = window.innerWidth ? window.innerWidth : $jq(window).width(), viewportHeight = window.innerHeight ? window.innerHeight : $jq(window).height(); if(Exa.height() < uwa && pixelChange < 0) { pixelChange = Exa.height() * -1; } if(bottomMask.height() < uwa && pixelChange > 0) { pixelChange = bottomMask.height(); } Exa.animate({"height": (tmHeight + pixelChange) +"px"}, 250); bottomMask.animate({"height": (bmHeight - pixelChange) +"px"}, 250);}function Hxa(e){ var Gxa = eba_screen_mask_letterbox_depth, Exa = $jq("#rwMaskTop"), bottomMask = $jq("#rwMaskBottom"), viewportWidth = window.innerWidth ? window.innerWidth : $jq(window).width(), viewportHeight = window.innerHeight ? window.innerHeight : $jq(window).height(), posX = e.pageX, posY = e.pageY - $jq(window).scrollTop(), maskTopHeight = posY - Gxa, maskBottomHeight = viewportHeight - posY - Gxa; Exa.css({"height": maskTopHeight +"px"}); bottomMask.css({"height": maskBottomHeight +"px"});}function Ixa(Dtb){ if(Dtb == null) { return""; } Dtb = Dtb.trimTH(); var psb =""; var i = 0; var n = Dtb.length; var Ksb = -1; var Lsb = -1; for(i = 0; i < n; i++) { var Wub = Dtb.charCodeAt(i); if((Wub > 64 && Wub < 91) || (Wub > 96 && Wub < 123 )) { if(Ksb == -1) { Ksb = i; } } else { if(Ksb > -1) { if(Wub == 39) { if(i < (n - 1)) { nValNext = Dtb.charCodeAt(i + 1); if((nValNext > 64 && nValNext < 91) || (nValNext > 96 && nValNext < 123 )) { ++i; } else { Lsb = i; break; } } else { Lsb = i; break; } } else { Lsb = i; break; } } } } if(Ksb > -1) { if(Lsb > -1) { psb = Dtb.substring(Ksb, Lsb); } else { psb = Dtb.substring(Ksb); } } return psb;}function Nxa(Dtb){ if(Dtb == null) { return""; } Dtb = Dtb.trimTH(); Dtb = Dtb.replace(/[\s\xA0]+/g," "); var psb =""; var i = 0; var n = Dtb.length; var Ksb = -1; var Lsb = -1; for(i = 0; i < n; i++) { var Wub = Dtb.charCodeAt(i); if((Wub > 64 && Wub < 91) || (Wub > 96 && Wub < 123 ) || Wub > 127) { if(Ksb == -1) { Ksb = i; } } else { if(Ksb > -1) { if(Wub == 39) { if(i < (n - 1)) { nValNext = Dtb.charCodeAt(i + 1); if((nValNext > 64 && nValNext < 91) || (nValNext > 96 && nValNext < 123 ) || Wub > 127) { ++i; } else { Lsb = i; break; } } else { Lsb = i; break; } } else { Lsb = i; break; } } } } if(Ksb > -1) { if(Lsb > -1) { psb = Dtb.substring(Ksb, Lsb); } else { psb = Dtb.substring(Ksb); } } return psb;}function Sxa(JOb){ if(JOb == null) { return""; } var psb = JOb.trimTH(); if(psb.length == 0) { return""; } psb = psb.replace(/[\s\xA0]+/g," "); var ySb = 0; var hzb = psb.indexOf(' '); while(hzb > -1) { ++ySb; if(ySb == 3) { psb = psb.substr(0, hzb); break; } hzb = psb.indexOf(' ', hzb + 1); } return psb;}function Xxa(Bzb){ if(Bzb && Bzb.length > 0) { var n=-1; var i; for(i=Bzb.length-1; i>=0; i--) { if(bxa(Bzb.charCodeAt(i))) { break; } n=i; } if(n>-1) { Bzb = Bzb.substr(0, n); } } return Bzb;}function Zxa(Bzb){ if(Bzb && Bzb.length > 0) { var n=-1; var i; for(i=0; i<Bzb.length; i++) { if(bxa(Bzb.charCodeAt(i))) { break; } n=i; } if(n>-1) { Bzb = Bzb.substr(n); } } return Bzb;}function bxa(IZb){ return (IZb > 64 && IZb < 91) || (IZb > 96 && IZb < 123 ) || (IZb > 127 && IZb != 160);}function dxa(IZb){ return (IZb > 64 && IZb < 91) || (IZb > 96 && IZb < 123);}function fxa(IZb){ return (IZb > 47 && IZb < 58);}function hxa(IZb){ return (IZb > 47 && IZb < 58) || (IZb > 63 && IZb < 91) || (IZb > 94 && IZb < 123);}function jxa(IZb){ return ( (IZb > 127 && IZb != 160) || hxa(IZb) );}function mxa(Dtb){ if(Dtb == null) { return false; } for(var i = 0; i < Dtb.length; i++) { var Wub = Dtb.charCodeAt(i); if(Wub == 39 || (Wub > 47 && Wub < 58) || (Wub > 64 && Wub < 91) || Wub == 96 || (Wub > 96 && Wub < 123)) { return true; } } return false;}function pxa(qxa){ if(qxa == null || qxa.length == 0) { return qxa; } var wzb = qxa.length; for(var i = 0; i < wzb; i++) { var Wub = qxa.charCodeAt(i); if(! (Wub == 39 || Wub == 44 || Wub == 46 || (Wub > 47 && Wub < 58) || (Wub > 63 && Wub < 91) || (Wub > 94 && Wub < 123))) { qxa = qxa.replace(qxa.charAt(i),' '); } } return qxa.trimTH();}function sxa(range){ var Dtb =""; if(range.text) { Dtb = range.text; } else { Dtb = range.toString(); } return Dtb;}function uxa(){ var uRb = SSDOM.getSelectionObject(); if(uRb == null) { return; } if(uRb.collapseToStart) { uRb.collapseToStart(); } else if(uRb.execCommand) { uRb.execCommand("UnSelect", false, null); }}function Bya(dsb){ if(dsb != null) { if(Ufa) { var range = SSDOM.getRangeObject(dsb.ownerDocument.body); range.moveToElementText(dsb) ; range.select(); } else { var Yub = SSDOM.getNextNodeIgnoreChildren(dsb, false, null); if(Yub != null) { var range = new ira(dsb, 0, Yub, 0); Dya(range); } } }}function Dya(fdb){ if(Ufa) { fdb.select(); } else { var start = fdb.UAc; var end = fdb.VAc; var FVb = SSDOM.getWindow(start.node); if(!Yfa) { var Ufb = FVb.getSelection(); Ufb.collapse(start.node, start.offset); if(Ufb.extend) { Ufb.extend(end.node, end.offset); } else { var range = FVb.document.createRange(); range.setStart(start.node, start.offset); range.setEnd(end.node, end.offset); Ufb.addRange(range); } } else { FVb.getSelection().setBaseAndExtent(start.node, start.offset, end.node, end.offset); } }}function Fya(Gya){ return (Gya.search(/[\s\xa0]/) > -1);}function Hya(TAc){ var Iya = TAc +"  "; if(TAc.tagName != null) { Iya += TAc.tagName +" "; } if(TAc.className != null) { Iya += TAc.className +" "; } for(prop in TAc) { Iya += prop +"  "+" | "; } alert(Iya);}function Jya(TAc){ var Iya = TAc +"  "; for(prop in TAc) { Iya += prop +"  "+" | "; } return Iya;}function Kya(onb){ if(typeof(window.console) !=="undefined"&& typeof(window.console.log) !=="undefinded") { try { window.console.log(onb); } catch(err) { } } if(typeof($rw_dump) =='function') { try { $rw_dump(onb +"\n"); } catch(err) { } }}function thLogE(error){ if(error != null) { if(error.name && error.message) { Kya("Error: "+""+ error.name +". : "+ error.message); } else if(error.message) { Kya("Error: "+""+ error.message); } }}function $rw_logMe(Bzb){ Kya(Bzb);}function $rw_alertMe(Bzb){ alert(Bzb);}function $rw_inputFieldFilter(Bzb){ if(Bzb == null || Bzb.length == 0) { return Bzb; } var i; var wzb = Bzb.length; for(i = wzb - 1; i >= 0; i--) { var c = Bzb.charCodeAt(i); if((c < 44 && c != 39) || c == 47 || (c > 57 && c < 65) || (c > 90 && c < 97 && c != 95) || (c > 122 && c < 128)) { Bzb = Bzb.substring(0, i) + Bzb.substr(i + 1); } } return Bzb;}function $rw_handleFieldInput(fzb){ var pre = fzb.value; var post = $rw_inputFieldFilter(pre); if(pre != post) { fzb.value = post; }}function $rw_handleFieldKeyDownInput(evt){ if(!evt.ctrlKey) { var c = evt.keyCode; if((c > 32 && c < 44 && c != 39) || c == 47 || (c > 57 && c < 65) || (c > 90 && c < 97 && c != 95) || (c > 122 && c < 128)) { return false; } } return true;}function Pya(c){ return (c > 64 && c < 91) || (c > 96 && c < 123) || c == 39 || (c > 128 && c != 160);}function Sya(wqb){ var wzb = wqb.length; var i = 0; var Wub; for(i=0; i<wzb; i++) { Wub = wqb.charCodeAt(i); if((Wub > 63 && Wub < 91) || (Wub > 96 && Wub < 123) || (Wub > 127 && Wub != 160)) { return true; } else if(Wub > 46 && Wub < 58) { return true; } else if((Wub > 35 && Wub < 39) || Wub == 43 || Wub == 61) { return true; } else if(Wub == 42 || Wub == 45 || Wub == 92 || (Wub > 93 && Wub < 97)) { if(xca !="VW Kate") { return true; } } } if(qfa) { if(XUb(wqb)) { return true; } } return false;}function cya(ANb){ try { if(ANb == null || ANb.efb == null || ANb.ffb == null) { return false; } var efb = ANb.efb; var ffb = ANb.ffb; var fTb = efb.node; var YNb = ffb.node; var kNb = true; var Zya = false; var hNb = fTb; var Dtb =""; while(hNb != null) { Zya = SSDOM.isSpecialCase(hNb); if(SpeechStream.pauseHandler.isPauseElement(hNb)) { Zya = true; } if(Zya || hNb.nodeType == 3) { var OAc = SSDOM.getTextFromNode(hNb); if(OAc != null && OAc !="") { if(!Zya) { if(hNb == YNb && ffb.offset > -1) { OAc = OAc.substring(0, ffb.offset); } if(hNb == fTb && efb.offset > 0) { OAc = OAc.substring(efb.offset); } } if(Sya(OAc)) { return true; } } } if(Zya) { hNb = SSDOM.getNextNodeIgnoreChildren(hNb, false, YNb); } else { if(kNb) { hNb = SSDOM.getNextNodeAllowMoveToChild(hNb, true, YNb); } else { hNb = SSDOM.getNextNode(hNb, false, YNb); } } kNb = false; } } catch(err) { thLogE(err); } return false;}function fya(d){ return d.toString(16);}function gya(h){ return parseInt(h,16);}function hya(Bzb){ if(dca) { alert(Bzb); } else { Kya(Bzb); }}function $rw_enable_alerts(p_bEnable){ if(typeof(p_bEnable) =="boolean") { dca = p_bEnable; }}function $rw_uriEncode(Bzb){ return encodeURIComponent(Bzb);}function jya(NCb){ if(NCb) { return ((Hea||Iea)?"https://":"http://"); } else { return ((Hea||Jea)?"https://":"http://"); }}/*Code designed and developed by Stuart McWilliams.*/SpeechStream.EnumIconParameter ={ ICON_NAME:0, ICON_ALT_TEXT:1, ICON_OFFSET:2, ICON_IS_TOGGLE:3, ICON_TOGGLE_STATE:4};function nya(Mwb, Kza, OWb, OIb){ var lya = SpeechStream.EnumIconParameter; var hzb = nea; g_icons[nea] = new Array(5); g_icons[nea][lya.ICON_NAME] = Mwb; g_icons[nea][lya.ICON_ALT_TEXT] = Kza; g_icons[nea][lya.ICON_OFFSET] = OWb; g_icons[nea][lya.ICON_IS_TOGGLE] = OIb; g_icons[nea][lya.ICON_TOGGLE_STATE] = false; nea++; return hzb;}function yya(Mwb){ var i; for(i=0; i<g_icons.length; i++) { if(g_icons[i][SpeechStream.EnumIconParameter.ICON_NAME] == Mwb) { return i; } } return -1;}function Aza(i){ var sya = SpeechStream.EnumIconParameter; var knb = g_icons[i][sya.ICON_NAME]; var nnb = g_icons[i][sya.ICON_ALT_TEXT]; var Igb = g_icons[i][sya.ICON_OFFSET]; var wya = g_icons[i][sya.ICON_IS_TOGGLE]; var xya = false; if(wya) { if(knb =="hover"+""&& typeof(eba_initial_speech_on) =="boolean"&& eba_initial_speech_on) { g_icons[i][sya.ICON_TOGGLE_STATE] = true; xya = true; } } var SKb = 33; if(knb.equalsTH("submit"+"")) { SKb = 53; } Bfa += SKb; var Cza = Hza(knb,"flat"+"", nnb, SKb, Igb, true, xya); if(cfa && (hfa < 6 || !efa)) { yDb(Cza,"touchstart", function() { $rw_getTouchSelection(); }); } yDb(Cza,"mouseover", function() { if(!bfa) { if(!g_icons[i][sya.ICON_TOGGLE_STATE]) { DIb(knb, i, wya); } } }); yDb(Cza,"mouseout", function() { if(!g_icons[i][sya.ICON_TOGGLE_STATE]) { HIb(knb, i, wya); } }); yDb(Cza,"mousedown", function() { if(!bfa) { if(!g_icons[i][sya.ICON_TOGGLE_STATE]) { LIb(knb, i, wya); } } xea = knb; }); yDb(Cza,"mouseup", function(e) { if(xea.equalsTH(knb)) { if($rw_blockClick(knb)) { return true; } else { SpeechStream.ipadUtils.tinyMceBlurFix(); var nAc; nAc ='$rw_event_'+ knb +'(e, '+ i +');'; eval(nAc); } } if(!bfa) { if(!g_icons[i][sya.ICON_TOGGLE_STATE]) { DIb(knb, i, wya); } } }); return Cza; }function Hza(Mwb, MBb, Kza, Lza, NIb, hKb, Oza){ var Eza = Lza * yya(Mwb); var Fza = 0; if(Oza) { Fza = 66; } var hBb = {}; hBb["ignore"] ="1"; hBb["name"] = Mwb + MBb; hBb["width"] =""+ Lza; hBb["height"] ="32"; hBb["title"] = Kza; hBb["unselectable"] ="on"; if(hKb) { hBb["style"] ="left:"+ Eza +"px; background-position: -"+ NIb +"px -"+ Fza +"px;"; } else { hBb["style"] ="left:"+ Eza +"px; background-position: -"+ NIb +"px -"+ Fza +"px;"; } var Pza = SSDOM.createObjectFromMap("span", hBb, Mwb, null, false); if(Lfa) { Pza.onselectstart = function() { return false; }; } else { Pza.onmousedown = function() { return false; }; } return Pza;}function Rza(){ Bfa += 100; nLeftPosition = 33 * nea; var hBb = {}; hBb["ignore"] ="1"; if(Lfa) { hBb["style"] ="width:95px;position:relative;left:"+nLeftPosition+"px;top:6px;border: 1px solid;color:#000000;backgroundColor:#f1efe5"; } else { hBb["style"] ="width:95px;position:relative;left:"+nLeftPosition+"px;top:6px;border: 1px solid;color:#000000;background-color:#f1efe5"; } var Sza = SSDOM.createObjectFromMap("select", hBb, null, null, true); zDb(Sza,"change", function() { $rw_setSpeedValue(parseInt(Sza.value, 10)); }); var Tza; hBb = {}; hBb["ignore"] ="1"; hBb["value"] =""+ SLOW_SPEED; if(Hda == -3 || Hda == SLOW_SPEED) { hBb["selected"] ="1"; } Tza = SSDOM.createObjectFromMap("option", hBb, null, null, true); Tza.innerHTML ="Slow"; var Uza; hBb = {}; hBb["ignore"] ="1"; hBb["value"] =""+ MEDIUM_SPEED; if(Hda == -2 || Hda == MEDIUM_SPEED) { hBb["selected"] ="1"; } Uza = SSDOM.createObjectFromMap("option", hBb, null, null, true); Uza.innerHTML ="Medium"; var Vza; hBb = {}; hBb["ignore"] ="1"; hBb["value"] =""+ FAST_SPEED; if(Hda == -1 || Hda == FAST_SPEED) { hBb["selected"] ="1"; } Vza = SSDOM.createObjectFromMap("option", hBb, null, null, true); Vza.innerHTML ="Fast"; Sza.appendChild(Tza); Sza.appendChild(Uza); Sza.appendChild(Vza); return Sza;}function Yza(Mwb, MBb){ var Wza = null; if(MBb != null) { Wza = document.images[Mwb + MBb]; if(Wza != null) { var dza = Wza.style; dza.visibility ="\x76isible"; dza.display ="\x69n\x6cine"; dza.width ="\x326\x70x"; } if(MBb !="\x6fff") { Wza = document.images[Mwb +"off"]; if(Wza != null) { var dza = Wza.style; dza.visibility ="\x68idden"; dza.display ="n\x6fn\x65"; dza.width ="\x30px"; } } else if(MBb !="\x6fn") { Wza = document.images[Mwb +"on"]; if(Wza != null) { var dza = Wza.style; dza.visibility ="\x68idden"; dza.display ="n\x6fne"; dza.width ="\x30px"; } } }}function eza(Mwb, MBb, zfb, iza){ if(MBb != null) { var dza = document.getElementById(Mwb); if(Mwb =="s\x75bmit") { dza.width ="\x353px"; } else { dza.width ="\x333px"; } } if(MBb =="\x66\x6c\x61t") { SSDOM.setStyle(dza,"backgroundPosition: -"+ zfb +"px 0px;"); } if(MBb =="hover") { SSDOM.setStyle(dza,"backgroundPosition: -"+ zfb +"px -33px;"); } if(MBb =="toggle") { SSDOM.setStyle(dza,"backgroundPosition: -"+ zfb +"px -66px;"); } if(MBb =="mask") { SSDOM.setStyle(dza,"backgroundPosition: -"+ zfb +"px -99px;"); } if(iza) { if(MBb =="toggleOn") { SSDOM.setStyle(dza,"backgroundPosition: -"+ zfb +"px -66px;"); } if(MBb =="mask") { SSDOM.setStyle(dza,"backgroundPosition: -"+ zfb +"px -99px;"); } }}SpeechStream.tinymceipadfix ="thtinymceipadbugworkaround";SpeechStream.tinymceipadfocusbugworkaround = function(){ SpeechStream.ipadUtils.tinyMceBlurFix();};function kza(Mwb){ if (document.getElementById(Mwb)) { var icon = g_icons[yya(Mwb)]; icon[SpeechStream.EnumIconParameter.ICON_TOGGLE_STATE] = false; eza(Mwb,"flat", icon[SpeechStream.EnumIconParameter.ICON_OFFSET], false); }}function $rw_barInit(){ if(!VAb()) { return false; } if( (typeof(eba_custId) =="string"&& eba_custId =="200") || (typeof(eba_cust_id) =="string"&& eba_cust_id =="200") ) { tAb(); } WAb(); gfa = bfa && !(Yga.indexOf("android") > -1) && (jca&clicktospeak_icon)!=clicktospeak_icon && (jca&sticky_icon)!=sticky_icon && (lca&clicktospeak_icon)!=clicktospeak_icon && (lca&sticky_icon)!=sticky_icon; aga.pageData.placeholder = VBb(); Bda = parseInt(yca, 10); if(Bda == 300) { yAb(); } if(Bda >= 500 && Bda < 600) { Cea = true; } if(Bda >= 810 && Bda <820) { pda = true; } if(Bda >= 1220 && Bda <1229) { sda = true; } if(Lfa && !oda) { var PLb = YCb(); if(!PLb) { Dea = true; if(Mda) { } else { hya("The embedded speech toolbar cannot be added due to invalid html tag markup in this page .\n"+"Try using FireFox or Safari to view this page or contact the page author to notify them of this error."); return false; } } } SpeechStream.calculatePaths.initPaths(); var strFileLoc = aga.paths.strFileLoc; try { if(typeof(SpeechStream.swaConfig) !="undefined"&& SpeechStream.swaConfig != null && typeof(SpeechStream.swaConfig.getBlockedToolbar) =="function") { var Wub = SpeechStream.swaConfig.getBlockedToolbar(); var vvb = jca & Wub; jca -= vvb; } } catch(err){} if(jca == 0) { Afa = false; } if(Afa) { aBb(); } PBb(); TBb(); jCb(); if((jca & calculator_icon) == calculator_icon) { var qza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpCalc.js"]); aga.pageData.placeholder.appendChild(qza); } if((jca & record_icon) == record_icon) { $rw_barRecInit(); } if((jca & generatecache_icon) == generatecache_icon) { $rw_barCacheInit(); } if(Jga) { SSDOM.Hnb(aga.pageData.placeholder,"<link "+"href=\""+ strFileLoc +"rwLanguageSWA.css\" type=\"text/css\" rel=\"stylesheet\" />", false); var rza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"SSLS.js"]); aga.pageData.placeholder.appendChild(rza); var sza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpSwa.js"]); aga.pageData.placeholder.appendChild(sza); } if((jca & dictionary_icon) == dictionary_icon || (jca & factfinder_icon) == factfinder_icon || (jca & translation_icon) == translation_icon || (jca & mp3_icon) == mp3_icon) { var tza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpSearch.js"]); aga.pageData.placeholder.appendChild(tza); } if((jca & highlightcyan_icon) == highlightcyan_icon || (jca & highlightgreen_icon) == highlightgreen_icon || (jca & highlightmagenta_icon) == highlightmagenta_icon || (jca & highlightyellow_icon) == highlightyellow_icon || (jca & collect_icon) == collect_icon || Zda || (jca & vocabulary_icon) == vocabulary_icon || (jca & strike_icon) == strike_icon) { var uza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpSS.js"]); aga.pageData.placeholder.appendChild(uza); } if((jca & sticky_icon) == sticky_icon || Zda) { var vza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpSticky.js"]); aga.pageData.placeholder.appendChild(vza); } if((jca & pronCreate_icon) == pronCreate_icon || (jca & pronEdit_icon) == pronEdit_icon) { var wza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpPron.js"]); aga.pageData.placeholder.appendChild(wza); } if((jca & generatecache_icon) == generatecache_icon || (jca & checkcache_icon) == checkcache_icon) { var yza = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"jquerycombined.js"]); aga.pageData.placeholder.appendChild(yza); } if((jca & screenmask_icon) == screenmask_icon) { if(!dEb()) { var yza = SSDOM.createObject("script", ["type","text/javascript","src","//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"]); aga.pageData.placeholder.appendChild(yza); cEb(); } else { $jq = jQuery; } } if(!Lfa) { var zza = document.getElementsByTagName('input'); for (var i = 0; i < zza.length; i++) { var AAb = zza.item(i); var attr = AAb.getAttribute("t\x79pe"); if(attr != null && attr =="t\x65xt") { yDb(AAb,"\x6do\x75seu\x70", xDb); } } } if(Dga && cfa) { var BAb = null; if(typeof(eba_tinymce_id) =="string") { BAb = document.getElementById(eba_tinymce_id); } if(BAb) { try { var Lob = document.body; var Pkb = Lob.firstChild; while(Pkb != null) { if(OAb(Pkb,Ega)) { Pkb = SSDOM.getNextNodeIgnoreChildren(Pkb, false, Lob); } else { if(Pkb.nodeType == 1) { yDb(Pkb,"touchstart", SpeechStream.tinymceipadfocusbugworkaround); } Pkb = SSDOM.getNextNode(Pkb, false, Lob); } } } catch(err) { thLogE(err.message); } var ta = document.createElement("input"); ta.setAttribute("type","text"); ta.setAttribute("style","opacity:0;color:#ffffff;padding:0px;margin:0px;"+"border-top-color:#FFFFFF;border-right-color:#FFFFFF;border-bottom-color:#FFFFFF;border-left-color:#FFFFFF;"+"border-top-style:none;border-right-style:none;border-bottom-style:none;border-left-style:none;"+"height:1px;width:1px"); ta.setAttribute("id", SpeechStream.tinymceipadfix); var qpb = document.getElementById("rwDrag"); if(qpb != null) { qpb.appendChild(ta); } else { BAb.parentNode.insertBefore(ta, BAb); } TAb(false); } } if(cfa) { var qpb = document.getElementById("rwDrag"); if(qpb != null) { yDb(qpb,'dragstart', aHb); yDb(qpb,'touchend', zHb); yDb(qpb,'touchmove', tHb); yDb(qpb,'touchstart', XHb); } } if(aga.bubbleData.bBubbleMode) { if(!oda) { var YIb = SSDOM.createObject("script", ["type","text/javascript","src", strFileLoc +"texthelpBubble.js"]); aga.pageData.placeholder.appendChild(YIb); } } if(typeof(eba_initial_speech_on) =="boolean") { if(eba_initial_speech_on) { $g_bMouseSpeech = true; PEb(true); dab.enableTouchEvents(eba_initial_speech_on); } } var IBc = document.getElementById( eba_tinymce_id ); if(IBc) { var IAb = IBc.getAttribute("ongrammarclick"); if(IAb && IAb.length > 0) { Fga = IAb; } var JAb = IBc.getAttribute("onspellingclick"); if(JAb && JAb.length > 0) { Gga = JAb; } var KAb = IBc.getAttribute("onhomophoneclick"); if(KAb && KAb.length > 0) { Hga = KAb; } var LAb = IBc.getAttribute("onpredictionclick"); if(LAb && LAb.length > 0) { Iga = LAb; } } return true;}function OAb(RAb, dpb){ if(RAb.id != null && RAb.id.indexOf(dpb) > -1 ) { return true; } var Pkb = RAb.firstChild; var NAb; while(Pkb != null) { NAb = false; if(Pkb.id != null && Pkb.id.indexOf(dpb) > -1 ) { return true; } Pkb = SSDOM.getNextNode(Pkb, false, RAb); } return false;}function TAb(UAb){ try { var WWb = document.getElementById(eba_tinymce_id+"_ifr").contentDocument.body; if(WWb && typeof(WWb.ipadTinyMceFocus) =="undefined") { WWb.ipadTinyMceFocus = UAb; zDb(WWb,"click", function(){WWb.ipadTinyMceFocus = true;}); zDb(document.getElementById(eba_tinymce_id+"_ifr").contentWindow,"focus", function(){WWb.ipadTinyMceFocus = true;}); } return WWb; } catch(e){} return null;}function VAb(){ if(typeof(eba_bypass_dom_check) =="boolean"&& eba_bypass_dom_check) { oda = true; } return true; }function WAb(){ JCb(); if(typeof(pktTitleId) !="\x75n\x64\x65f\x69ne\x64"|| yca =="1600") { PCb(); } if(yca == null || yca.length == 0 || zca == null || zca.length == 0 || Ada == null || Ada.length == 0) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.NONE; SpeechStream.cacheMode.mode = SpeechStream.cacheMode.NONE; } if(pca == null || qca == null || rca == null) { var tzb =".speechstream.net"; var YAb = tzb.length; var ZAb = false; var aAb = SpeechStream.cacheMode.getLiveServer(); if(aAb != null && (aAb =="speechus.texthelp.com"|| (aAb.length > YAb && aAb.substring(aAb.length - YAb) == tzb) )) { ZAb = true; } if(ZAb) { aAb = LCb(aAb, false); if(pca == null) { pca = aAb; } if(qca == null) { qca = aAb; } if(rca == null) { rca = aAb; } } } if(Aga == null) { Aga = qca; } if(typeof(eba_annotate_storage_url) =="string"|| typeof(eba_annotate_highlight_editor_id) =="string"|| typeof(eba_annotate_note_editor_id) =="string"|| typeof(eba_annotate_note_storage_url) =="string"|| typeof(eba_annotate_highlight_storage_url) =="string") { OCb(); } if(Eda == SPANISH && typeof(eba_voice) =="undefined"&& typeof(pktVoice) =="undefined"&& !Fda) { xca ="\x53c\x61nSoft\x20Paulina_\x46ull_22\x6bHz"; } if(typeof(dtdType) !="undefined"&& afa) { Ifa = dtdType; if(dtdType =="xtran") { Jfa = true; } else if(dtdType =="loose") { Kfa = true; } } cAb(); if(typeof(eba_use_html5) =="boolean") { if(!eba_use_html5) { lea = true; } } else { lea = !((typeof(nca) =="string"&& nca =="speechus.texthelp.com") || (typeof(oca) =="string"&& oca =="speechus.texthelp.com")); } if(Oga != null) { SSAPIP.apipHandler.init(Oga, Pga); }}function cAb(){ var xAb; try { xAb = window.location.search; } catch(err) { xAb =""; } if(typeof(eba_autocache_generate) =="boolean"&& eba_autocache_generate) { cea = true; } else { var yXb = jAb(xAb,"speechstreamautocache"); cea = (yXb!= null) && (yXb.toLowerCase() =="true"); } if(!cea) { if(typeof(eba_autocache_check) =="boolean"&& eba_autocache_check) { dea = true; } else { var yXb = jAb(xAb,"speechstreamautocachecheck"); dea = (yXb!= null) && (yXb.toLowerCase() =="true"); } } if(typeof(eba_autocache_no_alert) =="boolean"&& eba_autocache_no_alert) { fea = true; } else { var yXb = jAb(xAb,"speechstreamautocachenoalert"); fea = (yXb!= null) && (yXb.toLowerCase() =="true"); } if(cea || dea) { lca = lca | generatecache_icon; lca = lca | checkcache_icon; lea = true; } else { if(typeof(eba_icons) =="number"&& eba_icons > 0) { if( (eba_icons & generatecache_icon) == generatecache_icon || (eba_icons & checkcache_icon) == checkcache_icon ) { lea = true; } } if(typeof(eba_no_display_icons) =="number"&& eba_no_display_icons > 0) { if( (eba_no_display_icons & generatecache_icon) == generatecache_icon || (eba_no_display_icons & checkcache_icon) == checkcache_icon) { lea = true; } } } if(typeof(eba_autocache_callback) =="string") { eea = eba_autocache_callback; } else { var yXb = jAb(xAb,"speechstreamautocachecallback"); if(yXb != null && yXb.length > 0) { yXb = decodeURIComponent(yXb); eea = yXb; } } if(eea && eea.length > 0) { eea = nUb(eea,"\\amp;","&"); } if(typeof(eba_autocache_allspeeds) =="boolean") { bea = eba_autocache_allspeeds; }}function jAb(kAb, lAb){ var yXb = null; var iAb = lAb +"="; iAb = iAb.toLowerCase(); var wzb = iAb.length; var Ksb; var Lsb; var pAb; var qAb = kAb.toLowerCase(); Ksb = qAb.indexOf(iAb); while(Ksb > 0) { pAb = kAb.charAt(Ksb - 1); if(pAb =="?"|| pAb =="&") { Lsb = kAb.indexOf("&", Ksb + wzb); if(Lsb == -1) { yXb = kAb.substr(Ksb + wzb); } else { yXb = kAb.substring(Ksb + wzb, Lsb); } break; } else { Ksb = qAb.indexOf(iAb, Ksb + 1); } } return yXb;}function tAb(){ var rAb = false; var sAb = false; Bea = true; if(Cda == null) { Cda ="s\x63holast\x69c"; Dda ="s\x63holast\x69\x63"; } var uAb = document.getElementsByTagName("meta"); var wzb = uAb.length; var i; for(i=0; i<wzb; i++ ) { var wAb = uAb[i]; if(wAb.name != null) { if(wAb.name.toLowerCase() =="assetid"&& wAb.content != null && wAb.content.length > 0) { Ada = wAb.content; sAb = true; } else if(wAb.name.toLowerCase() =="pcode"&& wAb.content != null && wAb.content.length > 0) { zca = wAb.content; rAb = true; } } } var xAb = window.location.search; Ksb = xAb.indexOf("id="); while(Ksb > 0) { pAb = xAb.charAt(Ksb - 1); if(pAb =="?"|| pAb =="&") { Lsb = xAb.indexOf("&", Ksb + 3); if(Lsb == -1) { Ada = xAb.substr(Ksb + 3); } else { Ada = xAb.substring(Ksb + 3, Lsb); } Ksb = -1; } else { Ksb = xAb.indexOf("id=", Ksb + 1); } } Ksb = xAb.indexOf("product_id="); while(Ksb > 0) { pAb = xAb.charAt(Ksb - 1); if(pAb =="?"|| pAb =="&") { Lsb = xAb.indexOf("&", Ksb + 11); if(Lsb == -1) { zca = xAb.substr(Ksb + 11); rAb = true; } else { zca = xAb.substring(Ksb + 11, Lsb); sAb = true; } Ksb = -1; } else { Ksb = xAb.indexOf("product_id=", Ksb + 1); } } if(!rAb && (zca == null || zca =="")) { zca ="none"; } if(!sAb && (Ada == null || Ada =="")) { Ada ="none"; } }function yAb(){ zca ="index"; Ada ="1"; var zAb = document.location; if(zAb != null) { var Ovb = zAb.pathname; if(Ovb.length > 0) { var BBb = Ovb.lastIndexOf("/"); if(BBb > -1) { Ovb = Ovb.substr(BBb + 1); var CBb = Ovb.indexOf(".html"); if(CBb > -1) { Ovb = Ovb.substring(0, CBb); zca = Ovb; } } } }}function GBb(){ var DBb; var EBb; var FBb; this.initPaths = function() { DBb = jya(false) + mca +"/"; EBb = jya(true) + nca +"/"; if(oca != null) { FBb = jya(true) + oca +"/"; } else { FBb = null; } IBb(); var JBb = KBb(); LBb(JBb); }; this.getServerUrl = function() { return DBb; }; this.getSpeechServerUrl = function() { return EBb; }; this.getSpeechServerUrlBackup = function() { return FBb; }; function IBb() { if(vca == null) { vca =""; } while(vca.length > 0 && vca.charAt(0) =='/') { vca = vca.substr(1); } while(vca.length > 0 && vca.charAt(vca.length - 1) =='/') { vca = vca.substr(0, vca.length - 1); } if(vca =="") { vca ="SpeechStream"; } } function KBb() { var JBb; if(fca.length > 0) { if(fca =="latest") { JBb = vca +"/"+ fca; } else { JBb = vca +"/v"+ fca; } } else { JBb = vca; } return JBb; } function LBb(MBb) { if(Rga != null) { if(fca =="latest") { aga.paths.strFileLoc = Rga + fca +"/"; } else { aga.paths.strFileLoc = Rga+"v"+ fca +"/"; } } else { if(MBb.length > 0) { aga.paths.strFileLoc = DBb + MBb +"/"; } else { aga.paths.strFileLoc = DBb; } aga.paths.strSwfLoc = wca; } }}SpeechStream.calculatePaths = new GBb();function PBb(){ var NBb; var rBb = sBb(); if(Bfa > 0) { if(cca) { if(afa) { ufa = true; NBb = SSDOM.createObject("div", ["rwTHComp","1","style","visibility:hidden;display:none"],"rwDrag"); } else { NBb = SSDOM.createObject("div", ["rwTHComp","1","style","position:relative;visibility:hidden;display:none"],"rwDrag"); } } else { NBb = SSDOM.createObject("div", ["rwTHComp","1","style","visibility:hidden;display:none"],"rwDrag"); } var eBb = gBb(); if(!Zca) { eBb.appendChild(mBb()); } eBb.appendChild(rBb); NBb.appendChild(eBb); } else { NBb = SSDOM.createObject("div", ["rwTHComp","1","visibility","hidden"],"rwDrag"); var eBb = SSDOM.createObject("div", ["rwTHComp","1","visibility","hidden"],"rwDrag"); NBb.appendChild(eBb); } aga.pageData.placeholder.appendChild(NBb);}function TBb(){ var qpb = document.getElementById("WebToSpeech"); if(qpb == null) { qpb = document.createElement("span"); qpb.id ="WebToSpeech"; aga.pageData.placeholder.appendChild(qpb); } DCb(SpeechStream.calculatePaths.getServerUrl(), SpeechStream.calculatePaths.getSpeechServerUrl(), SpeechStream.calculatePaths.getSpeechServerUrlBackup() );}function $rw_barDynamicStart(){ iea = true;}function VBb(){ var UBb; if(Qga){ UBb = document.getElementById("thSpeechStreamTBPlaceHolder"); } else { UBb = document.getElementById("speechStreamPlaceholder"); } if(UBb == null) { if(iea) { UBb = document.body; } else { if(cca || (Lfa && Ufa)) { var OAc = document.body; var match; while(OAc != null) { if(OAc != null && OAc.nodeType == 1) { match = OAc; } OAc = OAc.lastChild; } if(match == document.body) { UBb = match; } else { var XBb = match.parentNode; var YBb = document.createElement("span"); if(Qga) { YBb.id ="thSpeechStreamTBPlaceHolder"; } else { YBb.id ="speechStreamPlaceholder"; } XBb.insertBefore(YBb, match); UBb = YBb; } } else { UBb = document.body; } } } return UBb;}function aBb(){ var strFileLoc = aga.paths.strFileLoc; if(Cea) { SSDOM.Hnb(aga.pageData.placeholder,"<link href=\""+ strFileLoc +"rwMain500Bar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { var bBb = jca; if(kca != -1) { bBb = kca; } var cBb = clicktospeak_icon + play_icon + pause_icon + stop_icon; if( (bBb | cBb) == cBb) { SSDOM.Hnb(aga.pageData.placeholder,"<link "+"href=\""+ strFileLoc +"rwMainTHSpeechBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { var dBb = cBb + search_icons + picturedictionary_icon; if( (bBb | dBb) == dBb) { if(Qga) { SSDOM.Hnb(aga.pageData.placeholder,"<link href=\""+ strFileLoc +"rwMainExtSearchBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { SSDOM.Hnb(aga.pageData.placeholder,"<link href=\""+ strFileLoc +"rwMainTHSearchBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } } else { SSDOM.Hnb(aga.pageData.placeholder,"<link href=\""+ strFileLoc +"rwMainTHFullBar.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } } }}function gBb(){ var eBb; if(Qga) { Bfa = Bfa + 250; } var Oqb ="width:"+ Bfa +"px;"+"visibility:hidden;"; if(Kda || Zca) { Oqb +="display:none;"; } var hBb = {}; hBb["style"] = Oqb; if(!Zca) { eBb = SSDOM.createObjectFromMap("div", hBb,"rwMainOutline","rwToolbarOutline"); } else { eBb = SSDOM.createObjectFromMap("div", hBb,"rwMainOutline", null); } return eBb;}function mBb(){ var strFileLoc = aga.paths.strFileLoc; var jBb; var mnb; var Szb; if(eba_logo_url == null) { if(Cea || Yda) { mnb =""; Szb = null; } else { mnb ="Click here to go to www.texthelp.com"; Szb ="www.texthelp.com"; } } else if(eba_logo_url =="none") { mnb =""; Szb = null; } else { mnb ="Click here to go to "+ eba_logo_url; Szb = eba_logo_url; if(Szb.substr(0, 7) =="http://") { Szb = Szb.substr(7); } else if (Szb.substr(0, 8) =="https://") { Szb = Szb.substr(8); } } jBb = SSDOM.createObject("div", null,"rwDragMe","rwToolbarCaption"); if(Qga) { var nBb = SSDOM.createObject("div", null,"rwToolbarTitleRW", null); nBb.setAttribute('ignore'); var content = document.createTextNode("Read&Write for Google"); nBb.appendChild(content); jBb.appendChild(nBb); } var pBb; if(Szb == null) { hBb = {}; hBb["border"] ="0"; hBb["ignore"] ="1"; hBb["align"] ="right"; if(Cea) { hBb["src"] = strFileLoc +"rwimgs500/logo500.gif"; hBb["style"] ="margin: 5px; cursor:default;"; } else if(Qga) { hBb["src"] = strFileLoc +"rwimgs/logoEXT.gif"; hBb["style"] ="cursor:default"; } else { hBb["src"] = strFileLoc +"rwimgs/logo.gif"; hBb["style"] ="cursor:default"; } hBb["title"] =""; hBb["alt"] =""; if(Qga) { pBb = SSDOM.createObjectFromMap("img", hBb, null,"rwCaptionIcon"); } else { pBb = SSDOM.createObjectFromMap("img", hBb, null, null); } jBb.appendChild(pBb); } else { hBb = {}; hBb["border"] ="0"; hBb["ignore"] ="1"; hBb["align"] ="right"; if(Cea) { hBb["src"] = strFileLoc +"rwimgs500/logo500.gif"; hBb["style"] ="margin: 5px;"; } else if(Qga) { hBb["src"] = strFileLoc +"rwimgs/logoEXT.gif"; } else { hBb["src"] = strFileLoc +"rwimgs/logo.gif"; } hBb["title"] = mnb; hBb["alt"] = mnb; if(Qga) { pBb = SSDOM.createObjectFromMap("img", hBb, null,"rwCaptionIcon"); } else { pBb = SSDOM.createObjectFromMap("img", hBb, null, null); } var qBb; hBb = {}; hBb["href"] = jya(false) + Szb; hBb["target"] ="new"; if(!Yfa) { hBb["style"] ="cursor:hand"; } qBb = SSDOM.createObjectFromMap("a", hBb, null, null); qBb.appendChild(pBb); jBb.appendChild(qBb); } return jBb;}function sBb(){ var rBb; if(Zca) { rBb = SSDOM.createObject("div", null, null,"rwToolbarBarNoBorder"); } else { rBb = SSDOM.createObject("div", null, null,"rwToolbarBar"); } var tBb = SSDOM.createObject("div", null,"rwToolbarList", null); $rw_setIconsToLoad(jca); var uBb = false; for (var i = 0; i < nea; i++) { uBb = true; tBb.appendChild(Aza(i)); } if((jca & selectSpeed_icon) == selectSpeed_icon) { uBb = true; tBb.appendChild(Rza()); } if(uBb && Bfa< 110) { Bfa = 110; } else if(!uBb) { Bfa = 0; } if(Qga) { var vBb; hBb = {}; hBb["border"] ="0"; hBb["ignore"] ="1"; hBb["align"] ="right"; hBb["src"] = strFileLoc +"rwimgs/texthelp.png"; hBb["title"] ="Click here to go to www.texthelp.com"; hBb["alt"] ="Click here to go to www.texthelp.com"; hBb["style"] ="height:24px;width:82px"; vBb = SSDOM.createObjectFromMap("img", hBb, null, null); var wBb; hBb = {}; hBb["href"] = jya(false) +"www.texthelp.com"; hBb["target"] ="new"; hBb["style"] ="cursor:hand"; wBb = SSDOM.createObjectFromMap("a", hBb, null, null); var xBb; hBb = {}; hBb["id"] ="texthelpLogo"; hBb["ignore"] ="1"; hBb["width"] ="82"; hBb["height"] ="24"; hBb["title"] ="Click here to go to www.texthelp.com"; hBb["unselectable"] ="on"; hBb["style"] ="left:132px;cursor:hand"; xBb = SSDOM.createObjectFromMap("div", hBb, null, null); wBb.appendChild(vBb); var yBb; hBb = {}; hBb["href"] = jya(false) +"rw.texthelp.com/drive/Support/featurepreview"; hBb["title"] ="Click here to learn more"; hBb["target"] ="new"; hBb["style"] ="cursor:hand; padding-top: 4px;"; yBb = SSDOM.createObjectFromMap("a", hBb, null, null); var content = document.createTextNode("Feature Preview. Learn more..."); var ACb; hBb = {}; hBb["id"] ="texthelpPreviewText"; ACb = SSDOM.createObjectFromMap("div", hBb, null, null); yBb.appendChild(content); ACb.appendChild(yBb); xBb.appendChild(ACb); xBb.appendChild(wBb); tBb.appendChild(xBb); } rBb.appendChild(tBb); return rBb;}function DCb(ECb, FCb, GCb){ var BCb = {}; var strSwfLoc = aga.paths.strSwfLoc; if(Cda != null && Dda != null) { BCb.userName = Cda; BCb.userPassword = Dda; } else { } BCb.lessonServerLoc = ECb; BCb.speechServerLoc = FCb; BCb.speedValue = Hda; if(hca >= 3) { BCb.useServices ="true"; } else if(hca == -1) { if( (nca != null && nca.indexOf(".speechstream.net") > -1) || (oca != null && oca.indexOf(".speechstream.net") > -1) ) { BCb.useServices ="true"; } else { BCb.useServices ="false"; } } else { BCb.useServices ="false"; lea = true; } if(pca != null) { BCb.translateServerLoc = pca; } if(qca != null) { BCb.dictionaryServerLoc = qca; } if(rca != null) { BCb.imagedictionaryServerLoc = rca; } if(sca != null) { BCb.predictionServerLoc = sca; } if(tca != null) { BCb.spellingServerLoc = tca; } if(uca != null) { BCb.homophoneServerLoc = uca; } if(Mda || Nda ) { BCb.cacheMode ="true"; if(GCb != null) { BCb.cacheLiveFallover ="true"; } } if(GCb != null) { BCb.speechServerBackupLoc = GCb; } if(yca != null && zca != null && Ada != null) { BCb.custID = yca; BCb.bookID = zca; BCb.pageID = Ada; } if(Vda > -1) { BCb.cacheCount = Vda; } if(Wda > -1) { BCb.cacheTimeDelay = Wda; } BCb.locale = Gda; BCb.speechName = xca; if(mda != null && nda != null) { BCb.searchString = mda; BCb.replaceString = nda; } if(strSwfLoc == null || strSwfLoc =="") { strSwfLoc = jya(false) + mca +"/"; } else if(strSwfLoc.charAt(0) =='.') { if(strSwfLoc.charAt(strSwfLoc.length -1) !='/') { strSwfLoc = mca +"/"; } } else { if(strSwfLoc.charAt(0) !='/') { strSwfLoc ="/"+ strSwfLoc; } if(strSwfLoc.charAt(strSwfLoc.length -1) !='/') { strSwfLoc = strSwfLoc +"/"; } strSwfLoc = jya(false) + mca + strSwfLoc; } aga.paths.strSwfLoc = strSwfLoc; if(Hea) { BCb.SSLSpeech ="true"; BCb.SSLToolbar ="true"; } else { if(Iea) { BCb.SSLSpeech ="true"; } if(Jea) { BCb.SSLToolbar ="true"; } } if(Lfa && (Hea||Iea)) { BCb.IESSL ="true"; } kca = jca; jca = jca | lca; if( (jca & pronCreate_icon) == pronCreate_icon || (jca & pronEdit_icon) == pronEdit_icon || Xda) { BCb.cacheBuster ="true"; } if(Ida > -1) { BCb.volumeValue =""+ Ida; } var peb = {}; peb.allowScriptAccess ="always"; peb.movie = strSwfLoc +'WebToSpeech'+ gca +'.swf'; peb.quality="high"; peb.bgcolor="#ffffff"; SpeechStream.m_flashVars = BCb; SpeechStream.setUpControllerFactory(); if(dab.doesSupportHtml5()) { dab.getConnector().initialise(BCb, ECb, FCb, GCb); dab.setSwaConntector(dab.getConnector()); } else { try { if(Vfa && !Rfa) { g_strAmp="&amp;"; } swfobject.embedSWF(strSwfLoc +'WebToSpeech'+ gca +'.swf',"WebToSpeech","1","1","9.0.0", false, BCb, peb); } catch(err) {g_strAmp="&amp;"; swfobject.embedSWF(strSwfLoc +'WebToSpeech'+ gca +'.swf',"WebToSpeech","1","1","9.0.0", false, BCb, peb); } if(afa) { var ICb = new SpeechStream.HTML5Controller(); ICb.initialise(BCb, ECb, FCb, GCb); dab.setSwaConntector(ICb); } }}function JCb(){ if(typeof(eba_use_container) =="boolean") { cca = eba_use_container; } if(typeof(eba_allow_alerts_flag) =="boolean") { dca = eba_allow_alerts_flag; } if(typeof(eba_alerts) =="boolean") { dca = eba_alerts; } if(typeof(eba_no_title) =="boolean") { Zca = eba_no_title; } if(typeof(eba_noTitleFlag) =="boolean") { Zca = eba_noTitleFlag; } if(typeof(eba_hidden_bar) =="boolean") { Kda = eba_hidden_bar; } if(typeof(eba_continuous_reading) =="boolean") { Eea = eba_continuous_reading; } if(typeof(eba_speak_selection_by_sentence) =="boolean") { if(Eea) { Mea = eba_speak_selection_by_sentence; } else { Mea = false; } } else { if(!Eea) { Mea = false; } } if(typeof(eba_dont_extend_selection) =="boolean") { Nea = !eba_dont_extend_selection; } if(typeof(eba_ignore_buttons) =="boolean") { Lda = eba_ignore_buttons; } if(typeof(eba_page_complete_after_selection) =="boolean") { Oea = eba_page_complete_after_selection; } if(typeof(eba_speechCacheGenerateFlag) =="boolean") { Mda = eba_speechCacheGenerateFlag; if(Mda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_BUILDING_MODE; } } if(typeof(eba_cache_building_mode) =="boolean") { Mda = eba_cache_building_mode; if(Mda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_BUILDING_MODE; } } var KCb = false; if(typeof(eba_speechCacheFlag) =="boolean") { Nda = eba_speechCacheFlag; KCb = true; } if(typeof(eba_speech_cache_flag) =="boolean") { Nda = eba_speech_cache_flag; KCb = true; } if(typeof(eba_cache_mode) =="boolean") { Nda = eba_cache_mode; KCb = true; } if(KCb && Nda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_ONLY; } if(typeof(eba_cache_live_generation) =="boolean") { Oda = eba_cache_live_generation; if(Oda) { SpeechStream.cacheMode.mode = SpeechStream.cacheMode.CACHE_WITH_LIVE_SERVER; } } if(typeof(eba_split_cache_path) =="boolean") { Pda = eba_split_cache_path; } if(typeof(eba_autoCachePage) =="boolean") { Qda = eba_autoCachePage; } if(typeof(eba_voice_from_lang_flag) =="boolean") { Fda = eba_voice_from_lang_flag; } if(typeof(eba_bubble_mode) =="boolean") { aga.bubbleData.bBubbleMode = eba_bubble_mode; } if(typeof(eba_bubble_freeze_on_shift_flag) =="boolean") { aga.bubbleData.bBubbleFreezeOnShiftFlag = eba_bubble_freeze_on_shift_flag; } if(typeof(eba_hover_flag) =="boolean") { Vca = !eba_hover_flag; } if(typeof(eba_ssl_flag) =="boolean") { Hea = eba_ssl_flag; Iea = Hea; Jea = Hea; } if(typeof(eba_ssl_speech) =="boolean") { Iea = eba_ssl_speech; } if(typeof(eba_ssl_toolbar) =="boolean") { Jea = eba_ssl_toolbar; } if(typeof(eba_clientside_pronunciation) =="boolean") { if(eba_clientside_pronunciation) { if(typeof(eba_check_pronunciation_before_cache) =="boolean") { if(eba_check_pronunciation_before_cache) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER; } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE; } } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_OFFLINE_CACHE; } } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.SERVER_PRONUNCIATION; } } else { if(typeof(eba_check_pronunciation_before_cache) =="boolean") { if(eba_check_pronunciation_before_cache) { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER; } else { SpeechStream.pronunciation.mode = SpeechStream.pronunciation.SERVER_PRONUNCIATION; } } } if(typeof(eba_alter_browser_for_consistency) =="boolean") { Lea = eba_alter_browser_for_consistency; } if(typeof(eba_cache_selection) =="boolean") { Tda = eba_cache_selection; } if(typeof(eba_cache_user_text) =="boolean") { Uda= eba_cache_user_text; } if(typeof(eba_skip_on_error) =="boolean") { if(eba_skip_on_error) { SpeechStream.actionOnError.action = SpeechStream.EnumActionOnError.SKIP; } } if(typeof(eba_cache_buster) =="boolean") { if(eba_cache_buster) { Xda = true; } } if(typeof(eba_handle_radio_checkbox_click) =="boolean") { if(eba_handle_radio_checkbox_click) { Rea = true; } } if(typeof(eba_inline_img) =="boolean") { Gea = eba_inline_img; } if(typeof(eba_ignore_hidden) =="boolean") { Sga = eba_ignore_hidden; } if(typeof(eba_limit_cookies) =="boolean") { tda = eba_limit_cookies; } if(typeof(eba_ignore_frames) =="boolean") { uda = eba_ignore_frames; } if(typeof(eba_math) =="boolean") { qfa = eba_math; } if(typeof(eba_maths) =="boolean") { qfa = eba_maths; } if(typeof(eba_use_vocabulary) =="boolean") { zfa = eba_use_vocabulary; } if(typeof(eba_use_vocab) =="boolean") { zfa = eba_use_vocab; } if(typeof(eba_use_commands) =="boolean") { Cga = eba_use_commands; } if(typeof(eba_tinymce) =="boolean") { Dga = eba_tinymce; } if(typeof(eba_swa) =="boolean") { Jga = eba_swa; } if(typeof(eba_disable_speech) =="boolean") { Kga = eba_disable_speech; } if(typeof(eba_apip) =="boolean") { Lga = eba_apip; } if(typeof(eba_chrome_extension) =="boolean") { Qga = eba_chrome_extension; } if(typeof(eba_icons) =="number") { jca = eba_icons; } if(typeof(eba_no_display_icons) =="number") { lca = eba_no_display_icons; } if(typeof(eba_language) =="number") { Eda = eba_language; if(Eda == 3) { Eda = 2; } else if(Eda > 3 || Eda < 0) { Eda = 0; } if(Fda) { if(eba_language >= 0 && eba_language < faa.length) { xca = faa[eba_language]; } } } if(typeof(eba_speedValue) =="number") { Hda = eba_speedValue; } if(typeof(eba_speed_value) =="number") { Hda = eba_speed_value; } if(typeof(eba_reading_age) =="number") { $rw_setReadingAge(eba_reading_age); } if(typeof(eba_speed_offset) =="number") { Hda += eba_speed_offset; } if(typeof(eba_volume_value) =="number") { Ida = eba_volume_value; } if(typeof(eba_cache_retry) =="number") { Vda = eba_cache_retry; } if(typeof(eba_cache_retry_timeout) =="number") { Wda = eba_cache_retry_timeout; } if(typeof(eba_mp3_limit) =="number") { if(eba_mp3_limit < 1000) { rda = rda * 1024; } else { rda = eba_mp3_limit; } } if(typeof(eba_max_word_count =="number")) { LNb = eba_max_word_count; } if(typeof(eba_date_filter_mode =="number") || typeof(eba_date_filter_mode) =="string") { SpeechStream.dateFilter.setMode(eba_date_filter_mode); } if(typeof(eba_vocabulary_limit) =="number") { Bga = eba_vocabulary_limit; } if(typeof(eba_server_version) =="string") { fca = eba_server_version; } if(typeof(eba_serverVersion) =="string") { fca = eba_serverVersion; } if(typeof(eba_client_version) =="string") { if(eba_client_version !="latest") { gca = eba_client_version; } } if(typeof(eba_clientVersion) =="string") { if(eba_clientVersion !="latest") { gca = eba_clientVersion; } } if(typeof(eba_server) =="string") { mca = eba_server; if(mca.length > 6 && mca.substring(0, 7) =="http://") { mca = mca.substring(7); } else if(mca.length > 7 && mca.substring(0, 8) =="https://") { mca = mca.substring(8); } } if(typeof(eba_speech_server) =="string") { nca = eba_speech_server; } if(typeof(eba_speechServer) =="string") { nca = eba_speechServer; } if(typeof(eba_speech_server_backup) =="string") { oca = eba_speech_server_backup; } if(typeof(eba_speechServerBackup) =="string") { oca = eba_speechServerBackup; } if(typeof(eba_translation_server) =="string") { pca = LCb(eba_translation_server, false); } if(typeof(eba_translate_server) =="string") { pca = LCb(eba_translate_server, false); } if(typeof(eba_dictionary_server) =="string") { qca = LCb(eba_dictionary_server, false); } if(typeof(eba_imagedictionary_server) =="string") { rca = LCb(eba_imagedictionary_server, false); } if(typeof(eba_picturedictionary_server) =="string") { rca = LCb(eba_picturedictionary_server, false); } if(typeof(eba_language_server) =="string") { sca = LCb(eba_language_server, false); tca = LCb(eba_language_server, false); uca = LCb(eba_language_server, false); } if(typeof(eba_spelling_server) =="string") { tca = LCb(eba_spelling_server, false); } if(typeof(eba_homophone_server) =="string") { uca = LCb(eba_homophone_server, false); } if(typeof(eba_prediction_server) =="string") { sca = LCb(eba_prediction_server, false); } if(typeof(eba_vocabulary_server) =="string") { Aga = LCb(eba_vocabulary_server, false); } if(typeof(eba_folder) =="string") { vca = eba_folder; } if(typeof(eba_client_folder) =="string") { wca = eba_client_folder; } if(typeof(eba_clientFolder) =="string") { wca = eba_clientFolder; } if(typeof(eba_voice) =="string") { xca = eba_voice; if(xca =="ScanSoft Daniel_Full_22kHz") { faa[ENG_UK] = xca; } else if(xca =="ScanSoft Tom_Full_22kHz") { faa[ENG_US] = xca; } else if(xca =="ScanSoft Jill_Full_22kHz") { faa[ENG_US] = xca; } } if(typeof(eba_custId) =="string") { eba_cust_id = eba_custId; } if(typeof(eba_cust_id) =="string") { yca = vUb(eba_cust_id.trimTH()); } if(typeof(eba_bookId) =="string") { eba_book_id = eba_bookId; } if(typeof(eba_book_id) =="string") { zca = vUb(eba_book_id.trimTH()); } if(typeof(eba_pageId) =="string") { eba_page_id = eba_pageId; } if(typeof(eba_page_id) =="string") { Ada = vUb(eba_page_id.trimTH()); } if(typeof(eba_loginName) =="string") { eba_login_name = eba_loginName; } if(typeof(eba_login_name) =="string") { Cda = eba_login_name; } if(typeof(eba_loginPassword) =="string") { eba_login_password = eba_loginPassword; } if(typeof(eba_login_password) =="string") { Dda = eba_login_password; } else { Dda = Cda; } if(typeof(eba_locale) =="string") { Gda = eba_locale; } if(typeof(eba_speech_range_colors) =="string") { aga.highlightData.strSpeechRangeColours = eba_speech_range_colors; } if(typeof(eba_speech_range_colours) =="string") { aga.highlightData.strSpeechRangeColours = eba_speech_range_colours; } if(typeof(eba_speech_range_style) =="string") { aga.highlightData.strSpeechRangeColours = eba_speech_range_style; } if(typeof(eba_speech_word_colors) =="string") { aga.highlightData.strSpeechWordColours = eba_speech_word_colors; } if(typeof(eba_speech_word_colours) =="string") { aga.highlightData.strSpeechWordColours = eba_speech_word_colours; } if(typeof(eba_speech_word_style) =="string") { aga.highlightData.strSpeechWordColours = eba_speech_word_style; } if(typeof(eba_mp3_id) =="string") { qda = eba_mp3_id; } if(typeof(eba_search_speech_server) =="string") { mda = eba_search_speech_server; } if(typeof(eba_replace_speech_server) =="string") { nda = eba_replace_speech_server; } if(typeof(eba_play_start_point) =="string") { aca = eba_play_start_point; } if(typeof(eba_speech_stream_server_version) =="string"|| typeof(eba_speech_stream_server_version) =="number") { if(typeof(eba_speech_stream_server_version) =="number") { hca = eba_speech_stream_server_version; } else { try { hca = parseInt(eba_speech_stream_server_version, 10); } catch(e) { } } } else { if(eba_cust_id =="810") { hca = 3; } } if(typeof(eba_symbol_text) =="string") { KUb(eba_symbol_text); } if(typeof(eba_speech_file_type) =="string") { eba_speech_file_type = eba_speech_file_type.toLowerCase(); if(eba_speech_file_type =="mp3"|| eba_speech_file_type =="ogg"|| eba_speech_file_type =="wav") { yfa = eba_speech_file_type; } } if(typeof(eba_voice_language_map) =="string") { lga(eba_voice_language_map); } if(typeof(eba_break_list) =="string") { $rw_setBreakList(eba_break_list); } if(typeof(eba_tinymce_id) =="string") { Ega = eba_tinymce_id; } if(typeof(eba_local_file_path) =="string") { Rga = eba_local_file_path; } if(typeof(eba_apip_data) =="object") { Oga = eba_apip_data; } if(typeof(eba_apip_order =="object")) { Pga = eba_apip_order; }}function LCb(MCb, NCb){ if(MCb.length < 4 || MCb.substring(0, 4) !="http") { MCb = jya(NCb) + MCb; } if(MCb.substr(MCb.length - 1, 1) !="/") { MCb +="/"; } return MCb;}function OCb(){ if(zca == null) { hya("Persistent annotations is enabled but no book id was provided, "+"this feature will not work in this page."); return; } if(Ada == null) { hya("Persistent annotations is enabled but no page id was provided, "+"this feature will not work in this page."); return; } if(typeof(eba_use_annotations) =="boolean") { Zda = eba_use_annotations; } else { Zda = true; } if(typeof(eba_annotate_note_editor_id) =="string") { ada = vUb(eba_annotate_note_editor_id); } if(typeof(eba_annotate_highlight_editor_id) =="string") { bda = vUb(eba_annotate_highlight_editor_id); } if(typeof(eba_annotate_note_reader_id) =="string") { cda = vUb(eba_annotate_note_reader_id); } if(typeof(eba_annotate_highlight_reader_id) =="string") { dda = vUb(eba_annotate_highlight_reader_id); } if(typeof(eba_annotate_persist_notes) =="boolean"&& ada !="*") { eda = eba_annotate_persist_notes; } if(typeof(eba_annotate_persist_highlights) =="boolean"&& bda !="*") { fda = eba_annotate_persist_highlights; } if(typeof(eba_annotate_highlight_store_text) =="boolean") { gda = eba_annotate_highlight_store_text; } if(typeof(eba_annotate_storage_url) =="string") { hda = eba_annotate_storage_url; if(typeof(eba_server) =="undefined") { mca = hda; } } else { if(Nda) { if(oca != null) { hda = oca; } else { hda = mca; } } else { hda = nca; } } if(typeof(eba_annotate_note_storage_url) =="string") { ida = eba_annotate_note_storage_url; } if(typeof(eba_annotate_highlight_storage_url) =="string") { jda = eba_annotate_highlight_storage_url; } if(typeof(eba_annotate_confirm_delete_note) =='boolean') { lda = eba_annotate_confirm_delete_note; } if(eda) { if((jca & sticky_icon) != sticky_icon ) { if(jca == no_bar) { lca += sticky_icon; } else { jca += sticky_icon; } } }}function PCb(){ Yda = true; if(typeof(eba_use_annotations) =="boolean") { Zda = eba_use_annotations; } else { Zda = true; } if(typeof(pktIsTeacher) =="boolean") { eda = Zda && pktIsTeacher; } if(typeof(pktTitleId) =="string") { zca = pktTitleId; } if(typeof(pktPageId) =="string") { Ada = pktPageId; } if(typeof(pktStudentId) =="string") { if(!eda && Zda) { fda = true; } bda = vUb(pktStudentId); cda = vUb(pktStudentId); } if(typeof(pktTeacherId) =="string") { ada = vUb(pktTeacherId); dda = vUb(pktTeacherId); } if(typeof(pktStorageUrl) =="string") { hda = pktStorageUrl; if(typeof(eba_server) =="undefined") { mca = hda; } } else { hda = mca; } if(typeof(pktSpeechServerUrl) =="string") { nca = pktSpeechServerUrl; } if(typeof(pktVoice) =="string") { xca = pktVoice; } if(typeof(pktCustCode) =='string') { kda = pktCustCode; } if(typeof(pktConfirmOnDelete) =='boolean') { lda = pktConfirmOnDelete; } if(eda) { if((jca & sticky_icon) != sticky_icon ) { if(jca == no_bar) { lca += sticky_icon; } else { jca += sticky_icon; } } }}function YCb(){ if(!uda && top.frames.length > 0) { var i; var wzb = top.frames.length; for (i = 0; i < wzb; i++) { var pCb = top.frames[i]; try { var kCb = pCb.document; var b = aCb(kCb.body); if(!b) { return false; } } catch(e) { } } } if(document.body != null) { return aCb(document.body); } else { return true; }}function aCb(HWb){ if(HWb.firstChild != null) { var SVb = HWb.firstChild; var Lob = SVb.ownerDocument.body; try { while(SVb != null && SVb != Lob) { SVb = SSDOM.getNextNodeIEBugFix(SVb); } } catch(er) { return false; } } return true;}var VCb = 0;var WCb = 500;var XCb = false;function $rw_versionCheck(){ try { kea = dab.doesSupportSpeech(); $rw_setSpeedValue(Hda); } catch (err) { kea = false; } if(!kea) { VCb++; if(VCb < WCb) { setTimeout($rw_versionCheck, 100); } else { if(!XCb) { if(Mda) { } else { hya("A necessary flash component failed to load.  This page will not work as intended.\n"+"Could not load file from: "+ aga.paths.strSwfLoc +'WebToSpeech'+ gca +'.swf'); } XCb = true; } } }}var cCb = -1;function $rw_getFlashVersion(){ if(cCb < 0) { try { var flash = dab.getConnector(); var pab = flash.getVersion(); cCb = parseInt(pab, 10); } catch(err) { cCb = parseInt(gca, 10); thLogE(err); } } return cCb;}function fCb(gCb, iCb){ if(gCb == null || iCb == null) { return false; } if(gCb = iCb) { return true; } if(gCb.frames.length > 0) { var i; for(i=0; i<gCb.frames.length; i++) { if(iCb == gCb.frames[i]) { return true; } else { if(gCb.frames[i].length > 0) { if(fCb(gCb.frames[i], iCb)) { return true; } } } } return false; } else { return false; }}function jCb(){ zDb(window,'scroll', IKb); zDb(window,'resize', IKb); zDb(window,'scroll', KKb); zDb(window,'resize', KKb); if(!iea) { zDb(window,'load', RIb); } zDb(window,'beforeunload', ZIb); zDb(document,'click', cHb); yDb(document,'mouseout', BIb); yDb(document,'mouseup', yHb); yDb(document,'mousemove', iHb); yDb(document,'mouseover', dHb); yDb(document,'mousedown', WHb); if(hfa >= 6 && Dga) { } else { yDb(document,'dragstart', YHb); yDb(document,'touchend', yHb); yDb(document,'touchmove', iHb); yDb(document,'touchstart', WHb); } if(Qga) { g_ExtBackgroundScriptCommObj = new SpeechStream.ExtBackgroundScriptComm(); window.addEventListener("message", g_ExtBackgroundScriptCommObj.onMessageFromBG, false); document.addEventListener("webkitvisibilitychange", SpeechStream.handleVisibilityChange, false); }}function $rw_addEventsToFrame(wha){ try { var kCb = wha.document; yDb(kCb,'mouseout', BIb); yDb(kCb,'mouseup', yHb); yDb(kCb,'click', cHb); yDb(kCb,'mousemove', iHb); yDb(kCb,'mouseover', dHb); yDb(kCb,'mousedown', WHb); if(hfa >= 6 && Dga) { } else { yDb(kCb,'dragstart', YHb); yDb(kCb,'touchend', yHb); yDb(kCb,'touchmove', iHb); yDb(kCb,'touchstart', WHb); } } catch(er) { } if(wha.frames.length > 0) { if(!uda) { var i; for(i=0;i<wha.frames.length; i++) { $rw_addEventsToFrame(wha.frames[i]); } } }}function $rw_pageSetup(){ $rw_tagSentencesWithFrames(window); if(!uda && window.frames.length > 0) { var i = 0; try { var wzb = window.frames.length; for (i = 0; i < wzb; i++) { $rw_addEventsToFrame(window.frames[i]); } } catch(e) { } } nKb = document.getElementById('rwDrag').style; nKb.display ="inline"; VCb = 0; $rw_versionCheck(); nCb(); Sga = true;}function nCb(){ if(!kea) { if(VCb < WCb) { setTimeout(nCb, 109); } return; } ofa = false; var mCb = false; if(kea && typeof(dXb) =="function") { if(SpeechStream.pronunciation.fetchData()) { mCb = true; } } if(mCb) { if(yca != null && yca.length > 0 && zca != null && zca.length > 0 && Ada != null && Ada.length > 0) { pfa = true; aWb.deleteAll(); dXb(); } }}function $rw_tagSentencesWithFrames(wha){ if(typeof(wha) =="undefined") { wha = window; } if(wha.document && wha.document.body) { $rw_tagSentences(wha.document.body); } if(!uda) { if (wha.frames.length > 0) { var i; var wzb = wha.frames.length; for (i = 0; i < wzb; i++) { try { var pCb = wha.frames[i]; if(pCb.frames.length > 0) { $rw_tagSentencesWithFrames(pCb.frames); } else { if(pCb.document && pCb.document.body) { $rw_tagSentences(pCb.document.body); } } } catch(err) { } } } }}var qCb ="[\\x21\\x2E\\x3F\\x3A]";var rCb = /[\n\r\t ]{2,}/g;function $rw_tagSentences(HWb){ if(typeof(HWb) =='undefinded'|| HWb == null) { HWb = document.body; } try { var sCb = false; var tCb = false; if(Bda >= 200 && Bda < 300) { tCb = true; } Bea = tCb; var hNb = HWb; while(hNb != null) { if(hNb.nodeType == 3) { var oQb = hNb.parentNode.tagName.toLowerCase(); if(oQb =="textarea") { hNb = SSDOM.getNextNode(hNb, false, null); continue; } var Dtb = hNb.nodeValue; var xCb = Dtb.trimSpaceTH(); var aDb = xCb.length > 0; if(pda && oQb =="a") { aDb = false; } if(!aDb) { if(Zda || Nda && (Bea || Yda || Lea) ) { if(sCb) { if(!pda) { hNb.nodeValue =" "; } sCb = false; hNb = SSDOM.getNextNode(hNb, false, null); } else { var OAc = hNb; hNb = SSDOM.getNextNode(hNb, false, null); if(!pda) { OAc.parentNode.removeChild(OAc); } } } else { hNb = SSDOM.getNextNode(hNb, false, null); } } else { if(!pda) { if(Zda || Nda && (Bea || Yda || Lea) ) { if(xCb.length < Dtb.length) { var ibb = false; xCb = Dtb.trimSpaceStartTH(); if((Dtb.length - xCb.length) > 0) { if(sCb) { Dtb =" "+ xCb; } else { Dtb = xCb; } ibb = true; } xCb = Dtb.trimSpaceEndTH(); if((Dtb.length - xCb.length) > 1) { Dtb = xCb +" "; sCb = false; ibb = true; } if(ibb) { hNb.nodeValue = Dtb; } } xCb = Dtb.replace(rCb," "); if(xCb.length < Dtb.length) { Dtb = xCb; ibb = true; } } } var hzb; hzb = Dtb.search(qCb); var CDb = (hNb.parentNode.getAttribute("texthelpSkip") != null); var DDb = hNb; if(hzb > -1 && hzb < (Dtb.length - 1)) { var EDb = true; while(true) { var Mgb = jDb(Dtb, hzb, hNb); if(Mgb) { break; } else { var GDb = Dtb.substring(hzb + 1); var Iob = GDb.search(qCb); if(Iob > -1) { hzb = hzb + 1 + Iob; } else { EDb =false; break; } } } if(EDb) { var IDb = Dtb.substring(0, hzb + 1); var JDb = Dtb.substring(hzb + 1); var span = document.createElement("span"); span.setAttribute(eaa,"1"); var SDb = document.createTextNode(IDb); var MDb = document.createTextNode(JDb); var TDb = hNb.parentNode; TDb.insertBefore(MDb, hNb); TDb.insertBefore(span, MDb); span.appendChild(SDb); TDb.removeChild(hNb); hNb = MDb; DDb = SDb; } else { if(hNb.previousSibling != null || hNb.nextSibling != null || CDb) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var SDb = document.createTextNode(Dtb); var TDb = hNb.parentNode; TDb.insertBefore(span, hNb); span.appendChild(SDb); TDb.removeChild(hNb); hNb = SDb; } DDb = hNb; hNb = SSDOM.getNextNode(hNb, false, null); } } else { if(hNb.previousSibling != null || hNb.nextSibling != null || CDb) { var span = document.createElement("span"); span.setAttribute(eaa,"1"); var SDb = document.createTextNode(Dtb); var TDb = hNb.parentNode; TDb.insertBefore(span, hNb); span.appendChild(SDb); TDb.removeChild(hNb); hNb = SDb; } DDb = hNb; hNb = SSDOM.getNextNode(hNb, false, null); } if(Zda || Nda && (Bea || Yda || Lea) ) { var UDb = DDb.nodeValue; var VDb = DDb.nodeValue.length; if(VDb > 0 && UDb.charCodeAt(VDb - 1) == 32) { sCb = false; } else { sCb = true; } } } } else if(hNb.nodeType == 1) { if(Zda) { if(!SSDOM.isStyleNode(hNb)) { if(SSDOM.isLineBreakNode(hNb)) { sCb = false; } } else if(hNb.tagName.toLowerCase() =="img") { sCb = true; } } if(tCb) { if(hNb.tagName.toLowerCase() =="img") { var TQb = hNb.getAttribute("title"); if(TQb != null && TQb.length > 0) { hNb.setAttribute("msg", TQb); } } } else if(Gea) { if(hNb.tagName.toLowerCase() =="img") { var TQb = hNb.getAttribute("msg"); if(!(TQb != null && TQb.length > 0)) { TQb = hNb.getAttribute("title"); if(TQb != null && TQb.length > 0) { hNb.setAttribute("msg", TQb); } else { TQb = hNb.getAttribute("alt"); if(TQb != null && TQb.length > 0) { hNb.setAttribute("msg", TQb); } } } } } var eDb = hNb.getAttribute(caa); var fDb = hNb.getAttribute(baa); if(hNb.tagName.toLowerCase() =="pre"|| (eDb != null && eDb.length > 0) || (fDb != null && fDb.length > 0)) { hNb = SSDOM.getNextNodeIgnoreChildren(hNb, false, null); } else { hNb = SSDOM.getNextNode(hNb, false, null); } } else { hNb = SSDOM.getNextNode(hNb, false, null); } } if(Zda) { hNb = HWb; while(hNb != null) { if(hNb.nodeType==3) { var aDb = hNb.nodeValue.trimTH().length > 0; if(aDb) { var bDb = hNb.parentNode; var cDb = bDb.getAttribute("id"); if(cDb == null || cDb.length == 0) { bDb.id ="rwTHnoteMarker"+ mfa; ++mfa; } } hNb = SSDOM.getNextNode(hNb, false, null); } else if(hNb.nodeType == 1) { if(Jjb(hNb)) { var dDb = hNb.getAttribute("id"); if(dDb == null || dDb.length == 0) { hNb.id ="rwTHnoteMarker"+ mfa; ++mfa; } } var eDb = hNb.getAttribute(caa); var fDb = hNb.getAttribute(baa); if( hNb.tagName.toLowerCase() =="pre"|| (eDb != null && eDb.length > 0) || (fDb != null && fDb.length > 0)) { hNb = SSDOM.getNextNodeIgnoreChildren(hNb, false, null); } else { hNb = SSDOM.getNextNode(hNb, false, null); } } else { hNb = SSDOM.getNextNode(hNb, false, null); } } } } catch(exception) { Kya("Error in $rw_tagSentences: "+ exception); } Aea = true;}function jDb(JOb, Adb, dsb){ var gDb = true; var wzb = JOb.length; if(wzb > Adb + 1) { var nWb = JOb.charCodeAt(Adb + 1); if(hxa(nWb)) { gDb = false; } if(qfa && nWb == 61) { if(XUb("!=")) { if(dsb != null && dsb.nodeValue.charAt(Adb) =='!') { gDb = false; } } } } if(gDb) { if(dsb != null && dsb.nodeValue.charAt(Adb) !='.') { return true; } } if(gDb) { if(Adb > 1) { var xyb = JOb.substring(Adb - 2, Adb); if( (xyb.charAt(0) ==' '|| xyb.charAt(0) =='\n'|| xyb.charAt(0) =='\r'|| xyb.charAt(0) =='\t') && xyb.charCodeAt(1) > 63 && xyb.charCodeAt(1) < 91) { gDb = false; } else if(xyb.charAt(0) =='.'&& hxa(xyb.charCodeAt(1))) { gDb = false; } else { if(xyb =="Dr"|| xyb =="Mr"|| xyb =="Ms"|| xyb =="Av"|| xyb =="St"|| xyb =="eg") { gDb = false; } else if(Adb > 2) { var wyb = JOb.substring(Adb - 3, Adb); if(wyb =="Mrs"|| wyb =="etc"|| wyb =="i.e"|| wyb =="P.O"|| wyb =="PhD") { gDb = false; } else if(Adb > 3) { var pDb = JOb.substring(Adb - 4, Adb); if(pDb =="Ph.D") { gDb = false; } } } } } else { try { if(dsb != null && Adb == 0) { if(sda) { var COb = null; if(dsb.previousSibling != null && dsb.previousSibling.nodeType == 1) { COb = dsb.previousSibling; } else if(dsb.parentNode.previousSibling != null && dsb.parentNode.previousSibling.nodeType == 1) { COb = dsb.parentNode.previousSibling; } else { var hNb = dsb.parentNode; while(hNb != null && hNb.parentNode.tagName.toLowerCase() =="span") { if(hNb.parentNode.previousSibling != null && hNb.parentNode.previousSibling.nodeType == 1) { COb = hNb.parentNode.previousSibling; break; } hNb = hNb.parentNode; } } if(COb != null) { if(COb.nodeType == 1 && COb.tagName.toLowerCase() =="span") { TQb = COb.getAttribute(("class")); yNb = COb.getAttribute(("className")); var AOb; AOb = (TQb != null && (TQb.toLowerCase() =="x2"|| TQb.toLowerCase() =="x3")) || (yNb != null && (yNb.toLowerCase() =="x2"|| yNb.toLowerCase() =="x3")); if(AOb) { if(COb.lastChild.nodeType == 1) { while(COb != null && COb.lastChild != null && COb.lastChild.nodeType != 3) { COb = COb.lastChild; } } if(COb != null && COb.lastChild.nodeType == 3 && COb != dsb) { return jDb(COb.lastChild.nodeValue + JOb, COb.lastChild.nodeValue.length, null); } else { return true; } } } } } else { var Yub = SSDOM.getPreviousTextNode(dsb, true, null); if(Yub != null && Yub.nodeType ==3 && Yub != dsb) { if(!jDb(Yub.nodeValue + JOb, Yub.nodeValue.length, null)) { return false; } else { return true; } } } } } catch(err) { } } } if(gDb && eba_abbr_array != null && typeof(eba_abbr_array) =="object"&& typeof(eba_abbr_array.length) =="number") { var uDb = eba_abbr_array.length; var i; var vDb; for(i=0; i< uDb; i++) { vDb = eba_abbr_array[i]; if(typeof(vDb) =="string") { if(Adb - vDb.length > -1) { if(JOb.substring(Adb - vDb.length, Adb) == vDb) { gDb = false; break; } } } } } return gDb;}var wDb = null;function xDb(event){ wDb = event.currentTarget;}function yDb(TAc, eventType, pqb){ if(gfa) { if(TAc.document && TAc.document.body && TAc.document.body.screen) { return true; } if(TAc.location) { return true; } } return zDb(TAc, eventType, pqb);}function zDb(TAc, eventType, pqb){ if (TAc.addEventListener) { if(Qga) { TAc.addEventListener(eventType, pqb, true); } else { TAc.addEventListener(eventType, pqb, false); } return true; } else if (TAc.attachEvent) { return TAc.attachEvent("on"+ eventType, pqb); } else { return false; }}function AEb(ev){ if(ffa) { return {x:(ev.touches[0].pageX - document.body.scrollLeft), y:(ev.touches[0].pageY - document.body.scrollTop)}; } if (ev.pageX) { if(Jfa) { return {x:(ev.pageX - document.documentElement.scrollLeft), y:(ev.pageY - document.documentElement.scrollTop)}; } else if(Kfa) { return {x:(ev.pageX - document.body.parentNode.scrollLeft), y:(ev.pageY - document.body.parentNode.scrollTop)}; } else { return {x:(ev.pageX - document.body.scrollLeft), y:(ev.pageY - document.body.scrollTop)}; } } else { return {x:ev.clientX, y:ev.clientY}; }}function CEb(Pob){ var left = 0; var top = 0; if(typeof(jQuery) !="undefined"&& typeof(Pob.id) =="string"&& Pob.id.indexOf("summary") == 0) { var el = $(Pob); if(el != null && el.length && el.length > 0) { var Opb = el.position(); left = Opb.left; top = Opb.top; left -= rw_getScreenOffsetLeft(); top -= rw_getScreenOffsetTop(); return {x:left, y:top}; } } if(Pob.nodeType == 3) { Pob = Pob.parentNode; } while (Pob.offsetParent) { left += Pob.offsetLeft + (Pob.currentStyle ? (parseInt(Pob.currentStyle.borderLeftWidth, 10)).NaN0():0); top += Pob.offsetTop + (Pob.currentStyle ? (parseInt(Pob.currentStyle.borderTopWidth, 10)).NaN0():0); Pob = Pob.offsetParent; } left += Pob.offsetLeft + (Pob.currentStyle ? (parseInt(Pob.currentStyle.borderLeftWidth, 10)).NaN0():0); top += Pob.offsetTop + (Pob.currentStyle ? (parseInt(Pob.currentStyle.borderTopWidth, 10)).NaN0():0); left -= rw_getScreenOffsetLeft(); top -= rw_getScreenOffsetTop(); return {x:left, y:top};}var FEb = false; var GEb = false; var HEb = false; function $rw_isSpeaking(){ return FEb;}var IEb ="funplay play cyan magenta yellow green strike clear collect trans ffinder dictionary picturedictionary vocabulary";var JEb ="cyan magenta yellow green strike clear collect";var KEb ="spell homophone pred";var LEb ="funplay play hover";var MEb = 0;function PEb(UEb){ if(MEb > 0) { clearTimeout(MEb); MEb = 0; } if($g_bMouseSpeech) { UEb = true; } if(GEb == UEb) { return; } try { var NEb = SpeechStream.EnumIconParameter; for (var i = 0; i < nea; i++) { var knb = g_icons[i][NEb.ICON_NAME]; if (IEb.indexOf(knb) > -1) { if (UEb) { eza(g_icons[i][NEb.ICON_NAME],"mask", g_icons[i][NEb.ICON_OFFSET], false); } else { eza(g_icons[i][NEb.ICON_NAME],"flat", g_icons[i][NEb.ICON_OFFSET], false); } } } GEb = UEb; } catch(err) { thLogE(err); }}function REb(UEb){ if(Sea != null) { if(HEb == UEb) { return; } try { if (UEb) { Yza("speaker"+Sea,"on"); } else { Yza("speaker"+Sea,"off"); Sea = null; } HEb = UEb; } catch(err) { thLogE(err); } }}function TEb(UEb){ FEb = UEb;}function XEb(){ try { var Ulb = SpeechStream.EnumIconParameter; for (var i = 0; i < nea; i++) { var knb = g_icons[i][Ulb.ICON_NAME]; if (JEb.indexOf(knb) > -1) { eza(g_icons[i][Ulb.ICON_NAME],"flat", g_icons[i][Ulb.ICON_OFFSET], false); } } for (var i = 0; i < oea; i++) { var knb = mea[i][Ulb.ICON_NAME]; if (KEb.indexOf(knb) > -1) { eza(g_icons[i][Ulb.ICON_NAME],"mask", g_icons[i][Ulb.ICON_OFFSET], true); } } } catch(err) { thLogE(err); }}function aEb(Mwb){ return document.getElementById(Mwb);}function $speechFinishedInFlash(){ PEb(false); REb(false); TEb(false);}Number.prototype.NaN0 = function(){ return isNaN(this)?0:this;};function cEb(){ if (!dEb()) { setTimeout(cEb, 250); } else { $jq = jQuery.noConflict(true); }}function dEb(){ var ZEb = typeof(jQuery) !=="undefined"; if(ZEb) { var eEb = jQuery().jquery.split("."); return parseInt(eEb[0]) >=1 && parseInt(eEb[1]) >= 8; } return false;}SpeechStream.Highlighter = function(){ var self = this; this.dom = null; if(typeof(SSDOM) !="undefined") { self.dom = SSDOM; } this.setDom = function(p_dom) { self.dom = p_dom; }; this.Inb = null; if(typeof(aga) !="undefined") { self.Inb = aga; } this.setData = function(p_dat) { self.Inb = p_dat; }; var fEb ="span"; var gEb ="thhom"; this.getTagToUse = function() { return aga.pageData.strHighlightTag; }; this.setTagToUse = function(p_strTagToUse) { aga.pageData.strHighlightTag = p_strTagToUse; fEb = p_strTagToUse; }; this.getHomClass = function() { return gEb; }; this.setHomClass = function(p_strClassToUse) { gEb = p_strClassToUse; }; };SpeechStream.highlighter = new SpeechStream.Highlighter();var hEb = SpeechStream.highlighter;function $rw_setSpeechRangeStyle(LHb){ hEb.Inb.highlightData.strSpeechRangeColours = LHb;}function $rw_setSpeechWordStyle(LHb){ hEb.Inb.highlightData.strSpeechWordColours = LHb;}function $rw_getSpeechRangeStyle(){ return hEb.Inb.highlightData.strSpeechRangeColours;}function $rw_getSpeechWordStyle(){ return hEb.Inb.highlightData.strSpeechWordColours;}var $rw_setSpeechRangeColours = $rw_setSpeechRangeStyle;var $rw_setSpeechWordColours = $rw_setSpeechWordStyle;var $rw_getSpeechRangeColours = $rw_getSpeechRangeStyle;var $rw_getSpeechWordColours = $rw_getSpeechWordStyle;function rw_setHighlight(dMb, NGb, kSb, OGb, Xeb){ var XFb = dMb; var YFb = kSb; try { var result = null; if (kSb == dMb) { result = rw_setNodeBackground(dMb, NGb, OGb,"ss", Xeb); XFb = result.node; YFb = result.node; } else { if (NGb > 0) { result = rw_setNodeBackground(dMb, NGb, dMb.nodeValue.length,"ss", Xeb); } else { result = rw_setNodeBackground(dMb, -1, -1,"ss", Xeb); } XFb = result.node; var Yub = hEb.dom.getNextTextNodeNoImg(result.node, false, kSb, true); while (Yub != null) { if (Yub == kSb) { result = rw_setNodeBackground(Yub, 0, OGb,"ss", Xeb); Yub = result.node; YFb = Yub; break; } else { result = rw_setNodeBackground(Yub, -1, -1,"ss", Xeb); Yub = result.node; } YFb = Yub; Yub = hEb.dom.getNextTextNodeNoImg(Yub, false, kSb, true); } } } catch(err){Kya("rw_setHighlight error:"+ err.message); } return {start: XFb, end: YFb};}var uEb = 1;var vEb = 1;var wEb = 1;function yEb(dMb, NGb, kSb, OGb){ var Fgb =""+ uEb++; var XFb = dMb; var YFb = kSb; try { var result = null; if (kSb == dMb) { result = rw_setNodeBackground(dMb, NGb, OGb,"spell", Fgb); XFb = result.node; YFb = result.node; } else { if (NGb > 0) { result = rw_setNodeBackground(dMb, NGb, dMb.nodeValue.length,"spell", Fgb); } else { result = rw_setNodeBackground(dMb, -1, -1,"spell", Fgb); } XFb = result.node; var Yub = hEb.dom.getNextTextNodeNoImg(result.node, false, kSb, true); while (Yub != null) { if (Yub == kSb) { result = rw_setNodeBackground(Yub, 0, OGb,"spell", Fgb); Yub = result.node; YFb = Yub; break; } else { result = rw_setNodeBackground(Yub, -1, -1,"spell", Fgb); Yub = result.node; } YFb = Yub; Yub = hEb.dom.getNextTextNodeNoImg(Yub, false, kSb, true); } } } catch(err){Kya("rw_setHighlight error:"+ err.message); } return {start: XFb, end: YFb};}function IFb(dMb, NGb, kSb, OGb){ var Fgb =""+ vEb++; var XFb = dMb; var YFb = kSb; try { var result = null; if (kSb == dMb) { result = rw_setNodeBackground(dMb, NGb, OGb,"hom", Fgb); XFb = result.node; YFb = result.node; } else { if (NGb > 0) { result = rw_setNodeBackground(dMb, NGb, dMb.nodeValue.length,"hom", Fgb); } else { result = rw_setNodeBackground(dMb, -1, -1,"hom", Fgb); } XFb = result.node; var Yub = hEb.dom.getNextTextNodeNoImg(result.node, false, kSb, true); while (Yub != null) { if (Yub == kSb) { result = rw_setNodeBackground(Yub, 0, OGb,"hom", Fgb); Yub = result.node; YFb = Yub; break; } else { result = rw_setNodeBackground(Yub, -1, -1,"hom", Fgb); Yub = result.node; } YFb = Yub; Yub = hEb.dom.getNextTextNodeNoImg(Yub, false, kSb, true); } } } catch(err){Kya("rw_setHighlight error:"+ err.message); } return {start: XFb, end: YFb};}function SFb(dMb, NGb, kSb, OGb){ var Fgb =""+ wEb++; var XFb = dMb; var YFb = kSb; try { var result = null; if (kSb == dMb) { result = rw_setNodeBackground(dMb, NGb, OGb,"grammar", Fgb); XFb = result.node; YFb = result.node; } else { if (NGb > 0) { result = rw_setNodeBackground(dMb, NGb, dMb.nodeValue.length,"grammar", Fgb); } else { result = rw_setNodeBackground(dMb, -1, -1,"grammar", Fgb); } XFb = result.node; var Yub = hEb.dom.getNextTextNodeNoImg(result.node, false, kSb, true); while (Yub != null) { if (Yub == kSb) { result = rw_setNodeBackground(Yub, 0, OGb,"grammar", Fgb); Yub = result.node; YFb = Yub; break; } else { result = rw_setNodeBackground(Yub, -1, -1,"grammar", Fgb); Yub = result.node; } YFb = Yub; Yub = hEb.dom.getNextTextNodeNoImg(Yub, false, kSb, true); } } } catch(err){Kya("rw_setHighlight error:"+ err.message); } return {start: XFb, end: YFb};}function hFb(wFb){ try { if (wFb == null || !(wFb instanceof Array) || wFb.length == 0) { return; } for (var i = 0; i < wFb.length; i++) { var OAc = wFb[i]; if (jFb(OAc)) { var HHb = OAc.parentNode; if(OAc.nextSibling != null || OAc.previousSibling != null) { var Dtb = SSDOM.allTextFromNodeTH(HHb); var lub = HHb.ownerDocument; OAc = lub.createTextNode(Dtb); } var CGb = HHb.parentNode; CGb.replaceChild(OAc, HHb); OAc = hEb.dom.mergeTextNodes(OAc); wFb[i] = OAc; } else { var sFb = mFb(OAc); if(sFb != null) { sFb.removeAttribute("rwstate"); sFb.removeAttribute("style"); } } } if(!aga.controlData.bSpeakingFlag) { rw_removeSpeechHighlight(wFb, false); } } catch(err){Kya("Error in rw_setHighlight: "+ err.message);}}function jFb(dsb){ if(dsb.parentNode == null || dsb.parentNode.parentNode == null) { return false; } var parent = dsb.parentNode; var attr = parent.getAttribute("rwstate"); if(parent.tagName.toLowerCase() != SpeechStream.highlighter.getTagToUse() || attr == null || attr =="csp"|| attr =="sp") { return parent.className =="thspell"|| parent.className == SpeechStream.highlighter.getHomClass() || parent.className =="thgrammar"; } return true;}function mFb(dsb){ if (dsb.nodeType != 3 || dsb.parentNode == null || dsb.parentNode.parentNode == null) { return null; } var GHb = SpeechStream.highlighter.getTagToUse(); var parent = dsb.parentNode; var attr = parent.getAttribute("rwstate"); if(parent.tagName.toLowerCase() != GHb || attr == null || attr !="ss") { if(parent.getAttribute("rwthgen") != null) { var qpb = parent; attr ="1"; while(attr != null) { qpb = qpb.parentNode; if(qpb.getAttribute("rwState") =="ss"&& qpb.tagName.toLowerCase() == GHb) { return qpb; } attr = qpb.getAttribute("rwthgen"); } } return null; } return parent;}function tFb(wFb){ try { if (wFb == null || !(wFb instanceof Array) || wFb.length == 0) { return; } for (var i = 0; i < wFb.length; i++) { var OAc = wFb[i]; if(OAc == null) { continue; } if (jFb(OAc)) { var HHb = OAc.parentNode; var CGb = HHb.parentNode; if(OAc.nextSibling != null || OAc.previousSibling != null) { var node = HHb.firstChild; while(node != null) { OAc = node; node = node.nextSibling; CGb.insertBefore(OAc, HHb); } CGb.removeChild(HHb); } else { CGb.replaceChild(OAc, HHb); } } else { var sFb = mFb(OAc); if(sFb != null) { sFb.removeAttribute("rwstate"); sFb.removeAttribute("style"); } } } } catch(err){Kya("Error in rw_setHighlight: "+ err.message);}}function rw_removeSpeechHighlight(wFb, FGb){ try { if(typeof(FGb) =="undefined") { FGb=false; } if (wFb == null || !(wFb instanceof Array) || wFb.length == 0) { return; } for (var i = 0; i < wFb.length; i++) { var OAc = wFb[i]; if (DGb(OAc, FGb)) { var HHb = OAc.parentNode; if(OAc.nextSibling != null || OAc.previousSibling != null) { var Dtb = SSDOM.allTextFromNodeTH(HHb); var lub = HHb.ownerDocument; OAc = lub.createTextNode(Dtb); } var CGb = HHb.parentNode; CGb.replaceChild(OAc, HHb); OAc = SSDOM.mergeTextNodes(OAc); wFb[i] = OAc; if(DGb(OAc, FGb)) { --i; } } else { var tagName =""; if(OAc.nodeType == 1) { tagName = OAc.tagName.toLowerCase(); } if(tagName=="math") { IHb(OAc, null, null, false); } if(OAc.isMathJax) { IHb(OAc, null, null, false); } } } } catch(err) { Kya("rw_removeSpeechHighlight failed error:"+ err.message); }}function DGb(dsb, FGb){ if (dsb.nodeType != 3 || dsb.parentNode == null || dsb.parentNode.parentNode == null) { return false; } var parent = dsb.parentNode; var attr = parent.getAttribute("rwstate"); if (parent.tagName.toLowerCase() == SpeechStream.highlighter.getTagToUse() && attr != null) { if((!FGb && attr =="sp") || attr =="csp") { return true; } } return false;}function rw_setSpeechRangeImpl(dMb, NGb, kSb, OGb, PGb){ var result = null; try { if (kSb == dMb) { result = rw_setNodeBackground(dMb, NGb, OGb, PGb,""); return result; } if (NGb > 0) { result = rw_setNodeBackground(dMb, NGb, dMb.nodeValue.length, PGb,""); } else { result = rw_setNodeBackground(dMb, -1, -1, PGb,""); } var Yub = hEb.dom.getNextTextNodeNoImg(result.node, false, kSb, true); while (Yub != null) { if (Yub == kSb) { result = rw_setNodeBackground(Yub, 0, OGb, PGb,""); Yub = result.node; break; } else { result = rw_setNodeBackground(Yub, -1, -1, PGb,""); Yub = result.node; } Yub = hEb.dom.getNextTextNodeNoImg(Yub, false, kSb, true); } } catch(err) { Kya("rw_setSpeechRangeImpl error:"+ err.message); } return result;}function RGb(){ this.node = null; this.offset = 0;}function rw_setNodeBackground(lGb, mGb, nGb, oGb, pGb){ var iRb = new RGb(); iRb.node = lGb; iRb.offset = mGb; if (lGb.nodeType != 3) { if(lGb.nodeType == 1 && hEb.dom.isSpecialCaseHighlightable(lGb)) { if(lGb.tagName.toLowerCase() =="math") { var HHb = lGb.parentNode; iRb = jGb(HHb, lGb, mGb, nGb, oGb,""); } else if(lGb.isMathJax) { var HHb = lGb.parentNode; iRb = jGb(HHb, lGb, mGb, nGb, oGb,""); } else { var bGb = hEb.dom.getFirstChildTextNode(lGb, false); var cGb = hEb.dom.getLastChildTextNode(lGb, false); if(bGb != null && bGb.nodeType == 3 && cGb != null && cGb.nodeType == 3) { rw_setSpeechRangeImpl(bGb, 0, cGb, cGb.nodeValue.length, oGb); iRb.node = bGb; iRb.offset = 0; } else { } } return iRb; } else { return iRb; } } if(lGb.nodeType == 3) { var Dtb = lGb.nodeValue; Dtb = Dtb.trimTH(); if(Dtb.length == 0) { var Tkb = lGb.parentNode; if(Tkb != null) { var tyb = Tkb.tagName.trimTH().toLowerCase(); if(tyb =="tr"|| tyb =="table") { return iRb; } } } } var HHb = lGb.parentNode; var hGb = null; if(HHb.tagName.toLowerCase() == SpeechStream.highlighter.getTagToUse()) { hGb = HHb.getAttribute("rwstate"); } if(oGb =="spell") { if(hGb == null || hGb =="") { iRb = jGb(HHb, lGb, mGb, nGb, oGb, pGb); } else { return iRb; } } else if(oGb =="hom") { if(hGb == null || hGb =="") { iRb = jGb(HHb, lGb, mGb, nGb, oGb, pGb); } else { return iRb; } } else if(oGb =="grammar") { if(hGb == null || hGb =="") { iRb = jGb(HHb, lGb, mGb, nGb, oGb, pGb); } else { return iRb; } } else if(oGb =="ss") { if(hGb == null || hGb =="") { iRb = jGb(HHb, lGb, mGb, nGb, oGb, pGb); } else if (hGb =="ss") { return iRb; } else { return iRb; } } else if (oGb =="sp") { if (hGb =="csp") { Kya("fail in rw_setNodeBackground setting sp to csp"); return iRb; } if (hGb =="sp") { Kya("fail in rw_setNodeBackground setting sp to sp"); return iRb; } iRb = jGb(HHb, lGb, mGb, nGb, oGb,""); } else if (oGb =="csp") { if (hGb =="csp") { Kya("fail parent is csp for csp"); return iRb; } if (hGb =="sp") { iRb = jGb(HHb, lGb, mGb, nGb, oGb,""); } else { } } else { } return iRb;}function jGb(kGb, lGb, mGb, nGb, oGb, pGb){ var iGb = oGb==="sp"|| oGb==="csp";var tagName =""; if(lGb.nodeType == 1) { tagName = lGb.tagName.toLowerCase(); } if((lGb.nodeType == 3 && (nGb == -1 || nGb > mGb)) || tagName =="math"|| lGb.isMathJax) { var qGb; if (oGb =="ss") { if(pGb =="strikethrough") { qGb ="text-decoration:line-through"; } else { qGb ="background:"+ pGb; } } else if(oGb =="sp") { qGb = hEb.Inb.highlightData.strSpeechRangeColours; } else if(oGb =="csp") { qGb = hEb.Inb.highlightData.strSpeechWordColours; } else if(oGb =="spell") { qGb =""; } else if(oGb =="hom") { qGb =""; } else if(oGb =="grammar") { qGb =""; } else { qGb ="color:#ff000; background:#00ff00"; } if(tagName =="math"|| lGb.isMathJax) { if(iGb) { IHb(lGb, oGb, qGb, true); } } else { var wzb = lGb.nodeValue.length; if( (wzb == 1 && (lGb.nodeValue =="\n"|| lGb.nodeValue =="\r") ) || (wzb == 2 && lGb.nodeValue =="\r\n") ) { var iRb = new RGb(); iRb.node = lGb; if (mGb < 0) { iRb.offset = 0; } else { iRb.offset = mGb; } return iRb; } var lub = kGb.ownerDocument; var Cmb = false; if (mGb == -1 && nGb == -1) { Cmb = true; } else if (nGb == -1) { nGb = wzb; } if (mGb == 0 && nGb >= wzb) { Cmb = true; } var PHb = lub.createElement(aga.pageData.strHighlightTag); if(oGb =="spell") { PHb.setAttribute("spellnum", pGb); if(hEb.Inb.browser.bIE) { PHb.setAttribute("className","thspell"); qGb ="background:url(\""+ jya(false) + eba_language_server +"/SupportedWritingArea/files/tiny_mce/themes/advanced/skins/default/img/wline.gif\")  repeat-x bottom left"; } else { PHb.className ="thspell"; } } if(oGb =="hom") { var xGb = SpeechStream.highlighter.getHomClass(); PHb.setAttribute("homnum", pGb); if(hEb.Inb.browser.bIE) { PHb.setAttribute("className", xGb); qGb ="background:url(\""+ jya(false) + eba_language_server +"/SupportedWritingArea/files/tiny_mce/themes/advanced/skins/default/img/wlineblue.gif\")  repeat-x bottom left"; } else { PHb.className = xGb; } } if(oGb =="grammar") { var xGb ="thgrammar"; PHb.setAttribute("grammarnum", pGb); if(hEb.Inb.browser.bIE) { PHb.setAttribute("className","thgrammar"); qGb ="background:url(\""+ jya(false) + eba_language_server +"/SupportedWritingArea/files/tiny_mce/themes/advanced/skins/default/img/wlinegreen.gif\")  repeat-x bottom left"; } else { PHb.className = xGb; } } if (Cmb) { if(hEb.Inb.browser.bIEOld) { PHb.style.setAttribute("cssText", qGb, 0); } else { PHb.setAttribute("style", qGb); } PHb.setAttribute("rwstate", oGb); if(iGb) { PHb.setAttribute("started","1"); } kGb.replaceChild(PHb, lGb); PHb.appendChild(lGb); } else { var Dtb = lGb.nodeValue; var zGb; var AHb; var BHb; if (kGb.tagName.toLowerCase() =="span"&& kGb.getAttribute("pron") != null) { zGb =""; AHb = Dtb; BHb =""; } else { zGb = Dtb.substring(0, mGb); AHb = Dtb.substring(mGb, nGb); BHb = Dtb.substring(nGb); } if(hEb.Inb.browser.bIEOld) { PHb.style.setAttribute("cssText", qGb, 0); } else { PHb.setAttribute("style", qGb); } PHb.setAttribute("rwstate", oGb); if(iGb) { PHb.setAttribute("started","1"); } var CHb = null; var Olb; var EHb = null; if (zGb.length > 0) { CHb = lub.createTextNode(zGb); } Olb = lub.createTextNode(AHb); if (BHb.length > 0) { EHb = lub.createTextNode(BHb); } PHb.appendChild(Olb); kGb.replaceChild(PHb, lGb); if (CHb != null) { kGb.insertBefore(CHb, PHb); } if (EHb != null) { if (PHb.nextSibling == null) { kGb.insertBefore(EHb, null); } else { kGb.insertBefore(EHb, PHb.nextSibling); } } lGb = Olb; } } } var iRb = new RGb(); iRb.node = lGb; if (mGb < 0) { iRb.offset = 0; } else { iRb.offset = mGb; } return iRb;}function IHb(JHb, KHb, LHb, MHb){ if(JHb == null) { return; } var GHb = aga.pageData.strHighlightTag; if(hEb.Inb.browser.bIE) { var HHb = JHb.parentNode; if(HHb == null) { return; } if(HHb.tagName.toLowerCase() == GHb && HHb.getAttribute("started") != null) { if(MHb) { HHb.style.setAttribute("cssText", LHb, 0); HHb.setAttribute("rwstate", KHb); } else { var NHb = HHb.parentNode; if(NHb == null) { return; } NHb.replaceChild(JHb, HHb); } } else { if(MHb) { var OHb = document.createElement(GHb); OHb.style.setAttribute("cssText", LHb, 0); OHb.setAttribute("started","1"); OHb.setAttribute("rwstate", KHb); HHb.replaceChild(OHb, JHb); OHb.appendChild(JHb); } } } else { var PHb = JHb.firstChild; while(PHb != null) { if(PHb.nodeType == 1) { if(MHb) { if(PHb.getAttribute("started") != null) { PHb.setAttribute("style", LHb); PHb.setAttribute("rwstate", KHb); } else { if(PHb.getAttribute("style") == null) { PHb.setAttribute("style", LHb); PHb.setAttribute("rwstate", KHb); PHb.setAttribute("started","1"); } } } else { if(PHb.getAttribute("started") != null) { PHb.removeAttribute("style"); PHb.removeAttribute("started"); PHb.removeAttribute("rwstate"); } } } PHb = PHb.nextSibling; } }}function SHb(THb, UHb){ if (THb == UHb) { return 0; } var QHb = SSDOM.getRangeObject(THb.ownerDocument.body); QHb.setStart(THb, 0); QHb.setEnd(THb, 0); var RHb = SSDOM.getRangeObject(THb.ownerDocument.body); RHb.setStart(UHb, 0); RHb.setEnd(UHb, 0); return (QHb.compareBoundaryPoints("START_TO_START", RHb));}function VHb(event){}function WHb(event){ if(!aga.controlData.bOnloadFinished) { return; } var target = event.target || event.srcElement; if(target.id =='rwDragMe'|| target.id =='rwToolbarTitleRW'|| target.id =='rwDragMeDisplay'|| target.id =='rwDragMeTrans'|| target.id =='rwDragMeFF'|| target.id =='rwDragMeDict'|| target.id =='rwDragMeCollect'|| target.id =='rwDragMeStickyNoteTop'|| target.id =='rwDragMeStickyNoteBot'|| target.id =='rwDragMePronCreate'|| target.id =='rwDragMePronEdit'|| target.id =='rwDragMeCal'|| target.id =='rwDragMePictureDictionary'|| target.id =='rwDragMeRec'|| target.id =='rwDragMePrediction'|| target.id =='rwDragMeSpelling'|| target.id =='rwDragMeHomophone'|| target.id =='rwDragMeGrammar') { sea = target; tea = true; if(Qga) { if(target.id =='rwToolbarTitleRW') { sea.parentElement.parentElement.style.opacity = 0.5; } else { sea.parentElement.style.opacity = 0.5; } } if (sea.setCapture) {sea.setCapture(true); } rea = CEb(sea); if(target.id =='rwDragMeStickyNoteBot') { rea.y -= target.offsetTop; } qea = AEb(event); return false; }}function XHb(event){ SpeechStream.ipadUtils.tinyMceBlurFix(); WHb(event);}function YHb(event){ if(!aga.controlData.bOnloadFinished) { return; } var target = event.target || event.srcElement; if (target.tagName =="IMG"&& target.className =="rwIcon") { CIb(event); return false; }}function aHb(event){ SpeechStream.ipadUtils.tinyMceBlurFix(); YHb(event);}var ZHb = 0;function cHb(event){ if(!aga.controlData.bOnloadFinished) { return; } var dJb = (new Date).getTime(); if((dJb - ZHb) < Aha ) { return; } ZHb = dJb; if (event != null) { if (!tea) { if($g_bMouseSpeech && Vca) { FLb(event); } if(nfa) { jib(event); } } }}function dHb(event){ if(!aga.controlData.bOnloadFinished) { return; } if (event != null) { if (!tea) { if(Yfa) { if($g_bMouseSpeech && !Vca) { FLb(event); } else if(aga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.mouseHoverBubblePopup(event); } else if(((jca & calculator_icon) == calculator_icon) && typeof(Dnb) =="function"&& Dnb()) { if(wHb(event)) { FLb(event, true); } } } } }}var eHb = -1;var fHb = -1;function iHb(event){ if(!aga.controlData.bOnloadFinished) { return; } if (event == null) { return true; } if(Lfa) { var gHb = event.clientX; var hHb = event.clientY; if(eHb == gHb && fHb == hHb) { return; } eHb = gHb; fHb = hHb; } if(sea == null) { if($g_bMouseSpeech && (afa || Lfa) && !Vca) { FLb(event); } else if(aga.bubbleData.bBubbleMode) { SpeechStream.bubbleSpeech.mouseHoverBubblePopup(event); } else if(((jca & calculator_icon) == calculator_icon) && typeof(Dnb) =="function"&& Dnb() && (afa || Lfa)) { if(wHb(event)) { FLb(event, true); } } tea = false; return true; } var OVb = AEb(event); if(!efa) { if (OVb.x < 0 || OVb.y < 0 || OVb.x > rw_getDocumentDisplayWidth() || OVb.y > rw_getDocumentDisplayHeight()) { CIb(event); return false; } } var kHb; var lHb; var mHb = false; var nHb = 1.0; if(Lfa && !Jfa && Sfa) { var a1 = document.body.offsetWidth; var a2 = document.documentElement.offsetWidth; nHb = (a1 / a2); if(nHb > 1.05 || nHb < 99.5) { mHb = true; } } if(mHb && !efa) { var qHb = (nHb * qea.x) - (rea.x); var rHb = (nHb * qea.y) - (rea.y); kHb = (((nHb * OVb.x) - qHb)) / nHb; lHb = (((nHb * OVb.y) - rHb)) / nHb; } else { var qHb = qea.x - (rea.x); var rHb = qea.y - (rea.y); kHb = (OVb.x - qHb); lHb = (OVb.y - rHb); } if(sea == null) { return; } if(sea.id =='rwDragMe'|| sea.id =='rwToolbarTitleRW') { UKb(kHb, lHb); if(!efa) { if ((kHb + Bfa + uea) > rw_getDocumentDisplayWidthAdjusted()) { kHb = rw_getDocumentDisplayWidthAdjusted() - Bfa - uea; yea = 1.0; } } if (kHb < uea) { kHb = uea; yea = 0.0; } if(!efa) { if ((lHb + Cfa + uea) > rw_getDocumentDisplayHeightAdjusted()) { lHb = rw_getDisplayHeightAdjusted() - Cfa - uea; zea = 1.0; } } if (lHb < uea) { lHb = uea; zea = 0.0; } IKb(); CIb(event); } else if(sea.id =='rwDragMeTrans'|| sea.id =='rwDragMeFF'|| sea.id =='rwDragMeDict'|| sea.id =='rwDragMeDisplay'|| sea.id =='rwDragMeCollect'|| sea.id =='rwDragMeStickyNoteTop'|| sea.id =='rwDragMeStickyNoteBot'|| sea.id =='rwDragMePronCreate'|| sea.id =='rwDragMePronEdit'|| sea.id =='rwDragMeCal'|| sea.id =='rwDragMeGencache'|| sea.id =='rwDragMeCheckcache'|| sea.id =='rwDragMePictureDictionary'|| sea.id =='rwDragMeRec'|| sea.id =='rwDragMePrediction'|| sea.id =='rwDragMeSpelling'|| sea.id =='rwDragMeHomophone'|| sea.id =='rwDragMeGrammar') { var sHb; if(sea.id =='rwDragMeDisplay') { sHb = Oba; } else if(sea.id =='rwDragMeTrans') { sHb = Pba; } else if(sea.id =='rwDragMeFF') { sHb = Qba; } else if(sea.id =='rwDragMeDict') { sHb = Rba; } else if(sea.id =='rwDragMeStickyNoteTop') { sHb = Tba; } else if(sea.id =='rwDragMeStickyNoteBot') { sHb = Tba; } else if(sea.id =='rwDragMePronCreate') { sHb = Uba; } else if(sea.id =='rwDragMePronEdit') { sHb = Vba; } else if(sea.id =='rwDragMeCal') { sHb = Wba; } else if(sea.id =='rwDragMeGencache') { sHb = Xba; } else if(sea.id =='rwDragMeCache') { sHb = Yba; } else if(sea.id =='rwDragMePictureDictionary') { sHb = Zba; } else if(sea.id =='rwDragMeRec') { sHb = aba; } else if(sea.id =='rwDragMePrediction') { sHb = bba; } else if(sea.id =='rwDragMeSpelling') { sHb = cba; } else if(sea.id =='rwDragMeHomophone') { sHb = dba; } else if(sea.id =='rwDragMeGrammar') { sHb = eba; } else { sHb = Sba; } WKb(sHb, kHb, lHb); if ((kHb + Ffa[sHb] + uea) > rw_getDocumentDisplayWidthAdjusted()) { kHb = rw_getDocumentDisplayWidthAdjusted() - Ffa[sHb] - uea; Dfa[sHb] = 1.0; } if (kHb < uea) { kHb = uea; Dfa[sHb] = 0.0; } if(!efa) { if ((lHb + Gfa[sHb] + uea) > rw_getDocumentDisplayHeightAdjusted()) { lHb = rw_getDocumentDisplayHeightAdjusted() - Gfa[sHb] - uea; Efa[sHb] = 1.0; } } if (lHb < uea) { lHb = uea; Efa[sHb] = 0.0; } OKb(sHb); CIb(event); } return false;}function tHb(event){ SpeechStream.ipadUtils.tinyMceBlurFix(); iHb(event);}function wHb(event){ var target; if(afa) { target = event.explicitOriginalTarget; } else if(Lfa) { target = event.srcElement; } else { target = event.target; } if(target != null && target.nodeType == 1) { var uHb = target.ownerDocument.body; if(target != uHb) { var lnb = target.parentNode; if(typeof(lnb.tagName)=="string") { while(lnb != null && lnb != uHb) { var oQb = lnb.tagName.toLowerCase(); if(oQb =="form") { if(lnb.id =="rw_calForm") { return true; } } lnb = lnb.parentNode; } } } } return false;}function yHb(event){ if(!aga.controlData.bOnloadFinished) { return; } if (!tea) { return true; } if (sea.releaseCapture) {sea.releaseCapture(); } if(Qga) { if(sea.id =='rwToolbarTitleRW') { sea.parentElement.parentElement.style.opacity = 1.0; } else { sea.parentElement.style.opacity = 1.0; } } sea = null; tea = false; if(Qga) { window.postMessage({ type:"1757FROM_PAGE", command:"saveCookiePosition", cookiex:Dfa, cookiey:Efa, cookieBarx:yea, cookieBary:zea },"*"); } CIb(event); return false;}function zHb(event){ SpeechStream.ipadUtils.tinyMceBlurFix(); yHb(event);}function BIb(event){ if(!aga.controlData.bOnloadFinished) { return; } if (tea) { if (afa) { var OVb = AEb(event); if (OVb.x < 5 || OVb.y < 5 || OVb.x > (rw_getDocumentDisplayWidth() - 5) || OVb.y > (rw_getDocumentDisplayHeight() - 5)) { yHb(event); CIb(event); return; } } iHb(event); CIb(event); } else { if(!Vca) { rKb = null; } }}function CIb(event){ if (event == null) { return; } if (event.cancelBubble) { event.cancelBubble = true; } else if (event.stopPropagation) { event.stopPropagation(); } if (event.returnValue) { event.returnValue = false; } else if (event.preventDefault) { event.preventDefault(true); }}function DIb(Mwb, NIb, OIb){ if(wea > 0) { --wea; return; } if (tea) { return; } if($rw_blockClick(Mwb)) { return; } eza(g_icons[NIb][SpeechStream.EnumIconParameter.ICON_NAME],"hover", g_icons[NIb][SpeechStream.EnumIconParameter.ICON_OFFSET], OIb);}function HIb(Mwb, NIb, OIb){ if(wea > 0) { --wea; return; } if(tea) { return; } if($rw_blockClick(Mwb)) { return; } eza( g_icons[NIb][SpeechStream.EnumIconParameter.ICON_NAME],"flat", g_icons[NIb][SpeechStream.EnumIconParameter.ICON_OFFSET], OIb);}function LIb(Mwb, NIb, OIb){ if(Qga) { window.postMessage( { type:"1757FROM_PAGE", command:"trackEvent", settings:{'category':"FromWebReader",'action':"WebReader "+ Mwb,'label': window.location.host } },'*'); } if(wea > 0) { --wea; return; } if (tea) { return; } if($rw_blockClick(Mwb)) { return; } eza( g_icons[NIb][SpeechStream.EnumIconParameter.ICON_NAME],"toggle", g_icons[NIb][SpeechStream.EnumIconParameter.ICON_OFFSET], OIb);}function $rw_blockClick(Mwb){ if (GEb && IEb.indexOf(Mwb) > -1) { return true; } if(KEb.indexOf(Mwb) > -1) { return true; } if(Kga && (Mwb =="play"|| Mwb =="funplay"|| Mwb =="hover")) { return true; } return false;}var PIb ="rw_speechenablingdata";function RIb(){ if(Zda) { if(!wfa || !vfa) { setTimeout(RIb, 50); return; } } if(Afa && !(tda && (Mfa || Nfa)) ) { var QIb = Jwa("rwebooks-x"); var SIb = Jwa("rwebooks-y"); if ((QIb != null) && (SIb != null) && QIb !="NaN"&& SIb !="NaN") { yea = parseFloat(QIb); zea = parseFloat(SIb); } } var TIb = false; var wzb = Dfa.length; var VIb; var WIb; if(Afa && !(tda && (Mfa || Nfa)) ) { for(var i=0; i<wzb; i++) { VIb = Jwa("rwebooks-div"+ i +"x"); if(VIb != null) { Dfa[i] = parseFloat(VIb); } WIb = Jwa("rwebooks-div"+ i +"y"); if(WIb != null) { Efa[i] = parseFloat(WIb); } if(i == Tba) { if(VIb == null && WIb == null) { TIb = true; } } } } else { TIb= true; } if(TIb) { Dfa[Tba] = 0.45; if(bfa) { Efa[Tba] = 0.0; } else { Efa[Tba] = 0.35; } } IKb(); KKb(); $rw_pageSetup(); if(Zda) { if(bda !="*"&& typeof(ggb) !="undefined") { ggb(); } else { if(ada !="*"&& typeof(lkb) !="undefined") { lkb(); } } } if(Lfa) { var XIb = document.createTextNode(" "); document.body.appendChild(XIb); } if(Mda && Qda) { $rw_cachePage(null, null); } if(aga.bubbleData.bBubbleMode) { if(oda) { var YIb = SSDOM.createObject("script", ["type","text/javascript","src", aga.paths.strFileLoc +"texthelpBubble.js"]); aga.pageData.placeholder.appendChild(YIb); } if(aga.bubbleData.bBubbleModeStartDisabled) { aga.bubbleData.bBubbleMode = false; } } if(cea) { setTimeout ($rw_event_generate_cache, 1000); } if(dea) { setTimeout ($rw_event_check_cache, 1000); } aga.controlData.bOnloadFinished = true; if(typeof($rw_toolbarLoadedCallback) =="function") { $rw_toolbarLoadedCallback(); }}function ZIb(){ if(typeof(Fkb) !='undefined'&& Zda && typeof(gib) !='undefined'&& gib > -1) { Zjb(gib); } if(Afa && !(tda && (Mfa || Nfa)) ) { Pwa("rwebooks-x", yea, 20,"/", window.location.host); Pwa("rwebooks-y", zea, 20,"/", window.location.host); var wzb = Dfa.length; for(var i=0; i<wzb; i++) { Pwa("rwebooks-div"+ i +"x", Dfa[i], 20,"/", window.location.host); Pwa("rwebooks-div"+ i +"y", Efa[i], 20,"/", window.location.host); } }}var bIb = new Array();function cIb(){ bca = true; rw_pageCompleteCallBack();}function $rw_clearInstructionQueue(){ bIb.length = 0;}function dIb(){ if(bIb != null) { var i; for(i=0; i<bIb.length; i++) { if(typeof(bIb[i])=="string") { if(bIb[i].indexOf("$rw_readNextTarget") > -1) { bIb.length = i; break; } } else if(typeof(bIb[i]) =="function"&& bIb[i] == cIb) { bIb[i] =""; } } }}function iIb(XMb){ var Zbb = XMb.range; var ABc; var Lob; if(Zbb != null) { Lob = Zbb.body; ABc = SSDOM.getCaretPairFromDomPosition(Lob, Zbb.xnb.path, Zbb.xnb.offset, Zbb.ynb.path, Zbb.ynb.offset); } else if(XMb.body != null && XMb.path != null) { Lob = XMb.body; var hIb = new Xqa(SSDOM.getNodeFromPosition(Lob, XMb.path), 0, true); ABc = new dqa(hIb, hIb); } else { bIb.push("rw_pageCompleteCallBack()"); return; } aga.controlData.bIgnoreSkipSection = true; var oIb = null; var mIb = false; if(XMb.jumpId != null) { var nIb = ABc.ffb.node.ownerDocument.getElementById(XMb.jumpId); if(nIb!=null) { oIb = SSDOM.getSentenceFromPoint(new Xqa(nIb, 0, true)); mIb = true; if(oIb == null) { aga.controlData.bIgnoreSkipSection = false; return; } } } if(oIb == null) { var oIb = SSDOM.getNextSentence(ABc); if(oIb == null) { bIb.push(cIb); aga.controlData.bIgnoreSkipSection = false; return; } } while(!cya(oIb)) { oIb = SSDOM.getNextSentence(oIb); if(oIb == null) { bIb.push(cIb); aga.controlData.bIgnoreSkipSection = false; return; } } aga.controlData.bIgnoreSkipSection = false; var pIb = new THHoverTarget(null,null, RPb(oIb)); pIb.prepareTextForSpeech(); var qIb = pIb.getCaretRange(); if(!qIb.equals(oIb)) { oIb = qIb; } if(cMb(ABc.efb.node, oIb.ffb.node) && !mIb) { bIb.push(cIb); return; } bca = false; if(aga.bubbleData.bBubbleMode) { var OAc = SSDOM.getStartOfParagraph(oIb.efb.node); oIb.efb.node = OAc; oIb.ffb.node = SSDOM.getEndOfParagraph(oIb.ffb.node); oIb.efb.offset = 0; if(oIb.ffb.node.nodeType == 1) { oIb.ffb.offset = 0; } else { oIb.ffb.offset = oIb.ffb.node.length; } } var sIb = new THRange(Lob, XTb(oIb.efb.node, oIb.efb.offset), XTb(oIb.ffb.node, oIb.ffb.offset)); Fea= new THHoverTarget(null, null, sIb); var Dtb = Fea.getTextPreparedForSpeech(); if(Dtb == null || Dtb.length == 0) { bIb.push(cIb); return; } bIb.push("setTimeout($rw_readNextTarget, 50);");}function vIb(wIb){ while(wIb.length > 0) { var uIb = wIb.shift(); try { if(typeof(uIb) =="function") { uIb(); } else if(typeof(uIb) =="string") { eval(uIb); } } catch(err) { thLogE(err.message); } }}function xIb(){ this.Dtb =""; this.JMb =""; this.voice = null; this.ABc = null; }function yIb(dsb){ return aJb(FJb(dsb));}function BJb(dsb){ if(dsb != null && dsb.nodeType == 1) { var Yub = dsb.getAttribute("lang"); if(Yub == null) { try { Yub = dsb.getAttribute("xml:lang"); if(Yub != null) { return aJb(Yub); } } catch(e){} } else { return aJb(Yub); } } return null;}function FJb(dsb){ var hNb = dsb; while(hNb != null) { if(hNb.nodeType == 1) { var EJb = hNb.getAttribute("lang"); if(EJb != null && EJb.length > 0) { return EJb; } try { EJb = hNb.getAttribute("xml:lang"); if(EJb != null && EJb.length > 0) { return EJb; } } catch(e){} } hNb = hNb.parentNode; } return null;}function LJb(fTb, YNb, SJb){ var hNb = fTb; hNb = SSDOM.getNextNodeAllowMoveToChild(hNb, false, YNb); while(hNb != null) { var OJb = yIb(hNb); if(OJb != SJb) { var Usb = SSDOM.getPreviousTextNodeNoBlank(hNb, false, fTb); if(Usb == null) { Usb = SSDOM.getPreviousTextNode(hNb, false, fTb); if(Usb == null) { return null; } } if(Usb.nodeType == 3) { return new Xqa(Usb, Usb.nodeValue.length, false); } else { var Wyb = new Xqa(Usb, 0, true); Wyb.setSpecialCase(true); return Wyb; } } hNb = SSDOM.getNextNode(hNb, false, YNb); } return null;}function RJb(fTb, YNb, SJb){ var hNb = YNb; hNb = SSDOM.getPreviousNode(hNb, false, fTb); while(hNb != null) { var OJb = yIb(hNb); if(OJb != SJb) { var Usb = SSDOM.getNextTextNodeNoBlank(hNb, false, YNb); if(Usb != null) { if(Usb.nodeType == 3) { return new Xqa(Usb, 0, false); } else { var Wyb = new Xqa(Usb, 0, false); Wyb.setSpecialCase(true); return Wyb; } } else { return null; } } hNb = SSDOM.getPreviousNode(hNb, false, fTb); } return null;}function WJb(fTb, YNb, XJb){ var hNb = fTb; hNb = SSDOM.getNextNodeAllowMoveToChild(hNb, false, YNb); while(hNb != null) { var UJb = sqa(hNb); if(UJb != XJb) { var Usb = SSDOM.getPreviousTextNodeNoBlank(hNb, false, fTb); if(Usb == null) { Usb = SSDOM.getPreviousTextNode(hNb, false, fTb); if(Usb == null) { return null; } } if(Usb.nodeType == 3) { return new Xqa(Usb, Usb.nodeValue.length, false); } else { return new Xqa(Usb, 0, true); } } hNb = SSDOM.getNextNode(hNb, false, YNb); } return null;}function aJb(Ihb){ if(Ihb != null) { var nAc = Ihb.toLowerCase(); var ZJb; if(nAc =="en"|| nAc=="en-gb"|| nAc=="en-uk") { ZJb = ENGLISH; } else if(nAc =="en-us") { ZJb = ENGLISH_US; } else if(nAc =="es-us") { ZJb = SPANISH; } else if(nAc =="es"|| nAc=="es-es") { ZJb = ESPANOL; } else if(nAc =="fr"|| nAc =="fr-fr") { ZJb = FRENCH; } else if(nAc =="fr-ca") { ZJb = FRENCH_CA; } else if(nAc =="de") { ZJb = GERMAN; } else if(nAc =="it") { ZJb = ITALIAN; } else if(nAc =="nl") { ZJb = DUTCH; } else if(nAc =="sv") { ZJb = SWEDISH; } else if(nAc =="en-au") { ZJb = AUSTRALIAN; } else if(nAc =="pt-br") { ZJb = PORTUGUESE; } else if(nAc =="pt"|| nAc =="pt-pt") { ZJb = PORTUGUES; } else if(nAc =="ru") { ZJb = Kca; } else if(nAc =="pl") { ZJb = Lca; } else if(nAc =="ar") { ZJb = Mca; } else if(nAc =="zh-cn"|| nAc =="zh-tw") { ZJb = CHINESE; if(SpeechStream.translatorData.bCantoneseTarget) { ZJb = CANTONESE; } } else if(nAc =="ko") { ZJb = Oca; } else { return null; } return faa[ZJb]; } else { return null; }}var cJb="ReadHeader1 ReadSection";function ReadHeader1(){ var dJb = (new Date).getTime(); if((dJb - ega) < Aha ) { return; } ega = dJb; var IBc = document.getElementsByTagName("H1")[0]; var Olb = SSDOM.getNextNodeAllowMoveToChild(IBc, true, IBc); if(Olb == null) { return; } if(Olb.nodeType != 3) { Olb = SSDOM.getNextTextNode(Olb, true, IBc); } if(Olb == null) { return; } var Wyb = new Xqa(Olb, 0, true); var target = bLb(Wyb); if(target != null) { var unb = target.getCaretRange(); if(cya(unb)) { var start = unb.efb.node; if(target.isRange()) { var end = unb.ffb.node; start = SSDOM.getStartOfParagraph(start); end = SSDOM.getEndOfParagraph(end); var xnb = XTb(start, 0); var ynb; if(end.nodeType == 1) { ynb = XTb(end, 0); } else { ynb = XTb(end, end.nodeValue.length); } target.range = new THRange(document.body, xnb, ynb); } var nJb = Eea; $rw_stopSpeech(); Eea = false; rw_speakHoverTarget(target); Eea = nJb; } }}function $rw_getHashCodes() { var oJb =""; var pJb = SSDOM.getFirstSentence(document.body); while(pJb != null) { var nOb = zMb(pJb , new Array()); oJb = oJb + GPb() +"/"; var zOb; if(SpeechStream.cacheMode.mode == SpeechStream.cacheMode.CACHE_ONLY || SpeechStream.pronunciation.mode == SpeechStream.pronunciation.CLIENT_PRONUNCIATION_FOR_LIVE_SERVER) { zOb = GQb(nOb.Dtb); } else { zOb= GQb(nOb.JMb); } oJb = oJb + zOb +"~"; pJb = SSDOM.getNextSentence(pJb); } return oJb;}function $rw_getSoundFileLength(Isa){ var flash = dab.getConnector(); if(flash == null) { alert("Connection not available to the server."); } else { flash.getSoundFileLength(Isa); }}function $rw_soundFileLengthCallback(p_strLength){ alert(p_strLength);}SpeechStream.storedVoice = null;SpeechStream.storedSpeed = null;SpeechStream.storedCustId = null;SpeechStream.storedBookId = null;SpeechStream.storedPageId = null;function vJb(wJb, BKb, CKb, DKb, EKb){ if(SpeechStream.storedVoice == null) { SpeechStream.storedVoice = xca; SpeechStream.storedSpeed = Hda; SpeechStream.storedCustId = yca; SpeechStream.storedBookId = zca; SpeechStream.storedPageId = Ada; } if(wJb != undefined) { xca = wJb; } if(BKb != undefined) { $rw_setSpeedValue(BKb); } if(CKb != undefined) { yca = CKb; } if(DKb != undefined) { zca = DKb; } if(EKb != undefined) { Ada = EKb; } var flash = dab.getConnector(); if(flash != null) { flash.setAltSettings(wJb, BKb, CKb, DKb, EKb); }}function FKb(){ if(SpeechStream.storedVoice != null) { xca = SpeechStream.storedVoice; g_speedValue = SpeechStream.storedSpeed; yca = SpeechStream.storedCustId; zca = SpeechStream.storedBookId; Ada = SpeechStream.storedPageId; SpeechStream.storedVoice = null; SpeechStream.storedSpeed = null; SpeechStream.storedCustId = null; SpeechStream.storedBookId = null; SpeechStream.storedPageId = null; } var flash = dab.getConnector(); if(flash != null) { flash.restoreSettings(); }}/*Code designed and developed by Stuart McWilliams.*/var GKb = false;function $rw_ipadFrameScrolling(AVb, p_nStartingOffset){ GKb = true; IKb(); KKb();}function IKb(){ var nKb; nKb = document.getElementById('rwDrag').style; if (nKb == null) { return; } if(!cca) { var x; var y; if(typeof(eba_override_x) =='number'&& typeof(eba_override_y) =='number') { x = eba_override_x; y = eba_override_y; } else { var wd = rw_getDisplayWidth(); var ht = rw_getDisplayHeight(); if(Zca) { yea = 1; zea = 0; uea = 0; } if(efa) { wd = rw_getDocumentDisplayWidth(); ht = rw_getDocumentDisplayHeight(); x = wd * yea; y = ht * zea; } else { x = wd * yea; y = ht * zea; } if((x + Bfa + uea) > rw_getDisplayWidthAdjusted()) { x = rw_getDisplayWidthAdjusted() - Bfa - uea; } if (x < uea) { x = uea; } if((y + Cfa + uea) > rw_getDisplayHeightAdjusted()) { y = rw_getDisplayHeightAdjusted() - Cfa - uea; } if (y < uea) { y = uea; } if(!efa) { x = rw_getScreenOffsetLeft() + x; y = rw_getScreenOffsetTop() + y; } if(Zca) { y = 0; } } if(rw_getDisplayWidthAdjusted() < Bfa) { x = rw_getScreenOffsetLeft() + rw_getDisplayWidthAdjusted() - Bfa - uea; } if (x < uea) { x = uea; } nKb.left = x +'px'; nKb.top = y +'px'; } if(Kda) { return; } nKb.visibility ='visible'; nKb.display ="inline"; var OAc = document.getElementById("rwMainOutline"); if(OAc != null) { OAc.style.visibility ='visible'; OAc.style.display ="block"; } OAc = document.getElementById("rwMainNoOutline"); if(OAc != null) { OAc.style.visibility ='visible'; OAc.style.display ="block"; }}function KKb(){ OKb(0); OKb(1); OKb(2); OKb(3); OKb(4); OKb(5); OKb(6); OKb(7); OKb(8); OKb(9); OKb(10); OKb(11); OKb(12); OKb(13); OKb(14); OKb(15); OKb(16);}function OKb(iKb){ var LKb; var nKb; var knb; switch(iKb) { case 0: knb ="rwDisplay"; break; case 1: knb ="rwTrans"; break; case 2: knb ="rwFF"; break; case 3: knb ="rwDict"; break; case 4: knb ="rwCollect"; break; case 5: knb ="rwSticky"; break; case 6: knb ="rwPronCreate"; break; case 7: knb ="rwPronEdit"; break; case 8: knb ="rwCal"; break; case 9: knb ="rwGenerateCache"; break; case 10: knb ="rwCheckCache"; break; case 11: knb ="rwPictureDictionary"; break; case 12: knb ="rwRec"; break; case 13: knb ="rwPrediction"; break; case 14: knb ="rwSpelling"; break; case 15: knb ="rwHomophone"; break; case 16: knb ="rwGrammar"; break; default: knb ="rwDisplay"; } LKb = document.getElementById(knb); if(typeof(LKb) =='undefined'|| LKb == null) { return; } nKb = LKb.style; if (nKb == null) { return; } if(Hfa[iKb]) { nKb.display ="block"; if(nKb.visibility =='visible') { var mKb = aEb(knb); if(mKb != null) { var RKb = parseInt(mKb.offsetHeight, 10); if(!isNaN(RKb)) { Gfa[iKb] = RKb - 4; } } } var width = rw_getDocumentDisplayWidth(); var height = rw_getDocumentDisplayHeight(); var x,y; if(efa) { x = Dfa[iKb]; y = Efa[iKb] + top.window.pageYOffset; } else { x = width * Dfa[iKb]; y = height * Efa[iKb]; } var SKb = Ffa[iKb]; if(!efa) { if((x + SKb + uea) > rw_getDisplayWidthAdjusted()) { x = rw_getDisplayWidthAdjusted() - SKb - uea; } } else { if((x - top.window.pageXOffset + SKb + uea) > top.window.innerWidth) { x = top.window.innerWidth - SKb - uea + top.window.pageXOffset; } } if (x < uea) { x = uea; } var TKb = Gfa[iKb]; if(!efa) { if ((y + TKb + uea) > rw_getDisplayHeightAdjusted()) { y = rw_getDisplayHeightAdjusted() - TKb - uea; } } else { if((y - top.window.pageYOffset + TKb + uea) > top.window.innerHeight) { y = top.window.innerHeight - TKb - uea + top.window.pageYOffset; } } if (y < uea) { y = uea; } if(!efa) { x = rw_getScreenOffsetLeft() + x; y = rw_getScreenOffsetTop() + y; } if(rw_getDisplayWidthAdjusted() < Bfa) { x = rw_getScreenOffsetLeft() + rw_getDisplayWidthAdjusted() - Bfa - uea; } if (x < uea) { x = uea; } nKb.left = x +'px'; nKb.top = y +'px'; nKb.visibility ='visible'; } else { nKb.display ="none"; nKb.visibility ='hidden'; }}function UKb(x, y){ if(x<0) { x=0; } if(y<0) { y=0; } yea = x / rw_getDocumentDisplayWidth(); zea = y / rw_getDocumentDisplayHeight(); if(yea > 1) { yea = 1; } if(zea > 1) { zea = 1; }}function WKb(iKb, x, y){ if(efa) { Dfa[iKb] = x; Efa[iKb] = y; } else { Dfa[iKb] = x / rw_getDocumentDisplayWidth(); Efa[iKb] = y / rw_getDocumentDisplayHeight(); }}function $rw_divOver(iKb){ var knb; switch(iKb) { case Oba: knb ="displayImg"; break; case Pba: knb ="transImg"; break; case Qba: knb ="FFImg"; break; case Rba: knb ="dictImg"; break; case Sba: knb ="collectImg"; break; case Uba: knb ="pronCreateImg"; break; case Vba: knb ="pronEditImg"; break; case Wba: knb ="calImg"; break; case Xba: knb ="generateCacheImg"; break; case Yba: knb ="checkCacheImg"; break; case Zba: knb ="pictureDictionaryImg"; break; case aba: knb ="recImg"; break; case bba: knb ="predictImg"; break; case cba: knb ="spellingImg"; break; case dba: knb ="homophoneImg"; break; case eba: knb ="grammarImg"; break; default: knb ="displayImg"; } if (document.images[knb] != null) { document.images[knb].src = aga.paths.strFileLoc +"rwimgs/thepressedx.bmp"; }}function $rw_divOut(iKb){ var knb; switch(iKb) { case Oba: knb ="displayImg"; break; case Pba: knb ="transImg"; break; case Qba: knb ="FFImg"; break; case Rba: knb ="dictImg"; break; case Sba: knb ="collectImg"; break; case Uba: knb ="pronCreateImg"; break; case Vba: knb ="pronEditImg"; break; case Wba: knb ="calImg"; break; case Xba: knb ="generateCacheImg"; break; case Yba: knb ="checkCacheImg"; break; case Zba: knb ="pictureDictionaryImg"; break; case aba: knb ="recImg"; break; case bba: knb ="predictImg"; break; case cba: knb ="spellingImg"; break; case dba: knb ="homophoneImg"; break; case eba: knb ="grammarImg"; break; default: knb ="displayImg"; } if (document.images[knb] != null) { document.images[knb].src = aga.paths.strFileLoc +"rwimgs/thex.bmp"; }}function $rw_divPress(iKb){ $rw_event_stop(); gKb(false, iKb);}function bKb(iKb, Gwb){ var nKb; var knb; switch(iKb) { case Oba: knb ="rwpopupdisplay"; break; case Pba: knb ="rwpopuptrans"; break; case Qba: knb ="rwpopupff"; break; case Rba: knb ="rwpopupdict"; break; case Sba: knb ="rwpopupcollect"; break; case Uba: knb ="rwpopupproncreate"; break; case Vba: knb ="rwpopuppronedit"; break; case Wba: knb ="rwpopupcal"; break; case Xba: knb ="rwpopupgeneratecache"; break; case Yba: knb ="rwpopupcheckcache"; break; case Zba: knb ="rwpopuppicturedictionary"; break; case aba: knb ="rwpopuprec"; break; case bba: knb ="rwPopupPredict"; break; case cba: knb ="rwPopupSpelling"; break; case dba: knb ="rwpopuphomophone"; break; case eba: knb ="rwpopupgrammar"; break; default: knb ="rwpopupdisplay"; } nKb = document.getElementById(knb); if (nKb == null) { return; } try { nKb.innerHTML = Gwb; } catch(err) { SSDOM.Hnb(nKb, Gwb, false); }}function gKb(hKb, iKb){ var nKb; Hfa[iKb] = hKb; var knb; switch(iKb) { case Oba: knb ="rwDisplay"; break; case Pba: knb ="rwTrans"; break; case Qba: knb ="rwFF"; break; case Rba: knb ="rwDict"; break; case Sba: knb ="rwCollect"; break; case Tba: knb ="rwSticky"; break; case Uba: knb ="rwPronCreate"; break; case Vba: knb ="rwPronEdit"; break; case Wba: knb ="rwCal"; break; case Xba: knb ="rwGenerateCache"; break; case Yba: knb ="rwCache"; break; case Zba: knb ="rwPictureDictionary"; break; case aba: knb ="rwRec"; break; case bba: knb ="rwPrediction"; break; case cba: knb ="rwSpelling"; break; case dba: knb ="rwHomophone"; break; case eba: knb ="rwGrammar"; break; default: knb ="rwDisplay"; } var mKb = aEb(knb); if(mKb != null) { nKb = mKb.style; if (nKb == null) { return; } if(hKb) { lKb(); nKb.visibility ='visible'; nKb.display ='block'; nKb.zIndex = 501; } else { nKb.visibility ='hidden'; nKb.display ="none"; bKb(iKb,""); } } KKb();}function lKb(){ var knb; knb ="rwDisplay"; var mKb = aEb(knb); var nKb; if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwTrans"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwFF"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwDict"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwCollect"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwSticky"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwCal"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwGenerateCache"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwCheckCache"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwPictureDictionary"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwRec"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwPrediction"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwSpelling"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwHomophone"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; } knb ="rwGrammar"; mKb = aEb(knb); if(mKb != null && mKb.style) { nKb = mKb.style; nKb.zIndex = 500; }}function $rw_getToolbarX(){ return yea;}function $rw_getToolbarY(){ return zea;}function $rw_setToolbarPosition(p_nX, p_nY){ if(typeof(p_nX) =="string") { $rw_dockToolbar(p_nX); } if(typeof(p_nX) !="number"|| typeof(p_nY) !="number") { return; } UKb(p_nX, p_nY); IKb();}function $rw_placeToolbar(p_strSlot){ if(typeof(p_strSlot) !="string") { return; } var Nkb = p_strSlot.toLowerCase().replace(/\s+/g,""); if(Nkb =="topleft"|| Nkb =="lefttop") { yea = 0; zea = 0; } else if(Nkb =="topright"|| Nkb =="righttop") { yea = 1; zea = 0; } else if(Nkb =="bottomleft"|| Nkb =="leftbottom") { yea = 0; zea = 1; } else if(Nkb =="bottomright"|| Nkb =="rightbottom") { yea = 1; zea = 1; } else if(Nkb =="top") { yea = ((rw_getDisplayWidthAdjusted() - Bfa) / 2.0) / rw_getDisplayWidthAdjusted(); zea = 0; } else if(Nkb =="right") { yea = 1; zea = 0.5 - (Cfa/rw_getDisplayHeightAdjusted()); } else if(Nkb =="bottom") { yea = ((rw_getDisplayWidthAdjusted() - Bfa) / 2.0) / rw_getDisplayWidthAdjusted(); zea = 1; } else if(Nkb =="left") { yea = 0; zea = 0.5 - (Cfa/rw_getDisplayHeightAdjusted()); } IKb();}function $rw_setOverridePosition(p_nX, p_nY){ eba_override_x = p_nX; eba_override_y = p_nY; IKb();}function $rw_getOverrideX(){ return eba_override_x;}function $rw_getOverrideY(){ return eba_override_y;}var pKb ='<bookmark mark="';var qKb ='"/>';var rKb = null; var sKb = null; var tKb = 0;var uKb = 0;var vKb = false;var wKb = false;var xKb = false;if(Yfa){ var yKb = navigator.appVersion; var zKb = yKb.lastIndexOf("/"); yKb = yKb.substring(zKb + 1); try { var ALb = parseFloat(yKb); if(ALb < 300 || (ALb > 400 && ALb < 416)) { vKb = true; } else if(ALb > 500) { xKb = true; } else { wKb = true; } } catch(err) { xKb = true; }}var BLb = 0;var CLb = 0;function FLb(evt, mLb){ try { if(Vca) { var d = new Date(); var Jmb = d.getTime(); if(Jmb < (CLb + 800) || !aga.controlData.bOnloadFinished) { return; } } var inb = LLb(evt, Vca); if(inb != null) { if(inb.node.nodeType == 1 && inb.node.tagName.toLowerCase() =="img") { if(inb.node.className =="mceIcon") { return; } } if(inb.node.nodeType == 1 && inb.node.tagName.toLowerCase() =="input"&& inb.node.type.toLowerCase() =="button"&& Lda && !wHb(evt)) { return; } if(Oga != null) { SSAPIP.apipHandler.checkElement(inb.node, SSAPIP.apipHandler.Type.DEFAULT); return; } if(Rea) { if(inb.node.nodeType == 1 && inb.node.tagName.toLowerCase() =="input") { var Dkb = inb.node.getAttribute("type"); if(Dkb != null) { Dkb = Dkb.toLowerCase(); if((Dkb =="radio"|| Dkb =="checkbox")) { inb.node = SSDOM.getNextTextNodeNoBlank(inb.node, true, null); inb.offset = 0; } } } } var Xtb = bLb(inb); if(Xtb != null) { try { if(Xtb.equals(rKb)) { return; } if(Xtb.equals(sKb)) { if((Jmb - BLb) < 1000) { return; } BLb = Jmb; } if(typeof(mLb) =="boolean"&& mLb) { Xtb.useHighlighting = false; kLb(Xtb, true); } else { kLb(Xtb, false); } }catch(err){thLogE(err);} } else { rKb = null; } } } catch(err) { Kya("mousehover error: "+ err); }}function LLb(Aub, KVb){ var ULb = null; var KLb = 0; if(Lfa) { ULb = Aub.srcElement; if(ULb.nodeType == 1 && ULb.tagName.toLowerCase() =="textarea") { } else { var Btb = rw_getTargetNodeAsCaretIE(Aub, KVb); if(Btb != null) { ULb = Btb.node; KLb = Btb.offset; } else { var PLb = false; if(ULb.tagName.toLowerCase() =="li"|| ULb.tagName.toLowerCase() =="a") { PLb = true; } else if(ULb.parentNode != null && ULb.parentNode.tagName != null && ULb.parentNode.tagName.toLowerCase() =="li") { PLb =true; } if(PLb) { var Yub = ULb.firstChild; if(Yub == null) { return null; } if(Yub.nodeType != 3) { Yub = SSDOM.getNextTextNodeNoBlank(Yub, false, ULb); if(Yub == null) { return null; } } ULb = Yub; KLb = 0; } } } } else if(Yfa) { ULb = Aub.target; if(ULb != null) { if(xKb) { if(ULb.firstChild != null && ULb.firstChild.nodeType == 3 && ULb.tagName.toLowerCase() !="textarea") { var NVb = ULb.firstChild.nodeValue; if(NVb.trimTH().length > 0) { ULb = ULb.firstChild; } } } else if(wKb) { if(Aub.fromElement != null) { if(ULb.nodeType == 1 && ULb.tagName.toLowerCase() !="textarea") { if(Aub.fromElement.nodeType == 3) { ULb = Aub.fromElement; } } } else { if(ULb.firstChild != null && ULb.firstChild.nodeType == 3 && ULb.tagName.toLowerCase() !="textarea") { var NVb = ULb.firstChild.nodeValue; if(NVb.trimTH().length > 0) { ULb = ULb.firstChild; } } } } } } else { if(Aub.explicitOriginalTarget.nodeValue != null) { if(Aub.target.tagName.toLowerCase() =="textarea") { ULb = Aub.target; } else { ULb = Aub.explicitOriginalTarget; if(Aub.rangeOffset) { KLb = Aub.rangeOffset; } } } else { ULb = Aub.target; } } if(ULb == null) { return null; } if(SSDOM.isIgnored(ULb)) { return null; } return new Xqa(ULb, KLb, true);}function bLb(cLb){ var TLb = false; var ULb = cLb.node; var Xtb = null; if(mTb(ULb)) { if(oca == null) { return Xtb; } else { TLb = true; } } if(ULb != null && ULb.parentNode != null && ULb.parentNode.getAttribute) { var oQb; var XLb; var YLb; var ZLb; var aLb; if(ULb.nodeType == 1) { oQb = ULb.tagName; if(Lda && oQb.toUpperCase() =="INPUT") { var Dkb = ULb.getAttribute("type"); var eLb = ULb.className; if(Dkb != null && Dkb =="button"&& eLb !="rwcalbutton"&& eLb !="rwcalEqbutton") { return Xtb; } } XLb = ULb.getAttribute("started"); YLb = ULb.getAttribute("ignore"); ZLb = ULb.getAttribute("sp"); aLb = ULb.getAttribute("csp"); if(aLb != null || YLb != null || ZLb != null || XLb != null) { return Xtb; } } var Qob = ULb.parentNode; XLb = Qob.getAttribute("started"); YLb = Qob.getAttribute("ignore"); ZLb = Qob.getAttribute("sp"); aLb = Qob.getAttribute("csp"); if(aLb != null || YLb != null || ZLb != null || XLb != null) { Xtb = null; } else { var efb; var ffb; if(ULb.nodeType == 3) { var Btb = cLb; try { if(!Lfa && Btb.node.nodeValue.length > 0) { if(!Eea && Yfa) { Btb.offset=0; efb = SSDOM.getSentenceBreakToLeft(Btb); Btb.offset=Btb.node.nodeValue.length - 1; ffb = SSDOM.getSentenceBreakToRight(Btb); } else { efb = SSDOM.getSentenceBreakToLeft(Btb); ffb = SSDOM.getSentenceBreakToRight(Btb); } } else { efb = SSDOM.getSentenceBreakToLeft(Btb); ffb = SSDOM.getSentenceBreakToRight(Btb); } if(efb != null && ffb != null) { var range = new THRange(SSDOM.getBody(Qob), XTb(efb.node, efb.offset), XTb(ffb.node, ffb.offset)); Xtb = new THHoverTarget(null, null, range); Xtb.blockCache = TLb; } } catch(err){thLogE(err);} } else if(ULb.nodeType == 1) { if(ULb.tagName.toLowerCase() =="img"&& ULb.getAttribute("msg") != null) { efb = SSDOM.getSentenceBreakToLeft(cLb); ffb = SSDOM.getSentenceBreakToRight(cLb); if(efb != null && ffb != null) { var range = new THRange(SSDOM.getBody(Qob), XTb(efb.node, efb.offset), XTb(ffb.node, ffb.offset)); Xtb = new THHoverTarget(null, null, range); } else { Xtb = new THHoverTarget(SSDOM.getBody(ULb), SSDOM.getPositionInDom(ULb), null); } Xtb.blockCache = TLb; } else { Xtb = new THHoverTarget(SSDOM.getBody(ULb), SSDOM.getPositionInDom(ULb), null); Xtb.blockCache = TLb; Xtb.allowContinuous = false; } } else { Xtb = null; } } } return Xtb;}function kLb(Bob, mLb){ if(tKb > 0) { clearTimeout(tKb); tKb = 0; } if(uKb > 0) { clearTimeout(uKb); uKb = 0; } if(Vca && !mLb) { if(!sLb(Bob)) { return; } rKb = Bob; var jLb = FEb; $rw_event_stop_limited(); if(jLb) { tKb = setTimeout(qLb, 500); } else { tKb = setTimeout(qLb, 5); } } else { rKb = Bob; tKb = setTimeout(nLb, 500); }}function nLb(){ if(rKb == null) { return; } if($g_bMouseSpeech || ((jca & calculator_icon) == calculator_icon)) { tKb = 0; if (rKb != null) { if(!sLb(rKb)) { return; } } if(tKb > 0) { clearTimeout(tKb); tKb = 0; } if(uKb > 0) { clearTimeout(uKb); uKb = 0; } if(Qga){ window.postMessage( { type:"1757FROM_PAGE", command:"trackEvent", settings:{'category':"FromWebReader",'action':"WebReader start hover action",'label': window.location.host } },'*'); } $rw_event_stop_limited(); uKb = setTimeout(qLb, 500); }}var oLb = false;function qLb(){ try { oLb = true; tKb = 0; if (rKb != null) { if(sKb!= null) { if(uKb > 0) { clearTimeout(uKb); uKb = 0; } $rw_event_stop_limited(); uKb = setTimeout(qLb, 500); } else { var d = new Date(); CLb = d.getTime(); if(rKb.range != null) { Tga = rKb; } rw_speakHoverTarget(rKb); rKb = null; } } } catch(ignore) { thLogE(ignore); } oLb = false;}function sLb(Bob){ if (Bob != null) { var Dtb; if(Bob instanceof String) { Dtb = Bob.toString(); } else { if(Bob.isRange()) { if(cya(Bob.getCaretRange())) { Dtb =" "; } else { Dtb = null; } } else { Dtb = Bob.getTextPreparedForSpeech(); } } if(Dtb == null || Dtb.length == 0) { return false; } else { return true; } }}var uLb = new Array();var vLb = (new Date).getTime();var wLb = 0;var xLb = 500;function zLb(){ if((new Date).getTime() - vLb < xLb) { return true; } return false;}function AMb(){ if(zLb()) { wLb = setTimeout(AMb, 100); } else { wLb = 0; if(uLb.length > 1) { var lab = uLb[uLb.length - 2]; var target = uLb[uLb.length - 1]; uLb.length = 0; if(lab =="rw_speakHoverTarget") { rw_speakHoverTarget(target); } else if(lab =="rw_speechHighlightOnly") { rw_speechHighlightOnly(target); } else { RMb(target, lab); } } }}function rw_speakHoverTarget(XMb){ try { if(Qga) { window.postMessage( { type:"1757FROM_PAGE", command:"trackEvent", settings:{'category':"FromWebReader",'action':"WebReader speak sentence with hover",'label': window.location.host } },'*'); } if(XMb == null) { return; } if(zLb()) { uLb.push("rw_speakHoverTarget"); uLb.push(XMb); if(wLb == 0) { wLb = setTimeout(AMb, 100); } return; } vLb = (new Date).getTime(); if(sKb != null) { sKb.unhighlightRange(); } if(XMb instanceof String) { sKb = null; var KNb = new SpeechStream.SpeechRequest(); KNb.setString(XMb.toString(), SpeechStream.SpeechRequestBookmarks.NONE); var QBc = KNb.getText(); var flash = dab.getConnector(); if(flash != null && !Kga) { if(SpeechStream.cacheMode.useBackupForLiveRequests()) { flash.simpleSpeechFromBackup(QBc, !ofa); } else { flash.simpleSpeech(QBc, !ofa); } } } else { if(XMb.range && XMb.range instanceof THRange) { var FNb = pPb(XMb.range); if(FNb != null && LMb(FNb.efb.node)) { Tga = null; ega = 0; $rw_speakFirstSentence(); return; } if(FNb != null && mTb(FNb.efb.node)) { if(oca == null) { return; } else { XMb.blockCache = true; } } } if(!Nea && Qea != null && Pea != null) { if(XMb.equalsAprox(Pea)) { XMb = Qea; XMb.allowContinuous = false; Pea = null; Qea = null; if(Oea) { bIb.push("rw_pageCompleteCallBack()"); } } } sKb = XMb; var Dtb = XMb.getTextPreparedForSpeech(); if(Dtb != null && Dtb.length > 0) { zqa(XMb); if(!XMb.isValid()) { return; } $rw_setSentenceFromSelection(); if(!XMb.useHighlighting) { var flash = dab.getConnector(); if(flash != null) { if(XMb.isOverridingGlobal()) { vJb(XMb.voice, null, null, XMb.bookId, XMb.pageId); if(SpeechStream.cacheMode.useBackupForLiveRequests()) { flash.simpleSpeechFromBackup(Dtb, !ofa); } else { flash.simpleSpeech(Dtb, !ofa); } FKb(); } else { if(SpeechStream.cacheMode.useBackupForLiveRequests()) { flash.simpleSpeechFromBackup(Dtb, !ofa); } else { flash.simpleSpeech(Dtb, !ofa); } } } } else { XMb.highlightRange(); var JMb = XMb.textToSpeakNoChanges; if(XMb.isOverridingGlobal()) { vJb(XMb.voice, null, null, XMb.bookId, XMb.pageId); Iua(Dtb, XMb.blockCache, JMb); FKb(); } else { Iua(Dtb, XMb.blockCache, JMb); } } if(Eea && XMb.allowContinuous) { if(XMb.equals(Pea)) { Pea = null; if(Oea) { bIb.push("rw_pageCompleteCallBack()"); } } else { iIb(XMb); } } } } } catch(err) { Kya("rw_speakHoverTarget error:"+err.message); }}function LMb(dsb){ try { var KMb = SSDOM.getComputedStyle(dsb); if(KMb != null && (KMb.display =="none"|| KMb.visibility =="hidden")) { return true; } else { var Yub = dsb; var Lob = Yub.ownerDocument.body; while(Yub != Lob) { Yub = Yub.parentNode; if(SSDOM.getComputedStyle(Yub).display =="none") { return true; } } } } catch(e) {} return false;}function RMb(XMb, VMb){ if(XMb == null || VMb == null) { return; } if(zLb()) { uLb.push(VMb); uLb.push(XMb); if(wLb == 0) { wLb = setTimeout(AMb, 100); } return; } vLb = (new Date).getTime(); if(sKb != null) { sKb.unhighlightRange(); } if(XMb instanceof String) { sKb = null; try { var flash = dab.getConnector(); if(flash != null) { PEb(true); flash.startSpeechFromFile(XMb, VMb, !ofa); pwa(); } } catch(err) { thLogE(err); } } else { sKb = XMb; var Dtb = XMb.getTextPreparedForSpeech(); if(Dtb != null && Dtb.length > 0) { zqa(XMb); if(!XMb.isValid()) { return; } XMb.highlightRange(); mua(Dtb, VMb); } }}function rw_speechHighlightOnly(XMb){ if(XMb == null) { return; } if(zLb()) { uLb.push("rw_speechHighlightOnly"); uLb.push(XMb); if(wLb == 0) { wLb = setTimeout(AMb, 100); } return; } vLb = (new Date).getTime(); if(sKb != null) { sKb.unhighlightRange(); } if(XMb instanceof String) { sKb = null; } else { sKb = XMb; var Dtb = XMb.getTextPreparedForSpeech(); if(Dtb != null && Dtb.length > 0) { zqa(XMb); if(!XMb.isValid()) { return; } XMb.highlightRange(); sua(Dtb); } }}function $rw_readNextTarget(){ if(Fea != null) { rKb = Fea; Tga = Fea; Fea = null; qLb(); }}function cMb(dMb, kSb){ if(dMb == null || kSb == null || dMb == kSb) { return false; } var Mgb; var YNb=dMb; var bMb = null; if(Pea != null) { bMb = Pea.getCaretRange().ffb.node; } while(YNb != null && YNb != kSb) { if(YNb.nodeType == 1) { if(YNb.getAttribute("texthelpStopContinuous") != null) { return true; } } if(YNb == bMb && YNb != kSb) { return true; } Mgb = !SSDOM.isInvalidNode(YNb); if (YNb.firstChild != null && Mgb) { YNb = YNb.firstChild; } else if(YNb.nextSibling != null) { YNb = YNb.nextSibling; } else { while (YNb != null && YNb.nextSibling == null) { YNb = YNb.parentNode; if(YNb != null && YNb.nodeType == 1) { if(YNb.getAttribute("texthelpStopContinuous") != null) { return true; } } if(kSb == YNb) { return false; } } if (YNb != null && kSb != YNb) { YNb = YNb.nextSibling; } } } return false;}function gMb(fdb, wqb){ this.range = fdb; this.word = wqb; }function mMb(HWb, oMb, p_domRefRight, gNb){ try { if(oMb == null || p_domRefRight == null) { return new xIb(); } var ABc = SSDOM.getCaretPairFromDomPosition(HWb, oMb.path, oMb.offset, p_domRefRight.path, p_domRefRight.offset); return zMb(ABc, gNb); } catch(err) { Kya("err rw_getTextOverRangeToSpeak:"+"|"+ err.message); return new xIb(); }}function zMb(ANb, gNb){ var rMb = new xIb(); try { if(ANb == null) { return rMb; } var efb = ANb.efb; var ffb = ANb.ffb; if(efb == null) { return rMb; } if(ffb == null) { return rMb; } if(efb.node != null) { var Tkb = SSDOM.checkForSpecialParent(efb.node); if(Tkb != null) { efb.node = Tkb; efb.offset = 0; } } if(ffb.node != null) { var Tkb = SSDOM.checkForSpecialParent(ffb.node); if(Tkb != null) { if(ffb.node.nodeType == 3) { ffb.offset = ffb.node.nodeValue.length; } ffb.node = Tkb; } } var wMb = false; if(!Fda) { var Yub = efb.node; var Ukb; while(Yub != null) { if(Yub.nodeType == 1) { Ukb = Yub.getAttribute("id"); if(Ukb != null && Ukb.length > 0) { if(Ukb =="rwpopuptrans") { wMb = true; break; } else { if(Ukb.indexOf("rwMeaning")!=0 && Ukb.indexOf("rwHeadWord")!= 0) { break; } } } } Yub = Yub.parentNode; } } if(Fda || wMb) { var BNb = yIb(efb.node); if(BNb != null) { rMb.voice = BNb; } var CNb = LJb(efb.node, ffb.node, BNb); if(CNb != null) { rMb.ABc = new dqa(efb, CNb); var Dtb = rMb.ABc.toString(); if(Dtb.length == 0 || !Sya(Dtb)) { var Yub = SSDOM.getNextTextNodeNoBlank(efb.node, false, ffb.node); if(Yub != null && Yub != efb.node && Yub != ANb.efb.node) { var FNb = new dqa(new Xqa(Yub, 0, true), ANb.ffb); return zMb(FNb, gNb); } } ffb = CNb; } } if(Cga) { var GNb = sqa(efb.node); var HNb = WJb(efb.node, ffb.node, GNb); if(HNb != null) { rMb.ABc = new dqa(ANb.efb, HNb); ffb = HNb; } } rw_getTextOverRangeToSpeakImpl(efb, ffb, gNb); var i; var wzb = gNb.length; var wordList = new Array(); for(i=0; i<wzb; i++) { wordList.push(gNb[i].word); } var KNb = new SpeechStream.SpeechRequest(); KNb.setWordList(wordList, SpeechStream.SpeechRequestBookmarks.ALL); rMb.JMb = KNb.getText(); rMb.Dtb = KNb.getFinalText(); return rMb; } catch(err) { Kya("err rw_getTextOverRangeToSpeak:"+"|"+ err.message); return rMb; }}var LNb = 500;function NNb(ONb){ var jNb = ONb.length; if(jNb > 1 && ONb.substr(jNb - 2, 2) ==". ") { return ONb; } else if(jNb > 0 && ONb.substr(jNb - 1, 1) ==".") { return ONb +" "; } else { var Dtb = ONb.trimEndTH(); var c = Dtb.charCodeAt(Dtb.length - 1); if(dxa(c) || c > 127) { return ONb +". "; } else { return ONb; } }}function RNb(wqb){ var yzb =""; if(wqb.indexOf("<math") > -1) { return wqb; } else { var TNb = (wqb.length > 20); var Dwb = 0; var wzb = wqb.length; var i = 0; var Wub; for(i = 0; i < wzb; i++) { Wub = wqb.charCodeAt(i); if(Wub > 127) { yzb += wqb.charAt(i); } else { switch(Wub) { case 35: case 40: case 41: case 91: case 93: case 95: case 123: case 124: case 125: yzb +=" "; break; case 96: yzb +="'"; break; case 38: yzb +="&amp;"; break; case 34: yzb +="&quot;"; break; case 60: yzb +="&lt"; break; case 62: yzb +="&gt"; break; default: yzb += wqb.charAt(i); } if(TNb) { if((Wub >=48 && Wub <=57) || Wub == 44) { ++Dwb; if(Dwb > 20) { yzb +=' '; Dwb = 0; } } else { Dwb = 0; } } } } return yzb; }}function rw_getTextOverRangeToSpeakImpl(eNb, fNb, gNb){ try { var fTb = eNb.node; var YNb = fNb.node; var Lob = SSDOM.getBody(fTb); var aNb = eNb.offset; var bNb = fNb.offset; var cNb =""; var hNb = fTb; var iNb = null; var jNb = 0; var kNb = true; var Dwb = 0; var lVb = XTb(hNb, aNb); var mVb = null; while(hNb != null) { if(Dwb > LNb && LNb > 0) { if(Mda) { throw"Full selection will not be spoken due to its length."; } else { hya("Full selection will not be spoken due to its length."); } return; } if(SSDOM.isSpecialCase(hNb)) { if(cNb.length > 0) { if(Sya(cNb)) { gNb[Dwb++] = new gMb(new THRange(Lob, lVb, mVb), cNb); } cNb =""; } var tNb = SSDOM.getTextFromNode(hNb); if(tNb.length > 0 && Sya(tNb)) { if(SSDOM.isSpecialCaseHighlightable(hNb)) { var pNb = SSDOM.getFirstChildTextNode(hNb, false); var Usb = SSDOM.getLastChildTextNode(hNb, false); var rNb =""; var sNb =""; if(pNb.nodeType == 1) { rNb = pNb.tagName.toLowerCase(); } if(Usb.nodeType == 1) { sNb = Usb.tagName.toLowerCase(); } if(pNb != null && pNb.nodeType == 3 && Usb != null && Usb.nodeType ==3) { lVb = XTb(pNb, 0); mVb = XTb(Usb, Usb.nodeValue.length); } if(pNb != null && pNb.nodeType == 1 && rNb =="math"&& Usb != null && Usb.nodeType ==1 && sNb =="math") { lVb = XTb(pNb, 0); mVb = XTb(Usb, tNb.length); } gNb[Dwb++] = new gMb(new THRange(Lob, lVb, mVb), tNb); } else { lVb = XTb(hNb, -1); gNb[Dwb++] = new gMb(new THRange(Lob, lVb, lVb), tNb); } cNb =""; } lVb = null; mVb = null; hNb = SSDOM.getNextNodeIgnoreChildren(hNb, false, YNb); } else if(hNb.nodeType == 1) { if(SpeechStream.pauseHandler.isPauseElement(hNb)) { cNb += SpeechStream.pauseHandler.encodePauseFromNode(hNb); } if(kNb) { iNb = SSDOM.getNextNodeAllowMoveToChild(hNb, true, YNb); } else { iNb = SSDOM.getNextNode(hNb, true, YNb); } if(iNb == null) { if(cNb.length > 0) { if(Sya(cNb)) { gNb[Dwb++] = new gMb(new THRange(Lob, lVb, mVb), NNb(cNb)); } cNb =""; lVb = null; mVb = null; } if(kNb) { hNb = SSDOM.getNextNodeAllowMoveToChild(hNb, false, YNb); } else { hNb = SSDOM.getNextNode(hNb, false, YNb); } } else { hNb = iNb; } } else if(hNb.nodeType == 3) { var tNb = SSDOM.getTextFromNode(hNb); if(tNb == null) { tNb =""; } var Tyb = 0; if(YNb == hNb && bNb > -1) { tNb = tNb.substring(0, bNb); } if(fTb == hNb && aNb > 0) { tNb = tNb.substring(aNb); Tyb = aNb; } if(tNb.length == 0 && cNb.length == 0) { lVb = null; } else { if(lVb == null || cNb.length == 0) { lVb = XTb(hNb, Tyb); } var hzb = IOb(tNb); while(hzb > -1) { if(hzb == 0) { if(cNb.length > 0) { if(Sya(cNb)) { if(mVb == null) { mVb = XTb(hNb, Tyb); } var Zbb = new THRange(Lob, lVb, mVb); if(!sda) { cNb = cNb + tNb.substr(0, 1); } else { var TQb = null; var yNb = null; var COb = hNb.parentNode; if(COb != null && COb.nodeType == 1) { TQb = COb.getAttribute("class"); yNb = COb.getAttribute("className"); } var AOb = false; AOb = (TQb != null && (TQb.toLowerCase() =="x2"|| TQb.toLowerCase() =="x3")) || (yNb != null && (yNb.toLowerCase() =="x2"|| yNb.toLowerCase() =="x3")); var BOb = false; while(AOb) { if(COb.previousSibling != null && COb.previousSibling.nodeType == 1) { TQb = COb.previousSibling.getAttribute("class"); yNb = COb.previousSibling.getAttribute("className"); if(TQb != null && TQb.length > 3) { TQb = TQb.substr(TQb.length - 4).toLowerCase(); if(TQb =="text") { BOb = true; break; } } if(yNb != null && yNb.length > 3) { yNb = yNb.substr(yNb.length - 4).toLowerCase(); if(yNb =="text") { BOb = true; break; } } break; } COb = COb.parentNode; if(COb != null && COb.nodeType == 1 && COb.tagName.toLowerCase() =="span") { } else { break; } } if(AOb) { if(!BOb) { cNb = cNb + tNb.substr(0, 1); } } else { if(hNb.previousSibling != null) { TQb = hNb.previousSibling.getAttribute("class"); yNb = hNb.previousSibling.getAttribute("className"); if( (TQb != null && (TQb.toLowerCase() =="x2"|| TQb.toLowerCase() =="x3")) || (yNb != null && (yNb.toLowerCase() =="x2"|| yNb.toLowerCase() =="x3")) ) { cNb = cNb + tNb.substr(0, 1); } } else { var COb = hNb; var zvb = false; while(COb.previousSibling == null && COb.parentNode.tagName.toLowerCase() =="span") { COb = COb.parentNode; if(COb.previousSibling != null) { zvb = true; } } if(zvb && COb.previousSibling != null) { TQb = COb.previousSibling.getAttribute("class"); yNb = COb.previousSibling.getAttribute("className"); if( (TQb != null && (TQb.toLowerCase() =="x2"|| TQb.toLowerCase() =="x3")) || (yNb != null && (yNb.toLowerCase() =="x2"|| yNb.toLowerCase() =="x3")) ) { cNb = cNb + tNb.substr(0, 1); } } } } } gNb[Dwb++] = new gMb(Zbb, cNb); } cNb =""; ++Tyb; tNb = tNb.substr(1); } else { tNb = tNb.substr(1); ++Tyb; } } else { var EOb = cNb + tNb.substring(0, hzb + 1); if(EOb.trimTH() =="*") { if(! (qfa && XUb("*")) ) { EOb =""; } } if(Sya(EOb)) { mVb = XTb(hNb, hzb + Tyb); var Zbb = new THRange(Lob, lVb, mVb); gNb[Dwb++] = new gMb(Zbb, EOb); if(Dwb > LNb && LNb > 0) { if(Mda) { throw"Full selection will not be spoken due to its length."; } else { hya("Full selection will not be spoken due to its length."); } return ; } } cNb =""; Tyb += hzb + 1; tNb= tNb.substring(hzb + 1); } lVb = XTb(hNb, Tyb); mVb = null; hzb = IOb(tNb); } if(tNb.length > 0) { cNb += tNb; mVb = XTb(hNb, tNb.length + Tyb); if(mVb == null) { cNb =""; } } if(hNb == YNb) { if(cNb.length > 0) { var Zbb = new THRange(Lob, lVb, mVb); if(Sya(cNb)) { gNb[Dwb++] = new gMb(Zbb, cNb); } } return ; } } iNb = SSDOM.getNextNode(hNb, true, YNb); if(iNb == null) { if(cNb.length > 0) { if(Sya(cNb)) { gNb[Dwb++] = new gMb(new THRange(Lob, lVb, mVb), NNb(cNb)); } cNb =""; lVb = null; mVb = null; } hNb = SSDOM.getNextNode(hNb, false, YNb); } else { hNb = iNb; } } else { iNb = SSDOM.getNextNode(hNb, true, YNb); if(iNb == null) { if(cNb.length > 0) { if(Sya(cNb)) { gNb[Dwb++] = new gMb(new THRange(Lob, lVb, mVb), NNb(cNb)); } cNb =""; lVb = null; mVb = null; } hNb = SSDOM.getNextNode(hNb, false, YNb); } else { hNb = iNb; } } kNb = false; } } catch(err) { Kya("err rw_getTextOverRangeToSpeakImpl:"+ err.message); }}function IOb(JOb){ if(JOb == null || JOb.length == 0) { return -1; } var hzb = JOb.search("[\\s\"]"); return hzb;}/* The following code is derived from MD5 hash functions (c) Paul Johnston, http://pajhome.org.uk/crypt/md5/. */var KOb = 0; var LOb =""; var MOb = 8;function NOb(s){ return gOb(OOb(eOb(s), s.length * MOb));}function OOb(x, Lwa){x[Lwa >> 5] |= 0x80 << ((Lwa) % 32); x[(((Lwa + 64) >>> 9) << 4) + 14] = Lwa; var a = 1732584193; var b = -271733879; var c = -1732584194; var d = 271733878; for(var i = 0; i < x.length; i += 16) { var POb = a; var QOb = b; var ROb = c; var SOb = d; a = UOb(a, b, c, d, x[i+ 0], 7 , -680876936); d = UOb(d, a, b, c, x[i+ 1], 12, -389564586); c = UOb(c, d, a, b, x[i+ 2], 17, 606105819); b = UOb(b, c, d, a, x[i+ 3], 22, -1044525330); a = UOb(a, b, c, d, x[i+ 4], 7 , -176418897); d = UOb(d, a, b, c, x[i+ 5], 12, 1200080426); c = UOb(c, d, a, b, x[i+ 6], 17, -1473231341); b = UOb(b, c, d, a, x[i+ 7], 22, -45705983); a = UOb(a, b, c, d, x[i+ 8], 7 , 1770035416); d = UOb(d, a, b, c, x[i+ 9], 12, -1958414417); c = UOb(c, d, a, b, x[i+10], 17, -42063); b = UOb(b, c, d, a, x[i+11], 22, -1990404162); a = UOb(a, b, c, d, x[i+12], 7 , 1804603682); d = UOb(d, a, b, c, x[i+13], 12, -40341101); c = UOb(c, d, a, b, x[i+14], 17, -1502002290); b = UOb(b, c, d, a, x[i+15], 22, 1236535329); a = VOb(a, b, c, d, x[i+ 1], 5 , -165796510); d = VOb(d, a, b, c, x[i+ 6], 9 , -1069501632); c = VOb(c, d, a, b, x[i+11], 14, 643717713); b = VOb(b, c, d, a, x[i+ 0], 20, -373897302); a = VOb(a, b, c, d, x[i+ 5], 5 , -701558691); d = VOb(d, a, b, c, x[i+10], 9 , 38016083); c = VOb(c, d, a, b, x[i+15], 14, -660478335); b = VOb(b, c, d, a, x[i+ 4], 20, -405537848); a = VOb(a, b, c, d, x[i+ 9], 5 , 568446438); d = VOb(d, a, b, c, x[i+14], 9 , -1019803690); c = VOb(c, d, a, b, x[i+ 3], 14, -187363961); b = VOb(b, c, d, a, x[i+ 8], 20, 1163531501); a = VOb(a, b, c, d, x[i+13], 5 , -1444681467); d = VOb(d, a, b, c, x[i+ 2], 9 , -51403784); c = VOb(c, d, a, b, x[i+ 7], 14, 1735328473); b = VOb(b, c, d, a, x[i+12], 20, -1926607734); a = WOb(a, b, c, d, x[i+ 5], 4 , -378558); d = WOb(d, a, b, c, x[i+ 8], 11, -2022574463); c = WOb(c, d, a, b, x[i+11], 16, 1839030562); b = WOb(b, c, d, a, x[i+14], 23, -35309556); a = WOb(a, b, c, d, x[i+ 1], 4 , -1530992060); d = WOb(d, a, b, c, x[i+ 4], 11, 1272893353); c = WOb(c, d, a, b, x[i+ 7], 16, -155497632); b = WOb(b, c, d, a, x[i+10], 23, -1094730640); a = WOb(a, b, c, d, x[i+13], 4 , 681279174); d = WOb(d, a, b, c, x[i+ 0], 11, -358537222); c = WOb(c, d, a, b, x[i+ 3], 16, -722521979); b = WOb(b, c, d, a, x[i+ 6], 23, 76029189); a = WOb(a, b, c, d, x[i+ 9], 4 , -640364487); d = WOb(d, a, b, c, x[i+12], 11, -421815835); c = WOb(c, d, a, b, x[i+15], 16, 530742520); b = WOb(b, c, d, a, x[i+ 2], 23, -995338651); a = XOb(a, b, c, d, x[i+ 0], 6 , -198630844); d = XOb(d, a, b, c, x[i+ 7], 10, 1126891415); c = XOb(c, d, a, b, x[i+14], 15, -1416354905); b = XOb(b, c, d, a, x[i+ 5], 21, -57434055); a = XOb(a, b, c, d, x[i+12], 6 , 1700485571); d = XOb(d, a, b, c, x[i+ 3], 10, -1894986606); c = XOb(c, d, a, b, x[i+10], 15, -1051523); b = XOb(b, c, d, a, x[i+ 1], 21, -2054922799); a = XOb(a, b, c, d, x[i+ 8], 6 , 1873313359); d = XOb(d, a, b, c, x[i+15], 10, -30611744); c = XOb(c, d, a, b, x[i+ 6], 15, -1560198380); b = XOb(b, c, d, a, x[i+13], 21, 1309151649); a = XOb(a, b, c, d, x[i+ 4], 6 , -145523070); d = XOb(d, a, b, c, x[i+11], 10, -1120210379); c = XOb(c, d, a, b, x[i+ 2], 15, 718787259); b = XOb(b, c, d, a, x[i+ 9], 21, -343485551); a = aOb(a, POb); b = aOb(b, QOb); c = aOb(c, ROb); d = aOb(d, SOb); } return Array(a, b, c, d);}function TOb(q, a, b, x, s, t){ return aOb(bOb(aOb(aOb(a, q), aOb(x, t)), s),b);}function UOb(a, b, c, d, x, s, t){ return TOb((b & c) | ((~b) & d), a, b, x, s, t);}function VOb(a, b, c, d, x, s, t){ return TOb((b & d) | (c & (~d)), a, b, x, s, t);}function WOb(a, b, c, d, x, s, t){ return TOb(b ^ c ^ d, a, b, x, s, t);}function XOb(a, b, c, d, x, s, t){ return TOb(c ^ (b | (~d)), a, b, x, s, t);}function aOb(x, y){ var YOb = (x & 0xFFFF) + (y & 0xFFFF); var ZOb = (x >> 16) + (y >> 16) + (YOb >> 16); return (ZOb << 16) | (YOb & 0xFFFF);}function bOb(num, cnt){ return (num << cnt) | (num >>> (32 - cnt));}function eOb(nAc){ var cOb = Array(); var mask = (1 << MOb) - 1; for(var i = 0; i < nAc.length * MOb; i += MOb) { cOb[i>>5] |= (nAc.charCodeAt(i / MOb) & mask) << (i%32); } return cOb;}function gOb(binarray){ var fOb = KOb ?"0123456789ABCDEF":"0123456789abcdef"; var nAc =""; for(var i = 0; i < binarray.length * 4; i++) { nAc += fOb.charAt((binarray[i>>2] >> ((i%4)*8+4)) & 0xF) + fOb.charAt((binarray[i>>2] >> ((i%4)*8 )) & 0xF); } return nAc;}function $rw_hash(Bzb){ return NOb(Bzb);}function $rw_cachePage(wJb, BKb, p_strBookName) { var lOb = 0; try { if(Dea) { eba_cacheResult ="failure: The embedded speech toolbar cannot be added due to invalid html tag markup in this page."; window.external.completed(eba_cacheResult); return eba_cacheResult; } if(Bda == 300) { if(typeof(p_strBookName) =="string"&& p_strBookName != null && p_strBookName.length > 0) { zca = p_strBookName; } else { zca ="1"; } Ada ="1"; } if(Mda) { if(BKb != null) { $rw_setSpeedValue(parseInt(BKb), 10); } if(wJb != null) { $rw_setVoice(wJb); } var jOb = SSDOM.getFirstSentence(document.body); $rw_doSelection(-2); lOb = qOb(jOb, lOb); } else { eba_cacheResult ="failure: The generate cache flag was set to false, no processing done for this page."; window.external.completed(eba_cacheResult); return eba_cacheResult; } } catch(err) { if(err.message != null) { eba_cacheResult ="failure:"+ err.message; } else { eba_cacheResult ="failure:"+ err; } window.external.completed(eba_cacheResult); return eba_cacheResult; } eba_cacheResult ="success"; if(lOb > 0) { eba_cacheResult = eba_cacheResult +":Warning, encountered "+ lOb +" zero length speech files."; } window.external.completed(eba_cacheResult); return"success";}function qOb(rOb, sOb){ var kOb = rOb; var lOb = sOb; var mOb = 0; while(kOb != null) { var nOb = zMb(kOb, new Array()); var Dtb = nOb.Dtb; if(Dtb == null || Dtb.trimTH().length == 0) { if(kOb != null) { var sentence = SSDOM.getNextSentence(kOb); if(sentence != null) { kOb = sentence; } else { if(mOb > 1) { throw"Speech engine generating empty files."; } xOb(); return lOb; } } else { if(mOb > 1) { throw"Speech engine generating empty files."; } xOb(); return lOb; } } var tOb = GQb(Dtb); var uOb = EPb(); var ddb = window.external.Generate(Dtb, uOb, tOb); if(ddb == 1) { mOb = 0; } else { if(ddb == 2) { throw"Got a Failure response from the speech engine."; } else if(ddb == 3) { ++lOb; ++mOb; if(mOb > 4) { throw"Speech engine generating empty files."; } } } kOb = SSDOM.getNextSentence(kOb); } if(mOb > 1) { throw"Speech engine generating empty files."; } xOb(); return lOb;}function xOb(){ var qpb = document.getElementById("pageComplete"); if(qpb != null) { qpb.click(); }}function BPb(Gwb){ if(Pda) { var yOb = GPb(); var zOb = GQb(Gwb); var APb = HPb(zOb); return yOb +"/"+ APb +"/"+zOb; } else { return GPb() +"/"+ GQb(Gwb); }}function EPb(){ var nAc = nUb(xca," ","_"); if(Bea) { return JPb(yca +"\\"+ zca +"\\"+ $rw_scholasticHash(Ada) +"\\"+ Ada +"\\"+ nAc + (Hda)); } else { return JPb(yca +"\\"+ zca +"\\"+ Ada +"\\"+ nAc + Hda); }}function GPb(){ var nAc = nUb(xca," ","_"); if(Bea) { return JPb(yca +"/"+ zca +"/"+ $rw_scholasticHash(Ada) +"/"+ Ada +"/"+ nAc + Hda); } else { return JPb(yca +"/"+ zca +"/"+ Ada +"/"+ nAc + Hda); }}function HPb(Mwb){ if(Mwb == null || Mwb.length < 2) { return"1/1"; } return Mwb.substr(0, 1) +"/"+ Mwb.substr(1, 1);}function JPb(Bzb){ return Bzb.replace(/[\x26\x3a\x2a\x3f\x22<>\x7c]/g,""); }var BZb ="";function $rw_speechCacheGenErrorHandler(Wja){ BZb = Wja; var qpb = document.getElementById("pageFailed"); if(qpb != null) { qpb.click(); }}function $rw_getLastError(){ return BZb;}function RPb(UPb){ if(UPb == null || UPb.efb == null || UPb.ffb == null) { return null; } return new THRange(UPb.efb.node.ownerDocument.body, XTb(UPb.efb.node, UPb.efb.offset), XTb(UPb.ffb.node, UPb.ffb.offset));}function bPb(kPb){ if(kPb == null || kPb.xnb == null || kPb.ynb == null) { return null; } else { return new THRange(kPb.body, kPb.xnb, kPb.ynb); }}function jPb(kPb){ if(kPb == null || kPb.xnb == null || kPb.ynb == null) { return null; } else { var efb = SSDOM.getCaretFromDomPosition( kPb.body, kPb.xnb.path, kPb.xnb.offset, true); var ffb = SSDOM.getCaretFromDomPosition( kPb.body, kPb.ynb.path, kPb.ynb.offset, false); if(efb != null && ffb != null) { return new dqa(efb, ffb); } else { return null; } }}function pPb(fdb){ if(fdb == null || fdb.xnb == null || fdb.ynb == null) { return null; } else { var efb = SSDOM.getCaretFromDomPosition( fdb.body, fdb.xnb.path, fdb.xnb.offset, true); var ffb = SSDOM.getCaretFromDomPosition( fdb.body, fdb.ynb.path, fdb.ynb.offset, false); if(efb != null && ffb != null) { return new dqa(efb, ffb); } else { return null; } }}function vPb(lfb){ return XTb(lfb.node, lfb.offset);}function BQb(HWb, FQb){ return SSDOM.getCaretFromDomPosition(HWb, FQb.path, FQb.offset, true);}function GQb(Bzb){ if(Bda == 200) { Bzb = Bzb.replace(/\s+/g," "); } else { Bzb = Bzb.replace(/(\x3cbookmark\x20mark\x3d\x22(\d)+\x22\x2f\x3e)/g,""); Bzb = Bzb.replace(/[\s\xA0]+/g," "); } return NOb(Bzb);}function $rw_scholasticHashShort(p_asset){ var Dtb = p_asset.replace(/^0+|[^0-9]/g,""); return"0001".substring(0, 4-Dtb.length) + Dtb.substring(0, 4);}function $rw_scholasticHash(p_asset){ var Dtb = p_asset.replace(/^0+|[^0-9]/g,""); if(Dtb.length < 4) { Dtb ="0001".substring(0, 4-Dtb.length) + Dtb; } else { Dtb = Dtb.substring(0, 4); } return Dtb;}SpeechStream.pauseHandler = (function(){ var self = {}; var KQb = {"none":0,"x-weak":233,"weak":466,"medium":700,"strong":933,"x-string":1166 }; var LQb ="~!pause:"; var MQb ="!~"; var NQb = LQb.length + 4; var OQb ="silence"; var PQb ="break";self.getStrengthValue = function(p_strStrength) { if(typeof(KQb[p_strStrength]) !="undefined") { return KQb[p_strStrength]; } else { return 0; } };self.getPauseTimeFromNode = function(dsb) { var vQb = 0; var oQb = dsb.tagName.toLowerCase(); if(oQb == OQb) { var TQb = dsb.getAttribute("msec"); if(TQb != null) { vQb = parseInt(TQb, 10); if(isNaN(vQb)) { vQb = 0; } } } else if(oQb == PQb) { var TQb = dsb.getAttribute("time"); if(TQb != null && TQb.length >= 2) { if(TQb.substr(TQb.length - 2) =="ms") { vQb = parseInt(TQb, 10); } else if(TQb.substr(TQb.length - 1) =="s") { vQb = parseInt(TQb, 10) * 1000; } if(isNaN(vQb)) { vQb = 0; } } else { TQb = dsb.getAttribute("strength"); if(TQb != null) { vQb = self.getStrengthValue(TQb.toLowerCase()); } else { vQb = self.getStrengthValue("medium"); } } } return vQb; };self.encodedPause = function(p_nMsec) { if(!isNaN(p_nMsec) && p_nMsec>=0 && p_nMsec < 10000) { return LQb + p_nMsec + MQb; } else { return""; } };self.encodePauseFromNode = function(dsb) { return self.encodedPause(self.getPauseTimeFromNode(dsb)); }; self.encodePauseFromString = function(Gwb) { if(Gwb.indexOf(PQb) > -1 || Gwb.indexOf(OQb) > -1) { Gwb = VQb(Gwb, OQb,"msec"); Gwb = VQb(Gwb, PQb,"time"); Gwb = VQb(Gwb, PQb,"strength"); Gwb = VQb(Gwb, PQb,""); } return Gwb; }; function VQb(Gwb, XQb, nQb) { var UQb =" "+nQb+"=\""; var ZQb ="</"+ XQb +">"; var aQb; var bQb; var cQb; var dQb; var eQb; var fQb; var gQb; aQb = Gwb.indexOf("<"+XQb); while(aQb > -1) { cQb = Gwb.indexOf(">", aQb); dQb = Gwb.indexOf("/>", aQb); if(cQb>aQb && (dQb<0 || cQb<dQb) ) { bQb = cQb; gQb = Gwb.indexOf(ZQb); } else if(dQb>aQb && (cQb<0 || dQb<cQb) ) { bQb = cQb; gQb=-1; } else { Kya("Error in pause handler, appears to be due to unclosed element in html."); break; } var vQb; if(nQb ==""&& XQb == PQb) { vQb = self.getStrengthValue("medium"); } else { eQb = Gwb.indexOf(UQb, aQb); fQb = Gwb.indexOf("\"", eQb+UQb.length); if(eQb == -1) { break; } else if(eQb > bQb) { vQb = -1; } else if(fQb > bQb || fQb == -1) { Kya("Error in pause handler, appears to be due to unclosed string in html attribute."); break; } else { var iQb = Gwb.substring(eQb + UQb.length, fQb); vQb = lQb(iQb, nQb); } } if(vQb > -1) { var OAc = Gwb.substr(0, aQb);OAc+= self.encodedPause(vQb);if(gQb > -1) { OAc += Gwb.substring(bQb+1, gQb);OAc += Gwb.substr(gQb + ZQb.length);} else { OAc += Gwb.substring(bQb+2);} Gwb = OAc; aQb = Gwb.indexOf("<"+XQb, aQb+1); } aQb = Gwb.indexOf("<"+XQb, aQb+1); } return Gwb; } function lQb(mQb, nQb) { var vQb = 0; if(nQb =="msec") { vQb = parseInt(mQb, 10); if(isNaN(vQb)) { vQb = 0; } } else if(nQb =="time") { if(mQb.substr(mQb.length-2) =="ms") { vQb = parseInt(mQb.substr(0, mQb.length-2), 10); if(isNaN(vQb)) { vQb = 0; } } else { vQb = parseInt(mQb.substr(0, mQb.length-1), 10) * 1000; if(isNaN(vQb)) { vQb = 0; } } } else if(nQb =="strength") { vQb = self.getStrengthValue(mQb); } return vQb; }self.isPauseElement = function(dsb) { if(dsb.nodeType == 1) { var oQb = dsb.tagName.toLowerCase(); return (oQb == OQb || oQb == PQb); } else { return false; } };self.hasPauseKey = function(p_strCode) { if(typeof(p_strCode) =="string") { var tkb = p_strCode.indexOf(LQb); if(tkb > -1) { var ewb = p_strCode.indexOf(MQb, tkb); if(ewb>-1 && (ewb-tkb) <= NQb) { return true; } } } else { return false; } };self.decodedPause = function(p_strCode) { var rQb = []; if(typeof(p_strCode) =="string") { var tkb = p_strCode.indexOf(LQb); while(tkb > -1) { var ewb = p_strCode.indexOf(MQb, tkb); if(ewb>-1 && (ewb-tkb) <= NQb) { if(tkb > 0) { rQb.push(p_strCode.substr(0, tkb)); } var OAc = p_strCode.substring(tkb + LQb.length, ewb); var vQb = parseInt(OAc, 10); if(!isNaN(vQb)) { rQb.push("<silence msec=\""+ OAc +"\"/>"); } p_strCode = p_strCode.substr(ewb + MQb.length); tkb = p_strCode.indexOf(LQb); } } rQb.push(p_strCode); } return rQb; }; return self;})();function rw_getDisplayWidth(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } var nW = (AVb.innerWidth) ? AVb.innerWidth : AVb.document.body.offsetWidth; return nW;}function rw_getDisplayWidthAdjusted(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } var nW = ((AVb.innerWidth) ? AVb.innerWidth : AVb.document.body.offsetWidth) - rw_getScrollBarWidth(AVb); return nW;}function rw_getDocumentDisplayWidth(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } var nW = (AVb.innerWidth) ? AVb.innerWidth : AVb.document.documentElement.offsetWidth; return nW;}function rw_getDocumentDisplayWidthAdjusted(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } var nW = ((AVb.innerWidth) ? AVb.innerWidth : AVb.document.documentElement.offsetWidth) - rw_getScrollBarWidth(AVb); return nW;}function rw_getDisplayHeight(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } if(GKb) { return top.window.innerHeight; } if(Jfa) { return rw_getDocumentDisplayHeight(AVb); } else { var nH = (AVb.innerHeight) ? AVb.innerHeight : AVb.document.body.offsetHeight; return nH; }}function rw_getDisplayHeightAdjusted(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } if(GKb) { return top.window.innerHeight - window.pageYOffset; } if(Jfa) { return rw_getDocumentDisplayHeightAdjusted(AVb); } else { var nH = ((AVb.innerHeight) ? AVb.innerHeight : AVb.document.body.offsetHeight ) - rw_getScrollBarHeight(AVb); return nH; }}function rw_getDocumentDisplayHeight(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } if(GKb) { return top.window.innerHeight; } var nH = (AVb.innerHeight) ? AVb.innerHeight : AVb.document.documentElement.offsetHeight; return nH;}function rw_getDocumentDisplayHeightAdjusted(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } var nH = ((AVb.innerHeight) ? AVb.innerHeight : AVb.document.documentElement.offsetHeight) - rw_getScrollBarHeight(AVb); return nH;}function MRb(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } if(AVb.document.compatMode =="CSS1Compat"&& AVb.document.body.parentNode && AVb.document.body.parentNode.scrollLeft) { return AVb.document.body.parentNode.scrollLeft; } var n = (AVb.pageXOffset) ? AVb.pageXOffset : (AVb.scrollX) ? AVb.scrollX : (AVb.document.body.scrollLeft) ? AVb.document.body.scrollLeft : (AVb.document.documentElement.scrollLeft)? AVb.document.documentElement.scrollLeft:0; return n;}function rw_getScreenOffsetLeft(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } if(AVb.pageXOffset && AVb.pageXOffset > 0) { return AVb.pageXOffset; } else if(AVb.document.body.scrollLeft && AVb.document.body.scrollLeft > 0) { return AVb.document.body.scrollLeft; } else if(AVb.document.documentElement.scrollLeft && AVb.document.documentElement.scrollLeft > 0) { return AVb.document.documentElement.scrollLeft; } return 0;}function rw_getScreenOffsetTop(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } if(AVb.pageYOffset && AVb.pageYOffset > 0) { return AVb.pageYOffset; } else if(AVb.document.body.scrollTop && AVb.document.body.scrollTop > 0) { return AVb.document.body.scrollTop; } else if(AVb.document.documentElement.scrollTop && AVb.document.documentElement.scrollTop > 0) { return AVb.document.documentElement.scrollTop; } return 0;}function SRb(gob){ if(gob.scrollLeft && gob.scrollLeft > 0) { return gob.scrollLeft; } if(gob.tagName.toLowerCase() =="body"&& gob.ownerDocument && gob.ownerDocument.documentElement && gob.ownerDocument.documentElement.scrollLeft) { return gob.ownerDocument.documentElement.scrollLeft; } return 0;}function URb(gob){ if(gob.scrollTop && gob.scrollTop > 0) { return gob.scrollTop; } if(gob.tagName.toLowerCase() =="body"&& gob.ownerDocument && gob.ownerDocument.documentElement && gob.ownerDocument.documentElement.scrollTop) { return gob.ownerDocument.documentElement.scrollTop; } return 0;}function rw_getScrollBarWidth(AVb){ if(Lfa) { if(Jfa) { return 20; } else { if(typeof(AVb) =="undefined") { AVb = window; } if(AVb.document.compatMode.equalsTH("CSS1Compat")) { return (AVb.document.documentElement.offsetWidth - AVb.document.documentElement.clientWidth); } else { return (AVb.document.body.offsetWidth - AVb.document.body.clientWidth); } } } else { if(window.scrollMaxY > 0 || Yfa) { return 18; } else { return 4; } }}function rw_getScrollBarHeight(AVb){ if(typeof(AVb) =="undefined") { AVb = window; } if(Lfa) { if(Jfa) { return 20; } else { if(AVb.document.compatMode.equalsTH("CSS1Compat")) { return (AVb.document.documentElement.offsetHeight - AVb.document.documentElement.clientHeight); } else { return (AVb.document.body.offsetHeight - AVb.document.body.clientHeight); } } } else { if(AVb.scrollMaxX > 0) { return 18; } else { return 4; } }}function cRb(){ var FVb = null; var bRb = null; if (Ufa) {var range = document.selection.createRange(); if(range == null || range.text == null || range.text.length == 0) { var iRb = SSDOM.getFrameSelectionOldIE(window); if(iRb.bRb) { FVb = iRb.FVb; bRb = iRb.bRb; } } else { FVb = window; bRb = range; } if(bRb != null) { var adb = bRb.duplicate(); adb.collapse(); var Tkb = adb.parentElement(); if(SSDOM.isIgnored(Tkb)) { bRb = null; } } if(bRb != null && bRb.parentElement() != null && bRb.parentElement().tagName.toLowerCase() =="input") { bRb = new String(bRb.text); } } else {if(Yja!=null) { Zja.getSelection().addRange(Yja); } var gRb = window.getSelection(); var hRb = null; if(!gRb.isCollapsed && gRb.toString().trimTH().length > 0) { FVb = window; hRb = gRb; } else { if(wDb && wDb.selectionStart != wDb.selectionEnd) { return {frame:window, range:new String( wDb.value.substring(wDb.selectionStart, wDb.selectionEnd) )}; } var iRb = SSDOM.getFrameSelectionSFF(window); if(iRb.hRb) { FVb = iRb.FVb; hRb = iRb.hRb; } } if(hRb == null) { return null; } if(hRb.anchorNode) { if(SSDOM.isIgnored(hRb.anchorNode)) { return null; } } if(hRb.focusNode && hRb.focusNode.id) { if(hRb.focusNode.id =="flashcontent") { return null; } } if(hRb.anchorNode != null && hRb.anchorNode == hRb.focusNode && hRb.anchorOffset == hRb.focusOffset) { return null; } var jRb = null; if(hRb.getRangeAt) { jRb = hRb.getRangeAt(0); } else { var range = SSDOM.getRangeObject(); if(range != null) { if( hRb.anchorNode == hRb.focusNode && hRb.anchorOffset == hRb.focusOffset) { range = SSDOM.getRangeFromSelectionPoint(hRb); } else { range.setStart(hRb.anchorNode, hRb.anchorOffset); range.setEnd(hRb.focusNode, hRb.focusOffset); if(range.toString().length == 0) { range.setStart(hRb.focusNode, hRb.focusOffset); range.setEnd(hRb.anchorNode, hRb.anchorOffset); } } jRb = range; } } if(jRb != null) { var kRb = jRb.startContainer; var lRb = jRb.startOffset; var mRb = jRb.endContainer; var nRb = jRb.endOffset; if(kRb.nodeType != 3) { if(kRb.nodeType != 1) { return null; } else { if(lRb > 0) { if(kRb.hasChildNodes() && kRb.childNodes.length > lRb) { kRb = kRb.childNodes[lRb]; if(kRb.nodeType == 3) { lRb = 0; } else { lRb = 0; if(kRb.toString() =="[object HTMLEmbedElement]") { return null; } } } } } } if(mRb.nodeType != 3) { if(mRb.nodeType != 1) { return null; } else { if(mRb.hasChildNodes()) { if(mRb.childNodes.length > nRb) { mRb = mRb.childNodes[nRb]; } else { mRb = mRb.childNodes[nRb - 1]; if(mRb.nodeType != 3) { var Yub = SSDOM.getLastChildTextNode(mRb, true); if(Yub != null) { mRb = Yub; } } } } if(mRb.nodeType != 3) { var pRb = SSDOM.getPreviousNode(kRb, true, null); var Yub = SSDOM.getPreviousTextNode(mRb, true, pRb); if(Yub != null) { mRb = Yub; } } if(mRb.nodeType == 3) { nRb = mRb.nodeValue.length; } else { nRb = 0; } } } bRb = new ira(kRb, lRb, mRb, nRb); } else { return null; } } if(FVb != null && bRb != null) { return {frame:FVb, range:bRb}; } else { return null; }}function sRb(){ var uRb = cRb(); if(uRb != null && uRb.range != null && !(uRb.range instanceof String)) { if(Ufa) { uRb.range = vVb(uRb.frame.document.body, uRb.range); } else if(uRb.range instanceof ira) { uRb.range = bPb(uRb.range); } } return uRb;}function vRb(){ var TAc = cRb(); if(TAc != null) { var uRb = TAc.range; if(uRb instanceof String) { return uRb; } else if(uRb instanceof ira) { return uRb.toString(); } else { return TAc.range.text; } } return"";}function wRb(dsb){ if(typeof(eba_no_scroll) =="boolean"&& eba_no_scroll) { return; } try { var FVb = SSDOM.getWindow(dsb); if(FVb == null || dsb == null || dsb.parentNode == null) { return; } var x = 0; var y = 0; var TAc = dsb; if(TAc.nodeType == 3) { TAc = TAc.parentNode; } var ASb = null; var BSb = TAc; var Rob = TAc.ownerDocument.body; var DSb = false; var Sob = null; while(BSb != null && BSb != Rob) { if(BSb.tagName.toLowerCase() =="div"|| BSb.tagName.toLowerCase() =="form") { if(OSb(BSb)) { DSb = true; ASb = bSb(TAc, BSb, ASb); Sob = BSb; TAc = BSb; } } BSb = BSb.parentNode; } if(Sob != null) { TAc = Sob; } while (TAc != null) { x += TAc.offsetLeft; y += TAc.offsetTop; TAc = TAc.offsetParent; } if(ASb != null) { y += ASb.y; x += ASb.x; } var FSb; var GSb; var HSb; var ISb; var JSb = 30; if (dsb.nodeType == 3) { JSb = 10 + 5 * dsb.nodeValue.length; if (JSb > 60) { JSb = 60; } } FSb = rw_getScreenOffsetLeft(FVb); GSb = rw_getScreenOffsetTop(FVb); if(typeof( FVb.innerWidth ) =='number') { HSb = FVb.innerWidth; ISb = FVb.innerHeight; } else if(FVb.document.documentElement.clientHeight > 0 && FVb.document.documentElement.clientWidth > 0) { HSb = FVb.document.documentElement.clientWidth; ISb = FVb.document.documentElement.clientHeight; } else { HSb = FVb.document.body.clientWidth; ISb = FVb.document.body.clientHeight; } HSb = HSb - JSb; ISb = ISb - 20; var KSb; var LSb; if(DSb) { } KSb = (x < FSb || x > (FSb + HSb)); LSb = (y < GSb || y > (GSb + ISb)); if (KSb || LSb && (x != 0 || y != 0)) { if (x > (FSb + HSb)) { x = (x + FSb) / 2; } if (y > (GSb + ISb)) { y = (y + GSb) / 2; } var MSb = $g_bMouseSpeech; if($g_bMouseSpeech) { $g_bMouseSpeech = false; } FVb.scrollTo((KSb?x:FSb), (LSb?y:GSb)); if(bfa) { IKb(); KKb(); } if(MSb) { var NSb = function() { $g_bMouseSpeech = true; }; setTimeout(NSb, 500); } } } catch(ignore) { thLogE(ignore); } g_bDidScroll = false;}function OSb(gob){var Vob = gob.clientHeight; var Wob = gob.clientWidth; var Xob = SSDOM.getComputedStyle(gob); var Yob = false; if(Xob != null && Xob.overflow !="visible"&& Xob.display !="inline") { if(gob.scrollHeight > Vob && Xob.overflowY !="visible") { Yob = true; } if(gob.scrollWidth > Wob && Xob.overflowX !="visible") { Yob = true; } } return Yob;}function bSb(dsb, gob, eSb){ var snb; var tnb; var Vob = gob.clientHeight; var Wob = gob.clientWidth; var YSb = 0; var ZSb = 0; var qAc = dsb; while(qAc != gob && qAc != null) { YSb += qAc.offsetTop; ZSb += qAc.offsetLeft; qAc = iSb(qAc, gob); } if(qAc == null) { ZSb -= gob.offsetLeft; YSb -= gob.offsetTop; } if(eSb != null) { YSb += eSb.y; ZSb += eSb.x; } if(gob.scrollTop > YSb || (gob.scrollTop + Vob) < (YSb + dsb.offsetHeight)) { if(Vob > (dsb.offsetHeight * 6)) { gob.scrollTop = YSb - dsb.offsetHeight; } else { gob.scrollTop = YSb; } } if(gob.scrollLeft > ZSb || (gob.scrollLeft + Wob) < (ZSb + dsb.offsetWidth)) { gob.scrollLeft = ZSb; } snb = ZSb - gob.scrollLeft; tnb = YSb - gob.scrollTop; return {x:snb, y:tnb};}function iSb(fzb, kSb){ var gSb = fzb; var hSb = gSb.offsetParent; if(hSb == null) { return null; } if(kSb == null) { return hSb; } while(gSb != null && gSb != hSb) { if(gSb == kSb) { return null; } gSb = gSb.parentNode; } return hSb;}function mSb(){ var nAc =""+"rw_getDisplayWidth="+ rw_getDisplayWidth() +"  rw_getDisplayWidthAdjusted="+ rw_getDisplayWidthAdjusted() +"  rw_getDocumentDisplayWidth="+ rw_getDocumentDisplayWidth() +"  rw_getDocumentDisplayWidthAdjusted="+ rw_getDocumentDisplayWidthAdjusted() +"  rw_getDisplayHeight="+ rw_getDisplayHeight() +"  rw_getDisplayHeightAdjusted="+ rw_getDisplayHeightAdjusted() +"  rw_getDocumentDisplayHeight="+ rw_getDocumentDisplayHeight() +"  rw_getDocumentDisplayHeightAdjusted="+ rw_getDocumentDisplayHeightAdjusted() +"  rw_getScreenOffsetLeft="+ rw_getScreenOffsetLeft() +"  rw_getScreenOffsetTop="+ rw_getScreenOffsetTop() +"  rw_getScrollBarWidth="+ rw_getScrollBarWidth() +"  rw_getScrollBarHeight="+ rw_getScrollBarHeight(); hya(nAc);}function nSb(dpb){ wRb(document.getElementById(dpb));}if(document.getElementById("testbuildspan")){ document.getElementById("testbuildspan").innerHTML ="test build 4";}SpeechStream.stringAssist = new function(){ var pSb = String.fromCharCode(160); this.SOFT_HYPHEN = String.fromCharCode(173); var self = this; var qSb = /[\s\xA0]+/g; this.REGEX_WORD_SPLIT = null; this.REGEX_NON_WORD = null; function sSb() { var rSb =""; var i; var nAc ='\\s\xA0!"%&()*+,-./:;<=>?[]^_{|}\u201d\u201c'; for(i = 0; i < nAc.length; i++) { rSb +='\\'+ nAc.charAt(i); } self.REGEX_WORD_SPLIT = new RegExp('(['+ rSb +'])','g'); self.REGEX_NON_WORD = new RegExp('(\\S*[0-9|$@#]\\S*)','g'); } sSb();this.trimWordsFromStart = function(Gwb, p_nWords) { if(Gwb == null) { return""; } var psb = Gwb; psb = self.reduceWhiteSpace(psb); if(psb.length == 0) { return""; } var ySb = 0; var hzb = psb.indexOf(' '); while(hzb > -1) { if(ySb == p_nWords) { psb = psb.substr(0, hzb); break; } ++ySb; hzb = psb.indexOf(' ', hzb + 1); } return psb; };this.trimWordsFromEnd = function(Gwb, p_nWords) { if(Gwb == null) { return""; } var psb = Gwb; psb = self.reduceWhiteSpace(psb); if(psb.length == 0) { return""; } var ySb = 0; var hzb = psb.lastIndexOf(' '); while(hzb > -1) { if(ySb == p_nWords) { psb = psb.substr(hzb+1); break; } ++ySb; hzb = psb.lastIndexOf(' ', hzb - 1); } return psb; };this.trimWordsFromStartAsArray = function(Gwb, p_nWords) { var words = self.convertTextToArray(Gwb); if(words.length<=p_nWords) { return words; } else { return words.slice(0, p_nWords); } };this.trimWordsFromEndAsArray = function(Gwb, p_nWords) { var words = self.convertTextToArray(Gwb); if(words.length<=p_nWords) { return words; } else { return words.slice(words.length - p_nWords, words.length); } };this.getWordListToBreak = function(Gwb, p_nWords, p_bForward) { var wordList; if(p_nWords > -1) { wordList = p_bForward? SpeechStream.stringAssist.trimWordsFromStartAsArray(Gwb, p_nWords): SpeechStream.stringAssist.trimWordsFromEndAsArray(Gwb, p_nWords); } else { wordList = SpeechStream.stringAssist.convertTextToArray(Gwb); } if(!p_bForward) { wordList.reverse(); } var DTb=false; var wzb = wordList.length; var i; var FTb, bPost; var yzb; for(i=0; i<wzb; i++) { if(i == p_nWords) { DTb = true; } if(!DTb) { var HTb = i; yzb = wordList[i]; FTb = !bxa(yzb.charCodeAt(0)); bPost = !bxa(yzb.charCodeAt(yzb.length - 1)); if(FTb || bPost) { DTb=true; if(!FTb && bPost && p_bForward) { i++; } else if(FTb && !bPost && !p_bForward) { i++; } } yzb = SpeechStream.stringAssist.Ora(yzb); wordList[HTb] = yzb; } if(DTb) { wordList = wordList.slice(0, i); break; } } if(!p_bForward) { wordList.reverse(); } return wordList; };this.convertTextToArray = function(Gwb) { if(Gwb == null || Gwb.length == 0) { return []; } var QBc = self.reduceWhiteSpace(Gwb).trimTH(); return QBc.split(" "); };this.reduceWhiteSpace = function(Gwb) { return Gwb.replace(qSb," "); }; this.filterWordForPronunciation = function(qxa) { if(qxa == null || qxa.length == 0) { return qxa; } var wzb = qxa.length; for(var i = 0; i < wzb; i++) {var Wub = qxa.charCodeAt(i); if(! (Wub == 39 || Wub == 45 || (Wub > 47 && Wub < 58) || (Wub > 64 && Wub < 91) || (Wub > 94 && Wub < 123) || (Wub > 127 && Wub!=160) )) { qxa = qxa.replace(qxa.charAt(i),' '); } } return qxa.trimTH(); };this.filterToListOfWords = function(Bzb, p_filterList, p_regExSplit) { var QBc; var wordList; var NTb = []; if(typeof(p_regExSplit) =="undefined"|| p_regExSplit == null) { p_regExSplit = self.REGEX_WORD_SPLIT; } QBc = Bzb.replace(self.REGEX_NON_WORD,' '); QBc = QBc.replace(p_regExSplit,' '); QBc = tinymce.trim(QBc.replace(/(\s+)/g,' ')); wordList = QBc.split(" "); tinymce.each(wordList, function (v) { if(NTb.indexOf(v) == -1 && p_filterList.indexOf(v) == -1) { NTb.push(v); } }); return NTb; };this.Ora = function(Bzb) { var wzb = Bzb.length; for(var i = 0; i < wzb; i++) {var Wub = Bzb.charCodeAt(i); if(! (Wub == 39 || Wub == 45 || (Wub > 47 && Wub < 58) || (Wub > 64 && Wub < 91) || (Wub > 94 && Wub < 123) || (Wub > 127 && (Wub!=160 && Wub!=163 && Wub!=8364) ) )) { Bzb = Bzb.replace(Bzb.charAt(i),' '); } } return Bzb.replace(self.REGEX_WORD_SPLIT,' ').trimTH(); };this.checkIfIncludesBreak = function(wqb) { return !(bxa(wqb.charCodeAt(0)) && bxa(wqb.charCodeAt(wqb.length - 1))); };this.filterNbsp = function(Gwb) { if(typeof(Gwb) =="string"&& Gwb.indexOf(pSb) > -1) { var hzb = Gwb.indexOf(pSb); while(hzb > -1) { Gwb = Gwb.replace(pSb," "); hzb = Gwb.indexOf(pSb, hzb + 1); } } return Gwb; };this.filter = function(Gwb, p_strFilter, qUb) { if(typeof(Gwb) =="string"&& typeof(p_strFilter) =="string"&& typeof(qUb) =="string") { if(Gwb.indexOf(p_strFilter) > -1) { var hzb = Gwb.indexOf(p_strFilter) > -1; while(hzb > -1) { Gwb = Gwb.replace(p_strFilter, qUb); hzb = Gwb.indexOf(p_strFilter, hzb + 1); } } } return Gwb; };this.compareStrings = function(p_str1, p_str2) { var vyb = self.reduceWhiteSpace(p_str1); var xyb = self.reduceWhiteSpace(p_str2); return vyb == xyb; };};function XTb(dsb, zfb){ try { if(dsb == null) { return null; } if(dsb.nodeType == 1 || dsb.nodeType == 3) { var Tkb = SSDOM.checkForSpecialParent(dsb); if(Tkb != null) { return new THDomRefPt(SSDOM.getPositionInDom(Tkb), zfb); } var Tyb; var xjb; if(dsb.nodeType == 1) { Tyb = 0; xjb = dsb; } else { Tyb = hTb(dsb); xjb = dsb.parentNode; } var attr = xjb.getAttribute("rwstate"); var bTb = xjb.getAttribute(daa); while( (attr != null && attr.length > 0) || bTb!= null ) { Tyb += hTb(xjb); xjb = xjb.parentNode; attr = xjb.getAttribute("rwstate"); bTb = xjb.getAttribute(daa); } if(zfb == -1) { Tyb = -1; } return new THDomRefPt(SSDOM.getPositionInDom(xjb), Tyb + zfb); } else { return null; } } catch(ignore) { return null; }}function hTb(dsb){if(dsb == null){ return 0;}var Tyb = 0;var fTb = dsb.previousSibling;if(fTb != null){ Tyb = jTb(fTb);}return Tyb;}function jTb(dsb){var Tyb = 0;var fTb = dsb;var tyb;while(fTb != null){ if(fTb.nodeType ==3) { tyb = fTb.nodeValue; Tyb += tyb.length; } else if(fTb.nodeType == 1) { if(!SSDOM.isInvalidNode(fTb)) { if(SSDOM.isSpecialCase(fTb)) { Tyb += 1; } else if(fTb.tagName.toLowerCase() !="textarea") { Tyb += jTb(fTb.lastChild); } else { Tyb += 1; } } } fTb = fTb.previousSibling;}return Tyb;}function mTb(dsb){ if(Nda || Mda) { var Lob = SSDOM.getBody(dsb); if(Lob.getAttribute(("id")) =="tinymce") { return true; } var Yub = dsb; if(Yub.nodeType == 3) { Yub = Yub.parentNode; } while(Yub != null && Yub != Lob) { if(Yub.getAttribute(caa) != null) { return true; } Yub = Yub.parentNode; } } return false;}function qTb(dsb){ var Dtb =""; try { if(dsb.nodeType == 1) { if(dsb.getAttribute("ignore") == null) { var tagName = dsb.tagName.toLowerCase(); if(tagName =="input") { var lab = dsb.getAttribute("type"); if(lab != null) { lab = lab.toLowerCase(); if(lab.length == 0 || lab =="text") { Dtb = dsb.value; } else if(lab =="password") { Dtb =""; } else if(lab =="image") { var nnb = dsb.getAttribute("alt"); if(nnb != null && nnb.length > 0) { Dtb = nnb; } else { Dtb =""; } } else if(lab =="button"|| lab =="submit"|| lab =="reset") { if(dsb.className =="rwcalbutton"|| dsb.className =="rwcalEqbutton") { Dtb = dsb.getAttribute("name"); } else { Dtb = dsb.getAttribute("value"); } } } else { Dtb = dsb.value; } } else if(tagName =="select") { var uTb = dsb.selectedIndex; var Jsb =""; var wzb = dsb.options.length; for( var Dwb = 0; Dwb < wzb; Dwb++) { Jsb += dsb.options[Dwb].text +" "; } if(wzb > 0) { if(uTb > -1) { Dtb = dsb.options[uTb].text +" selected from the list "+ Jsb; } else { Dtb ="No selection from list "+ Jsb; } } } else if(tagName =="textarea"|| tagName =="option") { Dtb = dsb.value; } else if(tagName =="img") { var mnb = dsb.getAttribute("title"); if(mnb != null && mnb.length > 0) { Dtb = mnb; } else { var nnb = dsb.getAttribute("alt"); if(nnb != null && nnb.length > 0) { Dtb = nnb; } else { var onb = dsb.getAttribute("msg"); if(onb != null && onb.length > 0) { Dtb = onb; } } } } else if(tagName =="math") { var BUb = SSDOM.getTextFromMathMl(dsb); if(BUb.length > 0) { Dtb = nnb; } } else { var nnb = dsb.getAttribute("alt"); if(nnb != null && nnb.length > 0) { Dtb = nnb; } else { var onb = dsb.getAttribute("msg"); if(onb != null && onb.length > 0) { Dtb = onb; } } } } } } catch(ignore) { Dtb =""; } if(Dtb == null) { Dtb =""; } return Dtb;}function KUb(LUb){ var EUb; var tkb; var ewb; var Pgb; var ylb; var yXb; tkb = 0; ewb = LUb.indexOf(":"); Pgb = LUb.indexOf(";", ewb); while(tkb > -1 && ewb > -1) { ylb = LUb.substring(tkb, ewb); if(Pgb > -1) { yXb = LUb.substring(ewb + 1, Pgb); } else { yXb = LUb.substring(ewb + 1); } if(yXb.length == 0) { EUb = rfa.indexOf(ylb); if(EUb > -1) { rfa.splice(EUb, 1); delete sfa[ylb]; } } else { EUb = rfa.indexOf(ylb); if(!(EUb > -1)) { rfa.push(ylb); } sfa[ylb] = yXb; } if(Pgb > -1) { tkb = Pgb + 1; ewb = LUb.indexOf(":", tkb); Pgb = LUb.indexOf(";", ewb); } else { break; } }}function QUb(Gwb){ var wzb = Gwb.length; var QBc = Gwb; var aqb = VUb(Gwb); if(aqb == null) { return Gwb; } var i; var j; var c; for(i=wzb - 1; i>=0; i--) { c = aqb.charCodeAt(i); if(c != 32) { j = i; while(c != 32 && i >= 0) { --i; c = aqb.charCodeAt(i); } var PUb = aqb.substring(i+1, j+1); if(sfa[PUb] != null) { QBc = QBc.substring(0, i+1) +' '+ sfa[PUb ] +' '+ QBc.substr(j+1); } } } return QBc;}function VUb(Gwb){ var zvb = false; var wzb = Gwb.length; var fUb =""; var i; var c; for(i=0; i<wzb; i++) { c = Gwb.charCodeAt(i); if(c == 32 || hxa(c)) { fUb +=' '; } else { fUb += Gwb.charAt(i); zvb = true; } } if(zvb) { return fUb; } else { return null; }}function XUb(Gwb){ return (rfa.indexOf(Gwb.trimTH()) > -1);}function cUb(dUb){ var Ovb; var ibb = false; var bUb = dUb.split(" "); var wzb = bUb.length; var i; for(i=0; i<wzb; i++) { Ovb = QUb(bUb[i]); if(Ovb != bUb[i]) { bUb[i] = Ovb; ibb = true; } } if(ibb) { var fUb =""; for(i=0; i<wzb - 1; i++) { fUb += bUb[i]; fUb +=" "; } fUb += bUb[wzb - 1]; return fUb; } return dUb;}function jUb(rwb){ var ibb = false; if(qfa && rwb != null) { var wzb = rwb.length; var i; for(i=0; i<wzb; i++) { var Ovb = QUb(rwb[i]); if(Ovb != rwb[i]) { rwb[i] = Ovb; ibb = true; } } } return ibb;}KUb(tfa);function nUb(Bzb, pUb, qUb){ if(typeof(Bzb) =="string") { var n = Bzb.indexOf(pUb); while(n > -1) { Bzb = Bzb.replace(pUb, qUb); n = Bzb.indexOf(pUb, n +1); } } return Bzb;}function sUb(Gwb){ var rUb = Gwb.replace(/\x26/g,'&amp;'); rUb = rUb.replace(/\x3c/g,'&lt;'); rUb = rUb.replace(/\x3e/g,'&gt;'); return rUb;}function vUb(dpb){ var wzb = dpb.length; if(wzb > 100) { return NOb(dpb); } else { var i; var c; var s; for(i=0;i<wzb;i++) { c = dpb.charCodeAt(i); if( (c>47&&c<58) || (c>63&&c<92) || (c>94&&c<124) ) { continue; } if(c>126 || c==92 || c==47 || c==58 || c==59 || c==42 || c==63 || c==34 || c==60 || c==62 || c==124 || c==35 || c==37 || c==43 || c==38 || c==94) { s ="^"+ fya(c); dpb = dpb.substr(0, i) + s + dpb.substr(i+1); wzb = dpb.length; i+=s.length-1; } } } return dpb;}var xUb = null;function zUb(AVb){ var nAc ="th_tmp$"; var Dwb = 1; var zhb; var feb = true; while(feb) { zhb = nAc + Dwb; if(AVb.document.getElementById(zhb)) { ++Dwb; } else { feb = false; } } return zhb;}function rw_getTargetNodeAsCaretIE(evt, KVb){ try { if((Ofa||Pfa||Qfa) && KVb && !wHb(evt)) { var EVb = evt.srcElement; var FVb = SSDOM.getBody(EVb); var GVb = EVb.childNodes.length; var i; var HVb = false; for(i=0; i<GVb; i++) { if(EVb.childNodes[i].nodeType == 3) { HVb = true; break; } } if(HVb) { if(xUb == null) { xUb = zUb(FVb); } var IVb = FVb.document.getElementById(xUb); if(IVb != null) { IVb.parentNode.removeChild(IVb); } var range = FVb.document.selection.createRange(); range.collapse(); range.pasteHTML("<span id='"+ xUb +"'></span>"); var IBc = FVb.document.getElementById(xUb); var MVb = null; if(IBc != null) { if(IBc.previousSibling != null && IBc.previousSibling.nodeType == 3) { SSDOM.mergeTextNodes(IBc.previousSibling); MVb = new Xqa(IBc.previousSibling, IBc.previousSibling.length, true); } if(IBc.nextSibling != null && IBc.nextSibling.nodeType == 3) { SSDOM.mergeTextNodes(IBc.nextSibling); if(MVb == null) { MVb = new Xqa(IBc.nextSibling, 0, true); } } if(MVb == null && IBc.nextSibling != null && IBc.nextSibling.nodeType == 1) { MVb = new Xqa(IBc.nextSibling, 0, true); } else if(MVb == null && IBc.previousSibling != null && IBc.previousSibling.nodeType == 1) { MVb = new Xqa(IBc.previousSibling, 0, true); } } if(MVb == null) { MVb = new Xqa(IBc.parentNode, 0, true); } if(IBc != null) { IBc.parentNode.removeChild(IBc); } return MVb; } else { return new Xqa(EVb, 0, true); } } if(Vfa) { ULb = evt.target; if(ULb != null) { if(ULb.firstChild != null && ULb.firstChild.nodeType == 3 && ULb.tagName.toLowerCase() !="textarea") { var NVb = ULb.firstChild.nodeValue; if(NVb.trimTH().length > 0) { ULb = ULb.firstChild; } } return new Xqa(ULb, 0, true); } } else { var OVb = AEb(evt); var PVb = SSDOM.getRangeObject(evt.srcElement.ownerDocument.body); try { PVb.moveToPoint(OVb.x, OVb.y); } catch(skip) { return null; } var WVb = SSDOM.getRangeObject(evt.srcElement.ownerDocument.body); var RVb = SSDOM.getRangeObject(evt.srcElement.ownerDocument.body); var SVb = evt.srcElement.firstChild; while((SVb != null)) { if(SVb.nodeType == 3 && SVb.nodeValue.trimTH().length > 0) { SSDOM.mergeTextNodes(SVb); var Ijb = SVb.previousSibling; while(Ijb != null && Ijb.nodeType != 1) { Ijb = Ijb.previousSibling; } if(Ijb != null) { WVb.moveToElementText(Ijb); WVb.collapse(false); } else { WVb.moveToElementText(SVb.parentNode); } var nextNode = SVb.nextSibling; while(nextNode != null && nextNode.nodeType != 1) { nextNode = nextNode.nextSibling; } if(nextNode != null) { RVb.moveToElementText(nextNode); WVb.setEndPoint("EndToStart", RVb); } else { RVb.moveToElementText(SVb.parentNode); WVb.setEndPoint("EndToEnd", RVb); } if(WVb.inRange(PVb)) { var Tyb = eVb(SVb, WVb, PVb); return new Xqa(SVb, Tyb, true); } } SVb = SVb.nextSibling; } } } catch(exc) { Kya("rw_getTargetNodeAsCaretIE error:"+ exc.message); } return null;}function rw_getTextRangeAsRefPtIE(HWb, xVb){ try { var WVb = SSDOM.getRangeObject(HWb); var parentNode = xVb.parentElement(); WVb.moveToElementText(parentNode); var Tyb = eVb(parentNode, WVb, xVb); var pfb = XTb(parentNode, Tyb); return pfb; } catch(exc) { Kya("rw_getTextRangeAsRefPtIE error:"+ exc.message); } return null;}function eVb(fVb, fdb, hVb){ try { var Tyb = 0; var range = fdb.duplicate(); range.collapse(); range.move("character", 1); range.move("character", -1); var iVb = 0; var jVb = 0; while(range.compareEndPoints("EndToEnd", hVb) == -1) { range.moveEnd("character", 1); iVb = range.text.length; if(iVb > jVb) { ++Tyb; jVb = iVb; } } return Tyb; } catch(err) { return 0; }}function vVb(HWb, xVb){ var adb = xVb.duplicate(); adb.collapse(true); var lVb = rw_getTextRangeAsRefPtIE(HWb, adb); adb = xVb.duplicate(); adb.collapse(false); var mVb = rw_getTextRangeAsRefPtIE(HWb, adb); return new THRange(HWb, lVb, mVb);}function rw_getAsTextRange(HWb, MWb, OWb, NWb, PWb){ var range = SSDOM.getRangeObject(HWb); var ABc = SSDOM.getCaretPairFromDomPosition(HWb, MWb, -1, NWb, -1); var efb = ABc.efb; var ffb = ABc.ffb; if(efb != null && efb.node != null && ffb != null && ffb.node != null) { var qVb = efb.node; if(qVb.nodeType == 3) { var Tyb = hTb(qVb); qVb = qVb.parentNode; OWb += Tyb; } var sVb = ffb.node; if(sVb.nodeType == 3) { var Tyb = hTb(sVb); sVb = sVb.parentNode; PWb += Tyb; } range.moveToElementText(qVb); range.collapse(); TWb(range, OWb); range.collapse(false); range.select(); var uVb = SSDOM.getRangeObject(HWb); uVb.moveToElementText(sVb); uVb.collapse(); TWb(uVb, PWb); uVb.collapse(false); range.setEndPoint("EndToEnd", uVb); } else { range = null; Kya("Error with rw_getAsTextRange."); } return range;}function TWb(fdb, Kkb){ var wzb; var Mzb; var SWb; wzb = fdb.text.length; while(Kkb > 0) { SWb = fdb.moveEnd("character", Kkb); if(SWb == 0) { return; } Mzb = fdb.text.length; Kkb -= (Mzb - wzb); wzb = Mzb; }}SpeechStream.ipadUtils = new function(){ this.tinyMceBlurFix = function() { if(Dga && cfa) { try { var WWb = TAb(true); if(WWb) { if(WWb.ipadTinyMceFocus) { WWb.ipadTinyMceFocus = false; var XWb = window.pageXOffset; var YWb = window.pageYOffset; var OAc = document.getElementById(SpeechStream.tinymceipadfix); OAc.focus(); window.scrollTo(XWb, YWb); OAc.blur(); } } } catch(err){} } };};var aWb = new SpeechStream.Dictionary();function dWb(Bzb){ var QBc; var wzb; var i; var c; if(SpeechStream.pronunciation.encodeData()) { QBc =""; wzb = Bzb.length; for(i=0; i<wzb; i++) { c = Bzb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { var akb = fya(c); switch(akb.length) { case 1: akb ="0"+ akb; case 2: QBc +="/x"+ akb; break; case 3: akb ="0"+ akb; case 4: QBc +="/u"+ akb; break; default: } } else { QBc += Bzb.charAt(i); } } } else { QBc =""; wzb = Bzb.length; for(i=0; i<wzb; i++) { c = Bzb.charCodeAt(i); if(c == 34) { QBc +="%22"; } else if(c == 39) { QBc +="%27"; } else { QBc += Bzb.charAt(i); } } } return QBc;}function iWb(Bzb){ var Ovb = decodeURIComponent(Bzb); var QBc =""; var wzb = Ovb.length; var i; var OAc; var mWb; for(i=0; i<wzb; i++) { var c = Ovb.charAt(i); if(c =='/') { if(i< wzb - 1) { var nWb = Ovb.charAt(i + 1); switch(nWb) { case'/': QBc +='/'; i++; break; case'x': if(i<wzb - 3) { OAc = Ovb.substr(i + 2, 2); mWb = gya(OAc); QBc += String.fromCharCode(mWb); i+=3; } break; case'u': if(i<wzb - 5) { OAc = Ovb.substr(i + 2, 4); mWb = gya(OAc); QBc += String.fromCharCode(mWb); i+=5; } break; default: } } else { } } else if(c =='+') { QBc +=' '; } else if (c == 10 || c == 13) { } else if(c =='%') { if(i<wzb - 2) { OAc = Ovb.substr(i, 3); if(OAc =="%2f") { QBc +='/'; i+=2; } else if(OAc =="%2a") { QBc +=':'; i-=2; } else if(OAc =="%60") { QBc +='`'; i-=2; } else { if(i<wzb - 9) { OAc = Ovb.substr(i, 10); if(OAc =="%26quot%3b") { QBc +='"'; i+=9; } else { if(i<wzb - 6) { OAc = Ovb.substr(i,7); if(OAc =="%26quot") { QBc +='"'; i+=6; } else { QBc += c; } } else { QBc += c; } } } else { QBc += c; } } } else { QBc += c; } } else if(c =='&') { if(i<wzb - 5) { OAc = Ovb.substr(i, 6); if(OAc =="&#x27") { QBc +='\''; } else if(OAc =="&quot;") { QBc +='"'; } QBc += String.fromCharCode(mWb); i+=5; } } else { QBc += Ovb.charAt(i); } } return QBc;}function pWb(Bzb){ var QBc =""; var wzb = Bzb.length; var i; for(i=0; i<wzb; i++) { var c = Bzb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { QBc +="&#"+ c +";"; } else { QBc += Bzb.charAt(i); } } return QBc;}function tWb(Bzb){ var QBc =""; var wzb = Bzb.length; var i; for(i=0; i<wzb; i++) { var c = Bzb.charCodeAt(i); if( (c<40 && c!= 33) || c==43 || c== 47 || c==60 || c==62 || c==92 || c==96 || c>126) { if(c == 34 || c == 39) { QBc +="\\&#"+ c +";"; } else { QBc +="&#"+ c +";"; } } else { QBc += Bzb.charAt(i); } } return QBc;}var wWb ="\\x82\\x91\\x92";var xWb ="\\x93\\x94";var yWb = /^[,.?!;:\x27\x22$]+|[,.?!;:\x27\x22$]+$/g;function DXb(rwb){ if(!pfa) { return false; } var ibb = false; var Ovb; var QBc; var wzb = rwb.length; var i; for(i=0; i<wzb; i++) { QBc = rwb[i].trimTH(); if(QBc.indexOf(" ") > -1) { var zhb = PXb(QBc); if(zhb != QBc) { rwb[i] = zhb; ibb = true; } continue; } var value; if(aWb.MultiwordStart$__.indexOf(QBc) > -1) { if(i < wzb - 1) { Ovb = QBc +" "+ rwb[i+1].trimTH(); if( (value = aWb.get$__(Ovb)) != null ) { var KXb = value.split(" "); var vyb = KXb[0] +" "; var xyb = KXb[1] +" "; rwb[i] = vyb; rwb[i+1] = xyb; ibb = true; continue; } } if(i < wzb - 2) { Ovb = QBc +" "+ rwb[i+1].trimTH() +" "+ rwb[i+2].trimTH(); if( (value = aWb.get$__(Ovb)) != null ) { var KXb = value.split(" "); var vyb = KXb[0] +" "; var xyb = KXb[1] +" "; var wyb = KXb[2] +" "; rwb[i] = vyb; rwb[i+1] = xyb; rwb[i+2] = wyb; ibb = true; continue; } } } if( (value = aWb.get$__(QBc)) != null || (value = aWb.get$__(QBc.toLowerCase())) != null) { rwb[i] = value +" "; ibb = true; continue; } else { Ovb = QBc.replace(wWb,'\''); Ovb = Ovb.replace(xWb,'"'); if(QBc != Ovb) { if( (value = aWb.get$__(Ovb)) != null || (value = aWb.get$__(Ovb.toLowerCase())) != null) { rwb[i] = value +" "; ibb = true; continue; } else { QBc = Ovb; Ovb = QBc.replace(yWb,''); if(QBc != Ovb) { if( (value = aWb.get$__(Ovb)) != null || (value = aWb.get$__(Ovb.toLowerCase())) != null ) { rwb[i] = value +" "; ibb = true; continue; } } } } else { Ovb = QBc.replace(yWb,''); if(QBc != Ovb) { if( (value = aWb.get$__(Ovb)) != null || (value = aWb.get$__(Ovb.toLowerCase())) != null ) { rwb[i] = value +" "; ibb = true; continue; } } } } } return ibb;}function PXb(Gwb){ if(!pfa) { return Gwb; } var QBc =""; var wordList = Gwb.split(" "); if(DXb(wordList)) { var wzb = wordList.length; var i; for(i=0; i<wzb; i++) { QBc += wordList[i]; if(i < wzb - 1) { QBc +=" "; } } return QBc; } else { return Gwb; }}function XXb(Gwb){ var n1; var n2; var TXb; var Dmb; var Emb; var WXb = Gwb.split("\r\n"); var i; for(i=0; i<WXb.length; i++) { TXb = WXb[i]; var ZXb = TXb.indexOf("&p_pageID=*&") > -1; n1 = TXb.indexOf("&sayThis="); n2 = TXb.indexOf("&likeThis="); Dmb = TXb.substring(n1 + 9, n2); Emb = TXb.substring(n2 + 10); Dmb = iWb(Dmb); Emb = iWb(Emb); aWb.add$__(Dmb, Emb, ZXb); } if(typeof(vlb) =="function") { vlb(); }}function cXb(){ }function dXb(){ if(yca != null && yca.length > 0 && zca != null && zca.length > 0 && Ada != null && Ada.length > 0) { var jqb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } jqb = jya(true) + SpeechStream.cacheMode.getLiveServer(); var sgb ="&custID="+ yca +"&bookID="+ zca +"&pageID="+ Ada +"&combined=Y"; var flash = dab.getConnector(); if(flash == null) { hya("Connection to the server is not available."); } else { flash.getPronunciationDataAll(jqb, sgb); } }}var fXb = 2;function $rw_loadPronCallback(Dgb){ if(Dgb == null) { if(fXb > 0) { --fXb; dXb(); } else { hya("Failed to load pronunciation data, this may affect the text to speech function."); } } else { Dgb = Dgb.trimTH(); if(Dgb =="") { if(SpeechStream.pronunciation.mode != SpeechStream.pronunciation.SERVER_PRONUNCIATION) { ofa = true; } if(typeof(vlb) =="function") { vlb(); } } else if(Dgb =="-1") { if(fXb > 0) { --fXb; dXb(); } else { hya("Failed to load pronunciation data, this may affect the text to speech function."); } } else { if(SpeechStream.pronunciation.mode != SpeechStream.pronunciation.SERVER_PRONUNCIATION) { ofa = true; } XXb(Dgb); } }}function iXb(DYb, uXb, EYb){ if(yca != null && yca.length > 0 && zca != null && zca.length > 0 && Ada != null && Ada.length > 0) { var jqb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } jqb = jya(true) + SpeechStream.cacheMode.getLiveServer(); var sgb ="&custID="+ yca +"&bookID="+ zca +"&pageID="+ (EYb?"*":Ada) +"&sayThis="+ dWb(DYb) +"&likeThis="+ dWb(uXb); var flash = dab.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.addPronunciationData(jqb, sgb); } }}function $rw_addPronCallback(Dgb){ if(Dgb == null) { document.getElementById("confirmPageMsg").innerHTML ="Failed to insert."; } else if(Dgb =="-1") { document.getElementById("confirmPageMsg").innerHTML ="Failed to insert."; } else { var ylb = document.getElementById('createSayThis').value.trimTH(); var yXb = document.getElementById('createLikeThis').value.trimTH(); var Cmb = document.getElementById('createAllPages').checked; aWb.add$__(ylb, yXb, Cmb); document.getElementById('createSayThis').value =''; document.getElementById('createLikeThis').value =''; document.getElementById("confirmPageMsg").innerHTML ="Pronunciation inserted."; vlb(); }}function sXb(DYb, uXb, EYb){ if(yca != null && yca.length > 0 && zca != null && zca.length > 0 && Ada != null && Ada.length > 0) { var jqb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } jqb = jya(true) + SpeechStream.cacheMode.getLiveServer(); var sgb ="&custID="+ yca +"&bookID="+ zca +"&pageID="+ (EYb?"*":Ada) +"&sayThis="+ dWb(DYb) +"&likeThis="+ dWb(uXb); var flash = dab.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.updatePronunciationData(jqb, sgb); } }}function $rw_updatePronCallback(Dgb){ if(Dgb == null) { document.getElementById("editPageMsg").innerHTML ="Failed to updated."; } else if(Dgb =="-1") { document.getElementById("editPageMsg").innerHTML ="Failed to updated."; } else { var ylb = document.getElementById('editSayThis').value.trimTH(); var yXb = document.getElementById('editLikeThis').value.trimTH(); var Cmb = document.getElementById('editAllPages').checked; aWb.add$__(ylb, yXb, Cmb); document.getElementById('editSayThis').value =''; document.getElementById('editLikeThis').value =''; document.getElementById("editPageMsg").innerHTML ="Pronunciation updated."; Hmb(); vlb(); }}function CYb(DYb, EYb){ if(yca != null && yca.length > 0 && zca != null && zca.length > 0 && Ada != null && Ada.length > 0) { var jqb; if(SpeechStream.cacheMode.getLiveServer() == null) { return; } jqb = jya(true) + SpeechStream.cacheMode.getLiveServer(); var sgb ="&custID="+ yca +"&bookID="+ zca +"&pageID="+ (EYb?"*":Ada) +"&sayThis="+ dWb(DYb); var flash = dab.getConnector(); if(flash == null) { alert("Connection to the server is not available."); } else { flash.removePronunciationData(jqb, sgb, DYb); } }}function $rw_removePronCallback(Dgb, XQb){ if(Dgb == null) { document.getElementById("editPageMsg").innerHTML ="Failed to delete item."; } else if(Dgb =="-1") { document.getElementById("editPageMsg").innerHTML ="Failed to delete item."; } else { aWb.remove$__(XQb); document.getElementById('editSayThis').value =''; document.getElementById('editLikeThis').value =''; document.getElementById("editPageMsg").innerHTML ="Pronunciation deleted."; vlb(); }}var GYb = null;function IYb(){ if(GYb != null) { return GYb; } else { if(ufa) { var qpb = document.getElementById("rwDrag"); if(qpb != null) { qpb.style.position ="relative"; ufa = false; } } var flash = null; try { if(Yfa) { flash = window.document.WebToSpeech; } else { if (window.document.WebToSpeech) { flash = window.document.WebToSpeech; } else {flash = window.WebToSpeech; } } if(flash != null) { flash.getVersion(); GYb = flash; } } catch(err) { flash = null; GYb = null; } if(flash == null) { var KYb = document.getElementById("WebToSpeech"); if(KYb != null) { flash = KYb; try { flash.getVersion(); GYb = flash; } catch(e) { flash = null; GYb = null; } if(flash == null && !Lfa && KYb.childNodes && typeof(KYb.childNodes.length) =="number") { var wzb = KYb.childNodes.length; var i; for(i=0; i<wzb; i++) { var Yub = KYb.childNodes[i]; if(Yub.tagName.toLowerCase() =="embed") { flash = Yub; try { flash.getVersion(); GYb = flash; } catch(e) { flash = null; GYb = null; } } } } } } return flash; }}var NYb = 0;SpeechStream.AjaxRequest = function(){ var OYb = ++NYb; var PYb = null; var QYb = null; var RYb = null; var SYb = false; var TYb = null; var UYb = null; var VYb = 0; var WYb = false; this.cancel = function() { Kya("Cancelling request "+ OYb); WYb = true; }; this.getCount = function() { return OYb; }; this.setTimeoutCallBack = function(p_func) { UYb = p_func; }; this.setErrorCallBack = function(p_func) { TYb = p_func; }; this.setTimeout = function(p_nMs) { VYb = p_nMs; };this.callBack = function() { if(WYb) { return; } with(this) { if(readyState < 4) { return; } if(status != 200) { if(UYb) { UYb(OYb); return; } if(TYb) { TYb(status); return; } } if(SYb) { if(RYb == null) { QYb(responseXML); } else { QYb[RYb](responseXML); } } else { if(RYb == null) { QYb(responseText); } else { QYb[RYb](responseText); } } } }; this.doPost = function(kAb, p_parameters, p_responseObject, p_responseCallback, p_bXml) { with(this) { QYb = p_responseObject; RYb = p_responseCallback; SYb = p_bXml; if(Qga) { g_ExtBackgroundScriptCommObj.extBGAjaxRequest(p_parameters, kAb, p_responseObject, p_responseCallback, p_bXml); } else { PYb = new XMLHttpRequest(); if(afa) { PYb.timeout = VYb; } PYb.open("POST", kAb, true); PYb.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); PYb.onreadystatechange = callBack; PYb.send(p_parameters); } } }; this.doGet = function(kAb, p_parameters, p_responseObject, p_responseCallback, p_bXml) { with(this) { QYb = p_responseObject; RYb = p_responseCallback; SYb = p_bXml; if(Qga) { g_ExtBackgroundScriptCommObj.extBGAjaxRequest(p_parameters, kAb, p_responseObject, p_responseCallback, p_bXml); } else { PYb = new XMLHttpRequest(); if(afa) { PYb.timeout = VYb; } PYb.open("GET", kAb, true); PYb.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); PYb.onreadystatechange = callBack; PYb.send(p_parameters); } } };};SpeechStream.HTML5Controller = function(){ var self = this; var XYb = gca; var YYb = false; var ZYb = 0; var aYb = false; var bYb = 0; var cYb = null; var dYb; var eYb; var fYb; var gYb; var hYb; var iYb; var jYb = xca; var jab = new Audio(); jab.type ="audio/mpeg"; if(typeof(Ida) =="number"&& Ida > -1) { jab.volume = ( parseInt(Ida, 10) / 100.0); } var Rab = null; var mYb = 0; var nYb = null; var Yab = true; var pYb = false; var qYb = false; this.initialise = function (p_flashVars, ECb, FCb, GCb) { dYb = ECb; eYb = FCb; fYb = GCb; if(qca != null) { gYb = qca; } else { gYb = LCb(ica, false); } if(pca != null) { hYb = pca; } else { hYb = LCb(ica, false); } if(rca != null) { iYb = rca; } else { iYb = LCb(ica, false); } if(p_flashVars.cacheMode =="true") { pYb = true; } if(p_flashVars.cacheLiveFallover =="true") { qYb = true; } if(p_flashVars.volumeValue > -1) { jab.volume = (p_flashVars.volumeValue / 100.0); } };this.setToClipboard = function(Bzb) { };this.setCacheBuster = function(p_bCacheBuster) { YYb = p_bCacheBuster; }; this.setCacheMode = function() { };this.resetCacheTimer = function() { ZYb = 0; setTimeout(self.resetCacheTimer, Wda * 1000 * 60); }; setTimeout(this.resetCacheTimer, Wda * 1000 * 60); this.canPause = function() { return jab && !jab.ended && !isNaN(jab.duration) && jab.duration > 0; }; this.isPaused = function() { return aYb; }; this.pause = function() { if(jab != null) { jab.pause(); aYb = true; return true; } return false; }; this.resume = function() { if(jab != null && aYb) { if(Xfa && jab.currentTime > 0.05 && !jab.ended) { jab.currentTime -= 0.05; } jab.play(); aYb = false; return true; } return false; }; this.setCustomerId = function() {}; this.setBookId = function() {}; this.setPageId = function() {}; this.setSpeedValue = function() {}; this.setVoiceName = function(wJb) { jYb = wJb; }; this.getVoiceName = function() { return jYb; }; this.setVolumeValue = function(p_strVal) { if(jab != null) { try { jab.volume = ( parseInt(p_strVal, 10) / 100.0); } catch(e) { } } }; this.checkPath = function(Isa) { if(mda != null && nda != null) { var Ovb; Ovb = Isa; if(Ovb.indexOf(mda) > -1) { Ovb = Ovb.substr(0, Ovb.indexOf(mda)) + nda + Ovb.substr(Ovb.indexOf(mda) + mda.length); } return Ovb; } else { return Isa; } }; this.getPronunciationDataAll = function(p_strBase, p_strDetails) { var Knb = p_strBase +"/SpeechNAServer/pronounce.html?type=get&pronounceClient="+ Cda + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(Knb, null, this,"requestPGetAllLoad", false); }; this.requestPGetAllLoad = function(Gwb) { if(Gwb == null || Gwb.length == 0) { $rw_loadPronCallback("-1"); } else if(Gwb =="get=false"|| Gwb =="") { $rw_loadPronCallback("-1"); } else if(Gwb =="empty") { $rw_loadPronCallback(""); } else { $rw_loadPronCallback(Gwb); } }; this.addPronunciationData = function(p_strBase, p_strDetails) { var Knb = p_strBase +"/SpeechNAServer/pronounce.html?type=add&pronounceClient="+ Cda + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(Knb, null, this,"requestPAddLoad", false); }; this.requestPAddLoad = function(Gwb) { if(Gwb == null || Gwb.length == 0) { $rw_addPronCallback("-1"); } else if(Gwb =="add=false") { $rw_addPronCallback("-1"); } else if(Gwb =="add=true") { $rw_addPronCallback("1"); } else { $rw_addPronCallback("-1"); } }; this.updatePronunciationData = function(p_strBase, p_strDetails) { var Knb = p_strBase +"/SpeechNAServer/pronounce.html?type=update&pronounceClient="+ Cda + p_strDetails; var caller = new SpeechStream.AjaxRequest(); caller.doGet(Knb, null, this,"requestPUpdateLoad", false); }; this.requestPUpdateLoad = function(Gwb) { if(Gwb == null || Gwb.length == 0) { $rw_updatePronCallback("-1"); } else if(Gwb =="update=false") { $rw_updatePronCallback("-1"); } else if(Gwb =="update=true") { $rw_updatePronCallback("1"); } else { $rw_updatePronCallback("-1"); } }; this.removePronunciationData = function(p_strBase, p_strDetails, XQb) { var Knb = p_strBase +"/SpeechNAServer/pronounce.html?type=delete&pronounceClient="+ Cda + p_strDetails; var caller = new SpeechStream.AjaxRequest(); var AZb = function(Gwb) { if(Gwb == null || Gwb.length == 0) { $rw_removePronCallback("-1"); } else if(Gwb =="delete=false") { $rw_removePronCallback("-1"); } else if(Gwb =="delete=true") { $rw_removePronCallback("1", XQb); } else { $rw_removePronCallback("-1"); } }; caller.doGet(Knb, null, AZb, null, false); }; var BZb =""; this.getLastError = function() { return BZb; }; this.getVersion = function() { return XYb; }; this.getRevisionNumber = function() { return"0"; };function DZb() { var cZb = (++bYb); if(cYb != null) { HZb(0); delete cYb; cYb = null; } aYb = false; if(Yab) { jab.pause(); jab.autoplay = true; jab.play(); Yab = false; } return cZb; } this.checkRequestStillValid = function(EZb) { return EZb == bYb; }; this.setAudio = function(p_strMp3Url) { jab.src = p_strMp3Url; }; this.setTimer = function(p_timerArray) { Rab = p_timerArray; }; this.requestCompleteStartPlayback = function() { $rw_renderingSpeechCallback(); audioPlaybackTimer(); jab.autoplay = true;jab.play(); };this.stopSpeech = function() { if(jab != null) { jab.pause(); jab.currentTime = 0; this.onSpeechStop(-1); } cYb = null; ++bYb; };this.stopSpeechAlt = function() { if(jab != null) { jab.pause(); try { jab.currentTime = 0; } catch(err) { } this.onSpeechStop(-2); } cYb = null; ++bYb; };this.onSpeechStop = function(IZb) { HZb(IZb); }; function HZb(IZb) { if(IZb < 0) { $rw_doSelection(IZb); } Rab = null; mYb = 0; nYb = null; }; this.startSpeech = function(Gwb, OZb) { var cZb = DZb(); cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, Gwb, OZb); if(ZYb <= Vda || fYb == null) { cYb.makeSpeechRequest(eYb, false); } else { cYb.makeSpeechRequest(fYb, true); } }; this.startSpeechFromBackup = function(Gwb, OZb) { var cZb = DZb(); cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, Gwb, OZb); cYb.makeSpeechRequest(fYb, true); };this.startSpeechBackup = function(p_params) { if(fYb == null) { this.onSpeechStop(-3); return false; } else { var cZb = DZb(); cYb = new SpeechStream.Html5Speech(); cYb.copyParameters(this, cZb, p_params); cYb.makeSpeechRequest(fYb, true); return true; } };this.startSpeechFromCacheWithGen = function(p_strFilePath, dUb, p_destFolder, p_destFilename, p_bPron) { var cZb = DZb(); if(ZYb <= Vda || !qYb || fYb == null) { var YZb; var ZZb; if(YYb) { YZb = eYb +"SpeechCache/"+ p_strFilePath +".xml"+"?cachebuster="+ new Date().getTime() + Math.random(); ZZb = eYb +"SpeechCache/"+ p_strFilePath +".mp3"+"?cachebuster="+ new Date().getTime() + Math.random(); } else { YZb = eYb +"SpeechCache/"+ p_strFilePath +".xml"; ZZb = eYb +"SpeechCache/"+ p_strFilePath +".mp3"; } cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, dUb, p_bPron); cYb.setStaticParameters(p_destFolder, p_destFilename); cYb.loadFiles(YZb, ZZb); } else { cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, dUb, p_bPron); cYb.setStaticParameters(p_destFolder, p_destFilename); cYb.makeSpeechRequest(fYb, true); } };this.startSpeechGenerateCache = function(p_strFilePath, dUb, p_destFolder, p_destFilename, p_bPron, p_strServerName) { var cZb = DZb(); cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, dUb, p_bPron); cYb.setStaticParameters(p_destFolder, p_destFilename); cYb.makeSpeechRequest(p_strServerName, true); };this.startSpeechFromCache = function(p_strFilePath, dUb, p_bPron) { var cZb = DZb(); if(ZYb <= Vda || !qYb || fYb == null) { var YZb; var ZZb; if(YYb) { YZb = eYb +"SpeechCache/"+ p_strFilePath +".xml"+"?cachebuster="+ new Date().getTime() + Math.random(); ZZb = eYb +"SpeechCache/"+ p_strFilePath +".mp3"+"?cachebuster="+ new Date().getTime() + Math.random(); } else { YZb = eYb +"SpeechCache/"+ p_strFilePath +".xml"; ZZb = eYb +"SpeechCache/"+ p_strFilePath +".mp3"; } cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, dUb, p_bPron); cYb.loadFiles(YZb, ZZb); } else { cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, dUb, p_bPron); cYb.makeSpeechRequest(fYb, true); } }; this.speakFromFile = function(Mwb) { var cZb = DZb(); var YZb = Mwb +".xml"; var ZZb = Mwb +".mp3"; cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb,"n/a", false); cYb.loadFiles(YZb, ZZb); }; this.startSpeechFromFile = function(Gwb, kAb, p_bPron) { }; this.startHighlighting = function(Gwb) {}; this.simpleSpeech = function(Gwb, OZb) { var cZb = DZb(); cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, Gwb, OZb); cYb.setHighlightable(false); if(ZYb <= Vda || fYb == null) { cYb.makeSpeechRequest(eYb, false); } else { cYb.makeSpeechRequest(fYb, true); } }; this.simpleSpeechFromBackup = function(Gwb, OZb) { var cZb = DZb(); cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, Gwb, OZb); cYb.setHighlightable(false); cYb.makeSpeechRequest(fYb, true); }; this.autogenSpeechFiles = function(dUb, p_destFolder, p_destFilename, p_bPron, p_strServerName) { var cZb = DZb(); this.onSpeechStop(-2); cYb = new SpeechStream.Html5Speech(); cYb.setParameters(this, cZb, dUb, p_bPron); cYb.setStaticParameters(p_destFolder, p_destFilename); cYb.makeSpeechRequest(p_strServerName, true); }; this.checkAutogenCachedFiles = function(p_strFilePath) { }; this.autoGenComplete = function(p_strServerName) { }; this.getMP3File = function(JOb, p_bPron) { }; this.getPictureDictionaryPage = function(Gwb, p_strLocale) { var dZb ="&userName="+ Cda +"&swf="+ XYb; var Bab = iYb +"ImageServices/imagedict.html"; var mZb ="word="+ Gwb + dZb; if(p_strLocale != null) { mZb +="&locale="+ p_strLocale; } if(yca != null) { mZb +="&custID="+ yca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(Bab, mZb, this,"imagedictionaryLoad", false); }; this.imagedictionaryLoad = function(Gwb) { if (Gwb == null || Gwb.length == 0) { $rw_picturedictionaryReply("No Image."); } else { $rw_picturedictionaryReply(Gwb); } }; this.getCustomDictionaryPage = function(dUb, kAb) { var caller = new SpeechStream.AjaxRequest(); caller.doPost(kAb, dUb, this,"dictionaryLoad", false); }; this.getDictionaryPage = function(Gwb) { var Bab = gYb +"rwserver/"; var mZb ="query=dictionaryHtml"+"&text="+ Gwb +"&locale="+ Gda +"&userName="+ Cda +"&swf="+ XYb; if(yca != null) { mZb +="&custID="+ yca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(Bab, mZb, this,"dictionaryLoad", false); }; this.dictionaryLoad = function(Gwb) { if(Gwb == null || Gwb.length == 0) { $rw_dictionaryReply("Error loading content."); } else { $rw_dictionaryReply(Gwb); } };this.getPopupDictionaryPage = function(Gwb) { var Bab = gYb +"rwserver/"; var mZb ="query=dictionaryHtml"+"&text="+ Gwb +"&locale="+ Gda +"&userName="+ Cda +"&swf="+ XYb; if(yca != null) { mZb +="&custID="+ yca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(Bab, mZb, this,"dictionaryPopupLoad", false); };this.dictionaryPopupLoad = function(Gwb) { if(typeof($rw_popupDictionaryReply) =="function") { if(Gwb == null || Gwb.length == 0) { $rw_popupDictionaryReply("Error loading content."); } else { $rw_popupDictionaryReply(Gwb); } } }; this.getDictionaryPageFl = function(Gwb) { var Bab = gYb +"rwserver/?query=dictionary&type=result&wordType=15&"+"&text="+ Gwb +"&locale="+ Gda +"&userName="+ Cda +"&swf="+ XYb +"&dictionaryType=SIMPLE"; if(yca != null) { Bab +="&custID="+ yca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(Bab, null, this,"dictionaryFlLoad", false); }; this.getDictionaryPageFlHTML = function(Gwb) { var Bab = gYb +"rwserver/?query=dictionaryHtml"+"&text="+ Gwb +"&locale="+ Gda +"&userName="+ Cda +"&swf="+ XYb +"&dictionaryType=SIMPLE"; if(yca != null) { Bab +="&custID="+ yca; } var caller = new SpeechStream.AjaxRequest(); caller.doPost(Bab, null, this,"dictionaryFlLoad", false); }; this.dictionaryFlLoad = function(Gwb) { if(Gwb == null || Gwb.length == 0) { $rw_dictionaryFlReply("Error loading content."); } else { $rw_dictionaryFlReply(Gwb); } }; this.getTranslationPage = function(Gwb) { this.getTranslationGenericPage(Gwb,"English","Spanish"); }; this.getTranslationGenericPage = function(Gwb, Eab, Fab) { tZb(Gwb, Eab, Fab, false, this); }; this.getTranslationFlGenericPage = function(Gwb, Eab, Fab) { tZb(Gwb, Eab, Fab, true, this); }; this.getTranslationParagraph = function(Gwb, Eab, Fab) { Cab(Gwb, Eab, Fab, this); }; function tZb(Gwb, Eab, Fab, xZb, Gab) { var Bab = hYb +"rwtranslateserver/onlinetranslator"; var peb ="type=ultrahtml5&mode=content"+"&value="+ encodeURIComponent(Gwb) +"&value2="+ Gwb +"&caller="+ location.protocol +"//"+ location.host + location.pathname +"&key="+ NOb(Gwb + Cda) +"&username="+ Cda +"&source="+ Eab +"&dest="+ Fab; if(yca != null) { peb +="&custID="+ yca; } var caller = new SpeechStream.AjaxRequest(); if(xZb) { caller.doPost(Bab, peb, Gab,"translationFlLoad", false); } else { caller.doPost(Bab, peb, Gab,"translationLoad", false); } } this.paratranCaller = null; function Cab(Gwb, Eab, Fab, Gab) { var Bab = hYb +"rwtranslateserver/onlinetranslator"; var peb ="type=paragraphtranslate&mode=content"+"&value="+ Gwb +"&caller="+ location.protocol +"//"+ location.host + location.pathname +"&username="+ Cda +"&source="+ Eab +"&dest="+ Fab; if(yca != null) { peb +="&custID="+ yca; } if(self.paratranCaller != null) { self.paratranCaller.cancel(); } var caller = new SpeechStream.AjaxRequest(); caller.doPost(Bab, peb, Gab,"translationLoad", false); self.paratranCaller = caller; } this.translationLoad = function(Gwb) { self.paratranCaller = null; if(Gwb == null || Gwb.length == 0) { $rw_transReply("Error loading content."); } else { Gwb ="<style type=\"text/css\">div.rwTranWordHeader{font-weight: bold;padding: 5px;"+"border-bottom:1px solid #666666;margin-bottom: 10px;}"+"span.rwMeaningNum{pading-left: 10px;padding-right: 10px;font-weight:bold;}"+"span.rwMeaning{padding-right:1-px;}</style>"+ Gwb; $rw_transReply(Gwb); } }; this.translationFlLoad = function(Gwb) { if(Gwb == null || Gwb.length == 0) { $rw_transFlReply("Error loading content."); } else { Gwb ="<style type=\"text/css\">div.rwTranWordHeader{font-weight: bold;padding: 5px;"+"border-bottom:1px solid #666666;margin-bottom: 10px;}"+"span.rwMeaningNum{pading-left: 10px;padding-right: 10px;font-weight:bold;}"+"span.rwMeaning{padding-right:1-px;}</style>"+ Gwb; $rw_transFlReply(Gwb); } }; this.getSoundFileLength = function(Knb) { }; audioPlaybackTimer = function() { if(Rab == null) { return; } if(jab.ended) { $rw_speechCompleteCallback("Complete"); HZb(-1); try { jab.pause(); jab.currentTime = 0; } catch(err) {} return; } if(Rab.length > 0) { if(Rab[mYb] < jab.currentTime) { $rw_doSelection(mYb); mYb++; } if(jab.currentTime > Rab[Rab.length-1]) { $rw_speechCompleteCallback("Complete"); HZb(-1); try { jab.pause(); jab.currentTime = 0; } catch(err) {} return; } } nYb = setTimeout(audioPlaybackTimer, 10); }; this.strStoredVoice = null; this.setAltSettings = function (wJb, BKb, CKb, DKb, EKb) { if(this.strStoredVoice == null) { this.strStoredVoice = jYb; } if(typeof(wJb) =="string") { jYb = wJb; } }; this.restoreSettings = function() { if(this.strStoredVoice != null) { jYb = this.strStoredVoice; this.strStoredVoice = null; } };};SpeechStream.Html5Speech = function(){ this.m_nRequestNumber = -1; this.m_params = null; this.m_bBackup = false; this.m_bHighlightable = true; this.m_controller = null;this.makeSpeechRequest = function(p_strSpeechServer, p_bBackup) { var server = p_strSpeechServer +"SpeechServices/index.html"; this.m_bBackup = p_bBackup; var Kab = new SpeechStream.AjaxRequest(); Kab.doPost(server, this.m_params, this,"onSpeechRequestResponse", false); };this.onSpeechRequestResponse = function(p_strResponse) { if(!this.m_controller.checkRequestStillValid(this.m_nRequestNumber)) { return; } var Lab = p_strResponse.indexOf("xml="); var Mab = p_strResponse.indexOf("&mp3"); var Nab = p_strResponse.substring(Lab + 4, Mab); var Oab = p_strResponse.substring(Mab + 5, p_strResponse.length); if(Nab =="error"|| Oab =="error"|| Nab ==""|| Oab =="") { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { BZb ="Error response from server"; } return; } else { BZb ="Error response from server"; this.m_controller.onSpeechStop(-3); return; } } if(Nab =="busy"|| Oab =="busy") { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { BZb ="Busy response from server"; } return; } else { BZb ="Busy response from server"; this.m_controller.onSpeechStop(-3); return; } } if(Iea) { if(Nab.substring(0, 5) =="http:") { Nab ="https:"+ Nab.substr(5); } if(Oab.substring(0, 5) =="http:") { Oab ="https:"+ Oab.substr(5); } } this.loadFiles(Nab, Oab); }; this.loadFiles = function(p_strXmlUrl, p_strMp3Url) { p_strXmlUrl = this.m_controller.checkPath(p_strXmlUrl); p_strMp3Url = this.m_controller.checkPath(p_strMp3Url); this.m_controller.setAudio(p_strMp3Url); if(this.m_bHighlightable) { var Pab = new SpeechStream.AjaxRequest; Pab.doGet(p_strXmlUrl, null, this,"onTimingFileResponse", true); } else { var Rab = new Array(); this.m_controller.setTimer(Rab); this.m_controller.requestCompleteStartPlayback(); } }; this.onTimingFileResponse = function(p_xmlResponse) { if(!this.m_controller.checkRequestStillValid(this.m_nRequestNumber)) { return; } var Rab = new Array(); if(p_xmlResponse && p_xmlResponse.documentElement && p_xmlResponse.documentElement.childNodes) { var Sab = p_xmlResponse.documentElement.childNodes; var Tab = 0; for(i = 0; i < Sab.length; i++) { if(Sab[i].nodeType == 1) { Rab[Tab] = parseFloat(Sab[i].getAttribute("time") / 1000); if(Tab > 0 && Rab[Tab] <= Rab[Tab - 1]) { Rab[Tab] = Rab[Tab - 1] + 0.010; } Tab = Tab + 1; } } this.m_controller.setTimer(Rab); this.m_controller.requestCompleteStartPlayback(); } else { if(!this.m_bBackup) { if(!this.m_controller.startSpeechBackup(this.m_params)) { BZb ="Failed to get timing response from server"; } } else { BZb ="Failed to get timing response from server"; this.m_controller.onSpeechStop(-3); } } };};SpeechStream.Html5Speech.prototype.setParameters = function (oqb, EZb, Gwb, OZb){ if(Gwb == null) { Gwb =""; } this.m_controller = oqb; this.m_nRequestNumber = EZb; var peb ="text="+ encodeURIComponent(Gwb) +"&userName="+ encodeURIComponent(Cda) +"&voiceName="+ encodeURIComponent(oqb.getVoiceName())+"&speedValue="+ encodeURIComponent(Hda); if(yca != null) { peb +="&custID="+ encodeURIComponent(yca); } if(zca != null) { peb +="&bookID="+ encodeURIComponent(zca); } if(Ada != null) { peb +="&pageID="+ encodeURIComponent(Ada); } if(OZb) { peb +="&usePron=Y"; } this.m_params = peb;};SpeechStream.Html5Speech.prototype.copyParameters = function(oqb, EZb, p_params){ this.m_controller = oqb; this.m_nRequestNumber = EZb; this.m_params = p_params;};SpeechStream.Html5Speech.prototype.setStaticParameters = function (p_strDestFolder, p_strDestFilename){ var peb ="&destFolder="+ p_strDestFolder +"&destFilename="+ p_strDestFilename; this.m_params = this.m_params + peb;};SpeechStream.Html5Speech.prototype.setHighlightable = function(p_bHighlightable){ this.m_bHighlightable = p_bHighlightable;};SpeechStream.Html5Speech.prototype.getHighlightable = function(){ return this.m_bHighlightable;};SpeechStream.TouchScreenManager = function(){ var Wab = false; var Xab = false; var Yab = true; var Zab = null;this.initialise = function() { if(hfa >= 6 && Dga) { } else { yDb(document,"touchstart", onTouchStart); yDb(document,"touchmove", onTouchMove); yDb(document,"touchend", onTouchEnd); if(!uda && window.frames.length > 0) { var i; for(i=0; i<window.frames.length; i++) { this.initialiseToFrame(window.frames[i]); } } } }; this.initialiseToFrame = function(AVb) { if(hfa >= 6 && Dga) { } else if(Qga) { } else { try { if(AVb.document) { yDb(AVb.document,"touchstart", onTouchStart); yDb(AVb.document,"touchmove", onTouchMove); yDb(AVb.document,"touchend", onTouchEnd); } } catch(err) { } } };this.clickAndSpeak = function(enable) { Wab = enable; }; var aab ="onTouchStart onTouchMove onTouchEnd changedTouches";onTouchStart = function(event) { if(!bfa) { bfa = true; } Xab = false; if(Wab || nfa) { if(Yab) { var changedTouches = event.changedTouches ; if(changedTouches != null && changedTouches.length > 0) { var inb = LLb(changedTouches[0], true); Zab = bLb(inb); } } } };onTouchMove = function() { if(!bfa) { bfa = true; } Xab = true; };onTouchEnd = function(event) { if(Wab || nfa) { if(Xab) { Zab = null; return; } if(Yab && !nfa) { if(Zab == null) { return; } var target = new THHoverTarget(null, null, Zab.range); if(target == null) { return; } Yab = false; rw_speakHoverTarget(target); } else { cHb(event); } } };};var dab = null;SpeechStream.setUpControllerFactory = function(){ if(dab == null) { dab = (function() { var eab = null; var fab = null; var gab = false; var hab = false; var iab = new SpeechStream.TouchScreenManager(); iab.initialise(); if(lea) { eab = null; gab = false; } else { kab(); } function kab() { var jab; try { if((Lfa && !Qfa && !Rfa) || (Lfa && (Qfa||Rfa) && sab()) || fca =="hmh") { jab = null; gab = false; } else { jab = new Audio(); var lab; if(yfa =="mp3") { lab ="audio/mpeg"; } else { lab ="audio/"+ yfa; } jab.type = lab; if(jab.canPlayType) { gab = ("no"!= jab.canPlayType(lab)) && (""!= jab.canPlayType(lab)); } } } catch(err) { jab = null; gab = false; } } var instance = { enableTouchEvents: function(enable) { iab.clickAndSpeak(enable); },getConnector: function() { if(eab != null) { return eab; } if(gab) { eab = new SpeechStream.HTML5Controller(); if(ufa) { var qpb = document.getElementById("rwDrag"); if(qpb != null) { qpb.style.position ="relative"; ufa = false; } } } else { hab = instance.hasFlashSupport(); if(hab) { eab = IYb(); } } return eab; }, setSwaConntector: function(p_con) { fab = p_con; },getSwaConnector: function() { if(fab != null) { return fab; } else { return instance.getConnector(); } },hasFlashSupport: function() { if(typeof(eba_no_flash) =="boolean"&& eba_no_flash == true) { hab = true; } else { var flash = IYb(); if(flash != null) { var pab = flash.getVersion(); var qab = parseFloat(pab); if(qab < 1.05 || qab == NaN) { hab = false; } else { hab = true; } } } return hab; },doesSupportSpeech: function() { if(gab) { return true; } else { return instance.hasFlashSupport(); } },doesSupportHtml5: function() { return gab; } }; return instance; })(); }};function sab(){ var rab = null; try { rab = !!new ActiveXObject("htmlfile"); } catch (e) { rab = false; } return rab;}if(!SpeechStream.tools){ SpeechStream.tools = {};}SpeechStream.tools.translator = (function(){ var self = {}; self.translate = function(wqb) { if(typeof(wqb) =="string"&& wqb.length > 0) { var flash = dab.getConnector(); if(flash != null) { flash.getTranslationGenericPage(wqb, SpeechStream.translatorData.Lhb, SpeechStream.translatorData.Szb); } } else { var zhb ="<style type=\"text/css\">"+"div.rwTranWordHeader{"+"font-size:150%;"+"font-weight: bold;"+"padding-bottom: 3px;"+"padding-left: 5px;"+"border-bottom: 1px solid #666666;"+"margin-bottom: 10px;}"+"span.rwMeaningNum{padding-left: 10px;"+"padding-right: 10px;"+"font-weight: bold;}"+"span.rwMeaning{padding-right:10px}"+"</style>"+"<div class=\"rwTranWordHeader\">No valid word selected</div>"; $rw_transReply(zhb); } }; return self;})();if(!SpeechStream.tools){ SpeechStream.tools = {};}SpeechStream.tools.dictionary = (function(){ var self = {}; self.lookup = function(wqb) { $rw_dictionaryRequest(wqb); }; return self;})();if(!SpeechStream.tools){ SpeechStream.tools = {};}SpeechStream.tools.pictureDictionary = (function(){ var self = {}; self.lookup = function(wqb) { if(wqb.length > 0) { var flash = dab.getConnector(); if(flash != null) { flash.getPictureDictionaryPage(wqb, Gda); } } else { var zhb ="<div class=\"rwDictWordHeader\">No valid word selected</div>"; bKb(Zba, zhb); gKb(true, Zba); } }; return self;})();if(!SpeechStream.tools){ SpeechStream.tools = {};}SpeechStream.tools.factfinder = (function(){ var self = {}; self.lookup = function(qxa) { var bhb = pxa(qxa); if(bhb.length > 0) { var Dtb ="http://www.google.com/search?q="+ bhb; Cwa(Dtb,'popup', 700, 500, 1, 1, 0, 0, 0, 0, 0); } }; return self;})();function $rw_barCacheInit(){ if(Lfa) { SSDOM.Hnb(aga.pageData.placeholder,"<link href=\""+ aga.paths.strFileLoc +"rwcache.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { SSDOM.Hnb(aga.pageData.placeholder,"<link href=\""+ aga.paths.strFileLoc +"rwcacheSFF.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } var Hpb =""; Hpb +='<div id="rwGenerateCache" rwTHcomp="1" texthelpStopContinuous="1">'; Hpb +='<div class="rwGenerateCachePopupOutline">'; Hpb +='<div id="rwDragMeGenerateCache" class="rwToolbarCaptionGenerateCache" ignore="1">'; Hpb +='Loading, please wait...'; Hpb +='<img name="displayImg" align="right" src="'+ aga.paths.strFileLoc +'rwimgs/thex.bmp" onMouseOver="$rw_divOver(9)" onMouseOut="$rw_divOut(9)" '+'onMouseUp="$rw_divPress(9)" />'; Hpb +='</div>'; Hpb +='<div class="rwGenerateCachePopupContent">'; Hpb +='<span id="rwGenerateCachedisplay" ignore="1">'; Hpb +=''; Hpb +='</span>'; Hpb +='</div>'; Hpb +='</div>'; Hpb +='</div>'; SSDOM.Hnb(aga.pageData.placeholder, Hpb, false);}function $rw_barRecInit(){ if(Lfa) { SSDOM.Hnb(aga.pageData.placeholder,"<link href=\""+ aga.paths.strFileLoc +"rwrecorder.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } else { SSDOM.Hnb(aga.pageData.placeholder,"<link href=\""+ aga.paths.strFileLoc +"rwrecorderSFF.css\" type=\"text/css\" rel=\"stylesheet\" />", false); } var Hpb =""; Hpb +='<div id="rwRec" rwTHcomp="1" style="visibility:hidden" texthelpStopContinuous="1">'; Hpb +=' <div class="rwRecPopupOutline">'; if(Eda == ENG_UK || Eda == ENG_US) { Hpb +='  <div id="rwDragMeRec" class="rwToolbarCaptionRec" >'; } else { Hpb +='  <div id="rwDragMeRec" class="rwToolbarSpanCaptionRec" >'; } Hpb +='<img name="recImg" align="right" src="'+ aga.paths.strFileLoc +'rwimgs/thex.bmp" onmouseover="$rw_divOver(12);" onmouseout="$rw_divOut(12);" onmouseup="$rw_divPress(12);" /></div>'; Hpb +='<div class="rwRecPopupContent">'; Hpb +='<form name="rw_recForm" class="rw_recForm" id="rw_recForm">'; Hpb +='<table class="rw_recTable">'; Hpb +="<tbody>"; Hpb +='<tr><td><div class="rw_micDisplay" id="rw_micDisplay" onclick="recordExercise(START_RECORDING)"></div><div class="rw_micRecordingOn" id="rw_micRecordingOn" onclick="recordExercise(STOP_RECORDING)"></div></td></tr>'; Hpb +='<tr><td><div id="coverUpDiv"></div><div class="rw_playBackButton" id="rw_playBackButton" onclick="recordExercise(REPLAY_RECORDING)"></div></td></tr>'; Hpb +='</tbody></table></form>'; Hpb +='<div id="flashcontent" align="center"><embed type="application/x-shockwave-flash" src="SpeechStream/v194/flashaudiocontrol/textHelpAudioRecord.swf" width="300" height="138" style="undefined" id="audiocontrol" name="audiocontrol" bgcolor="#FF6600" quality="high" wmode="transparent" flashvars="myServer=SpeechStream/v194/flashaudiocontrol/&amp;mySound=3845_2013-12-03_155532191_p&amp;schoolId=235&amp;studentId=20543&amp;signature=acK8In%2Fa6khZxBMNM6XsPQ%3D%3D&amp;soundMode=playOnly&amp;audioStreamFileName=SpeechStream/v194/flashaudiocontrol/3845_2013-12-03_155532191_p&amp;recordType=1&amp;studentRecordModePendingText=Uploading...&amp;studentRecordModeRecordingText=Recording...&amp;audioQualityOGG=0.5&amp;studentRecordModeCSSPath=SpeechStream/v194/flashaudiocontrol/flashstyle.css"></embed></div>'; Hpb +='</div></div></div>'; SSDOM.Hnb(aga.pageData.placeholder, Hpb, false); }var START_RECORDING = 0;var STOP_RECORDING = 2;var REPLAY_RECORDING = 3;var Ebb = false;var Fbb=0;var Gbb=0;var Hbb = false;function recordExercise(i){ if( i == START_RECORDING ) { var IBc = document.getElementById("rw_micDisplay"); IBc.style.visibility="hidden"; var Mbb = document.getElementById("rw_micRecordingOn"); Mbb.style.visibility="visible"; Obb("audiocontrol").stopRecording(); Pbb( false ); Obb("audiocontrol").startRecording(); Fbb=new Date().getTime(); } else if(i==STOP_RECORDING) { var IBc = document.getElementById("rw_micDisplay"); IBc.style.visibility="visible"; var Mbb = document.getElementById("rw_micRecordingOn"); Mbb.style.visibility="hidden"; var Nbb = document.getElementById("coverUpDiv"); Nbb.style.visibility="hidden"; Ebb=false; Rbb(); Obb("audiocontrol").stopRecording(); Gbb=new Date().getTime(); } else if(i==REPLAY_RECORDING) { Ebb=true; Rbb(); Obb("audiocontrol").stopRecording(); Gbb=new Date().getTime(); Obb("audiocontrol").playStreaming(); }}function Obb(movieName){ if(navigator.appName.indexOf("Microsoft")!=-1) { if(window[movieName]) { return window[movieName]; } else { return document[movieName]; } } else { return document[movieName]; }}function Pbb(){ g_timerSeconds = 175; Rbb(); StartTheTimer();}function StartTheTimer(){ if( g_timerSeconds == 0 ) { Rbb(); recordExercise( STOP_RECORDING ); } else { self.status = g_timerSeconds; g_timerSeconds -= 1; Hbb = true; g_timerID = self.setTimeout("StartTheTimer()", 1000 ); }}function Rbb(){ if( Hbb ) { clearTimeout( g_timerID ); } Hbb = false;}if(typeof($rw_swaParameters) =="function"){ iea = true; $rw_swaParameters(); if(typeof($rw_userParameters) =="function") { $rw_userParameters(); } if($rw_barInit()) { RIb(); }}else if(typeof($rw_userParameters) =="function"){ iea = true; $rw_userParameters(); if($rw_barInit()) { RIb(); }}
